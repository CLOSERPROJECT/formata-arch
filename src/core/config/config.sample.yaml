workflow:
  name: Gallium shipment audit
  steps:
    - id: "1"
      title: Shipment intake
      order: 0
      substeps:
        - id: "1.1"
          order: 1
          title: Record shipment weight (kg)
          inputKey: shipmentKg
          role: dep1
          inputType: formata
          schema:
            type: object
            properties:
              shipmentKg:
                type: number
                title: shipmentKg
            required:
              - shipmentKg
            title: Record shipment weight
        - id: "1.2"
          order: 2
          title: Attach shipment reference
          inputKey: shipmentRef
          role: dep1
          inputType: formata
          schema:
            type: object
            properties:
              shipmentRef:
                type: string
                title: shipmentRef
            required:
              - shipmentRef
            title: Shipment reference
    - id: "2"
      title: Inspection
      order: 1
      substeps:
        - id: "2.1"
          order: 1
          title: Upload inspection report
          inputKey: report
          role: dep2
          inputType: formata
          schema:
            type: object
            properties:
              Report:
                title: Report
            required:
              - Report
            title: Inspection report
          uiSchema:
            Report:
              ui:components:
                unknownField: unknownNativeFileField
        - id: "2.2"
          title: Record inspection outcome
          order: 2
          role: dep2
          inputKey: inspectionOutcome
          inputType: formata
          schema:
            type: object
            required:
              - outcome
              - inspector
            properties:
              outcome:
                type: string
                title: Outcome
                enum:
                  - accepted
                  - rejected
                  - needs_review
              inspector:
                type: string
                title: Inspector
              comments:
                type: string
                title: Comments
          uiSchema:
            comments:
              ui:components:
                textWidget: textareaWidget
    - id: "3"
      title: Approval
      order: 3
      substeps:
        - id: "3.1"
          order: 1
          title: Approve shipment
          inputKey: approval
          role: dep3
          inputType: formata
          schema:
            type: object
            required:
              - Approval
            title: Approve shipment
            properties:
              Approval:
                type: string
                title: Approval

departments:
  - id: dep1
    name: Company 1
    color: "#d7e9f2"
    border: "#6e99b2"
  - id: dep2
    name: Department 2
    color: "#e0f1d9"
    border: "#7da36c"
  - id: dep3
    name: Department 3
    color: "#f5e3c9"
    border: "#c2945a"

users:
  - id: u4
    name: User 4
    departmentId: dep1
  - id: u5
    name: User 5
    departmentId: dep2
  - id: u6
    name: User 6
    departmentId: dep3

dpp:
  enabled: true
  gtin: "09506000134352"
  lotInputKey: shipmentRef
  lotDefault: ""
  serialInputKey: ""
  serialStrategy: process_id_hex
  productName: Gallium shipment audit
  productDescription: Shipment intake, inspection, and approval with traceable checkpoints.
  ownerName: Attesta Demo Operator
