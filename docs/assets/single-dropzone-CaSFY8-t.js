var Na=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),ka=t=>{throw TypeError(t)};var ot=(t,e,r)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&ka("Object expected");var n,i;r&&(n=e[Na("asyncDispose")]),n===void 0&&(n=e[Na("dispose")],r&&(i=n)),typeof n!="function"&&ka("Object not disposable"),i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.push([r,n,e])}else r&&t.push([r]);return e},pt=(t,e,r)=>{var n=typeof SuppressedError=="function"?SuppressedError:function(s,a,l,d){return d=Error(l),d.name="SuppressedError",d.error=s,d.suppressed=a,d},i=s=>e=r?new n(s,e,"An error was suppressed during disposal"):(r=!0,s),o=s=>{for(;s=t.pop();)try{var a=s[1]&&s[1].call(s[2]);if(s[0])return Promise.resolve(a).then(o,l=>(i(l),o()))}catch(l){i(l)}if(r)throw e};return o()};import{p as D,v as q,an as le,C as pe,aC as Oc,c as L,A as Ge,r as F,L as Pl,b as w,d as j,f as R,k as f,F as O,aD as Ec,aE as Pc,N as I,z as be,_ as K,a1 as ae,aq as Se,aF as Nc,aG as kc,aH as Tc,a2 as Ye,aI as ds,aJ as Mc,aK as Vt,aL as Ac,aM as In,aN as Ic,aO as Rc,J as Fi,y as X,h as C,E as Ut,H as Rn,aP as us,aQ as cs,a as Z,aR as Ar,aS as Nl,aT as kl,at as fs,aU as ps,aV as qi,aW as Ta,aX as Wc,aY as Cc,aZ as Tl,a_ as Dc,a$ as jc,b0 as Fc,b1 as qc,b2 as Lc,b3 as zc,b4 as hs,b5 as Ml,b6 as Vc,b7 as Al,b8 as Li,b9 as Ma,ba as Il,bb as Uc,bc as Rl,bd as Wl,Y as wr,be as Oo,bf as Bc,bg as Hc,a6 as $c,ak as Gc,bh as Wn,ab as ao,l as V,bi as Yc,ac as Ir,ah as lo,bj as Xc,i as se,V as Jc,ag as Rr,Z as zi,$ as Wr,a0 as Cr,K as Vi,bk as Kc,B as Me,n as ge,t as Cl,bl as Dl,ay as jl,az as Fl,aA as ql,aB as Ll,ax as or,P as gs,bm as Qc,bn as Zc,bo as ef,bp as tf,bq as rf,br as nf,bs as of,bt as sf,bu as af,bv as lf,bw as df,bx as uf,by as cf,bz as ff,bA as pf,bB as hf,bC as gf,bD as vf,bE as Aa,bF as Ia,bG as Ra,bH as Wa,bI as Ca,bJ as mf}from"./index-ANHP6HW6.js";import{D as zl,b as yf,i as Eo,e as Vl,g as bf,h as uo,j as Da,k as _f,l as wf,m as xf,n as Sf,o as Of,T as Ef}from"./form.svelte-BRoIMTSU.js";import{a as Pf}from"./shiki-XoKlsueI.js";var Nf=R("<form><!></form>");function kf(t,e){D(e,!0);let r=q(e,"ref",15);const n=le();var i=Nf();pe(i,s=>({onsubmit:n.submit,onreset:n.reset,...s}),[()=>Oc(n,e.config,"form",e.attributes,{class:"sjsf-form"})]);var o=L(i);Ge(o,()=>e.children),F(i),Pl(i,s=>r(s),()=>r()),w(t,i),j()}var Tf=R("<div><!></div>");function Mf(t,e){D(e,!0);const r=le(),n=O(()=>Ec(r,e.config,"layout","layouts",e.type,{class:"sjsf-layout"}));var i=Tf();pe(i,()=>({...f(n)}));var o=L(i);Ge(o,()=>e.children),F(i),w(t,i),j()}var Af=R("<legend> <!></legend>");function If(t,e){D(e,!0);const r=le();var n=Af();pe(n,a=>({...a}),[()=>Pc(r,e.config,"titleAttributes",{class:"sjsf-title","data-template":e.templateType})]);var i=L(n),o=I(i);{var s=a=>{var l=Se("*");w(a,l)};be(o,a=>{e.config.required&&e.templateType==="fieldTemplate"&&a(s)})}F(n),K(()=>ae(i,`${e.title??""} `)),w(t,n),j()}var Rf=R("<div> </div>");function Wf(t,e){D(e,!0);const r=le();var n=Rf();pe(n,o=>({...o}),[()=>Nc(r,e.config,"descriptionAttributes",{class:"sjsf-description"})]);var i=L(n,!0);F(n),K(()=>ae(i,e.description)),w(t,n),j()}var Cf=R("<div> </div>");function Df(t,e){D(e,!0);const r=le();var n=Cf();pe(n,o=>({...o}),[()=>kc(r,e.config,"helpAttributes",{class:"sjsf-help"})]);var i=L(n,!0);F(n),K(()=>ae(i,e.help)),w(t,n),j()}var jf=R("<li> </li>"),Ff=R("<ul></ul>");function qf(t,e){D(e,!0);const r=le();var n=Ff();pe(n,i=>({...i}),[()=>Tc(r,e.config,"errorsList",{class:"sjsf-errors-list"})]),Ye(n,21,()=>e.errors,ds,(i,o)=>{var s=jf(),a=L(s,!0);F(s),K(()=>ae(a,f(o))),w(i,s)}),F(n),w(t,n),j()}var Lf=R("<input/>");function zf(t,e){D(e,!0);let r=q(e,"value",15);const n=le(),i=O(()=>Vt(n,e.config,"file",e.handlers,{multiple:e.multiple,class:"sjsf-file","data-loading":e.loading,"data-processing":e.processing}));var o=Lf();pe(o,()=>({type:"file",...f(i)}),void 0,void 0,void 0,void 0,!0),Mc(o,r),w(t,o),j()}var Vf=R("<textarea></textarea>");function Uf(t,e){D(e,!0);let r=q(e,"value",15);const n=le(),i=O(()=>Ic(n,e.config,"textarea",e.handlers,{class:"sjsf-textarea"}));var o=Vf();Ac(o),pe(o,()=>({...f(i)})),In(o,r),w(t,o),j()}function Ul(t,e){D(e,!0);let r=Rn(e,["$$slots","$$events","$$legacy"]);const n=[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]];Rc(t,Fi({name:"grip-vertical"},()=>r,{get iconNode(){return n},children:(i,o)=>{var s=X(),a=C(s);Ge(a,()=>e.children??Ut),w(i,s)},$$slots:{default:!0}})),j()}var Bf=Symbol.for("preact-signals");function Ui(){if(zt>1)zt--;else{for(var t,e=!1;mn!==void 0;){var r=mn;for(mn=void 0,Po++;r!==void 0;){var n=r.o;if(r.o=void 0,r.f&=-3,!(8&r.f)&&Hl(r))try{r.c()}catch(i){e||(t=i,e=!0)}r=n}}if(Po=0,zt--,e)throw t}}function Dr(t){if(zt>0)return t();zt++;try{return t()}finally{Ui()}}var Q=void 0;function ne(t){var e=Q;Q=void 0;try{return t()}finally{Q=e}}var mn=void 0,zt=0,Po=0,mi=0;function Bl(t){if(Q!==void 0){var e=t.n;if(e===void 0||e.t!==Q)return e={i:0,S:t,p:Q.s,n:void 0,t:Q,e:void 0,x:void 0,r:e},Q.s!==void 0&&(Q.s.n=e),Q.s=e,t.n=e,32&Q.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=Q.s,e.n=void 0,Q.s.n=e,Q.s=e),e}}function De(t,e){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=e?.watched,this.Z=e?.unwatched,this.name=e?.name}De.prototype.brand=Bf;De.prototype.h=function(){return!0};De.prototype.S=function(t){var e=this,r=this.t;r!==t&&t.e===void 0&&(t.x=r,this.t=t,r!==void 0?r.e=t:ne(function(){var n;(n=e.W)==null||n.call(e)}))};De.prototype.U=function(t){var e=this;if(this.t!==void 0){var r=t.e,n=t.x;r!==void 0&&(r.x=n,t.e=void 0),n!==void 0&&(n.e=r,t.x=void 0),t===this.t&&(this.t=n,n===void 0&&ne(function(){var i;(i=e.Z)==null||i.call(e)}))}};De.prototype.subscribe=function(t){var e=this;return at(function(){var r=e.value,n=Q;Q=void 0;try{t(r)}finally{Q=n}},{name:"sub"})};De.prototype.valueOf=function(){return this.value};De.prototype.toString=function(){return this.value+""};De.prototype.toJSON=function(){return this.value};De.prototype.peek=function(){var t=Q;Q=void 0;try{return this.value}finally{Q=t}};Object.defineProperty(De.prototype,"value",{get:function(){var t=Bl(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(Po>100)throw new Error("Cycle detected");this.v=t,this.i++,mi++,zt++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{Ui()}}}});function Cn(t,e){return new De(t,e)}function Hl(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function $l(t){for(var e=t.s;e!==void 0;e=e.n){var r=e.S.n;if(r!==void 0&&(e.r=r),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function Gl(t){for(var e=t.s,r=void 0;e!==void 0;){var n=e.p;e.i===-1?(e.S.U(e),n!==void 0&&(n.n=e.n),e.n!==void 0&&(e.n.p=n)):r=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=n}t.s=r}function lr(t,e){De.call(this,void 0),this.x=t,this.s=void 0,this.g=mi-1,this.f=4,this.W=e?.watched,this.Z=e?.unwatched,this.name=e?.name}lr.prototype=new De;lr.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===mi))return!0;if(this.g=mi,this.f|=1,this.i>0&&!Hl(this))return this.f&=-2,!0;var t=Q;try{$l(this),Q=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(r){this.v=r,this.f|=16,this.i++}return Q=t,Gl(this),this.f&=-2,!0};lr.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}De.prototype.S.call(this,t)};lr.prototype.U=function(t){if(this.t!==void 0&&(De.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};lr.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(lr.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=Bl(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function ja(t,e){return new lr(t,e)}function Yl(t){var e=t.u;if(t.u=void 0,typeof e=="function"){zt++;var r=Q;Q=void 0;try{e()}catch(n){throw t.f&=-2,t.f|=8,vs(t),n}finally{Q=r,Ui()}}}function vs(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,Yl(t)}function Hf(t){if(Q!==this)throw new Error("Out-of-order effect");Gl(this),Q=t,this.f&=-2,8&this.f&&vs(this),Ui()}function Vr(t,e){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=e?.name}Vr.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};Vr.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Yl(this),$l(this),zt++;var t=Q;return Q=this,Hf.bind(this,t)};Vr.prototype.N=function(){2&this.f||(this.f|=2,this.o=mn,mn=this)};Vr.prototype.d=function(){this.f|=8,1&this.f||vs(this)};Vr.prototype.dispose=function(){this.d()};function at(t,e){var r=new Vr(t,e);try{r.c()}catch(i){throw r.d(),i}var n=r.d.bind(r);return n[Symbol.dispose]=n,n}var $f=Object.create,ms=Object.defineProperty,Gf=Object.defineProperties,Yf=Object.getOwnPropertyDescriptor,Xf=Object.getOwnPropertyDescriptors,Fa=Object.getOwnPropertySymbols,Jf=Object.prototype.hasOwnProperty,Kf=Object.prototype.propertyIsEnumerable,Qf=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Ur=t=>{throw TypeError(t)},No=(t,e,r)=>e in t?ms(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Zf=(t,e)=>{for(var r in e||(e={}))Jf.call(e,r)&&No(t,r,e[r]);if(Fa)for(var r of Fa(e))Kf.call(e,r)&&No(t,r,e[r]);return t},ep=(t,e)=>Gf(t,Xf(e)),qa=(t,e)=>ms(t,"name",{value:e,configurable:!0}),tp=t=>{var e;return[,,,$f((e=void 0)!=null?e:null)]},Xl=["class","method","getter","setter","accessor","field","value","get","set"],sn=t=>t!==void 0&&typeof t!="function"?Ur("Function expected"):t,rp=(t,e,r,n,i)=>({kind:Xl[t],name:e,metadata:n,addInitializer:o=>r._?Ur("Already initialized"):i.push(sn(o||null))}),Jl=(t,e)=>No(e,Qf("metadata"),t[3]),Gt=(t,e,r,n)=>{for(var i=0,o=t[e>>1],s=o&&o.length;i<s;i++)e&1?o[i].call(r):n=o[i].call(r,n);return n},Br=(t,e,r,n,i,o)=>{var s,a,l,d,c,u=e&7,g=!!(e&8),h=!!(e&16),v=u>3?t.length+1:u?g?1:2:0,m=Xl[u+5],x=u>3&&(t[v-1]=[]),E=t[v]||(t[v]=[]),_=u&&(!h&&!g&&(i=i.prototype),u<5&&(u>3||!h)&&Yf(u<4?i:{get[r](){return nr(this,o)},set[r](y){return jt(this,o,y)}},r));u?h&&u<4&&qa(o,(u>2?"set ":u>1?"get ":"")+r):qa(i,r);for(var P=n.length-1;P>=0;P--)d=rp(u,r,l={},t[3],E),u&&(d.static=g,d.private=h,c=d.access={has:h?y=>np(i,y):y=>r in y},u^3&&(c.get=h?y=>(u^1?nr:ip)(y,i,u^4?o:_.get):y=>y[r]),u>2&&(c.set=h?(y,b)=>jt(y,i,b,u^4?o:_.set):(y,b)=>y[r]=b)),a=(0,n[P])(u?u<4?h?o:_[m]:u>4?void 0:{get:_.get,set:_.set}:i,d),l._=1,u^4||a===void 0?sn(a)&&(u>4?x.unshift(a):u?h?o=a:_[m]=a:i=a):typeof a!="object"||a===null?Ur("Object expected"):(sn(s=a.get)&&(_.get=s),sn(s=a.set)&&(_.set=s),sn(s=a.init)&&x.unshift(s));return u||Jl(t,i),_&&ms(i,r,_),h?u^4?o:_:i},ys=(t,e,r)=>e.has(t)||Ur("Cannot "+r),np=(t,e)=>Object(e)!==e?Ur('Cannot use the "in" operator on this value'):t.has(e),nr=(t,e,r)=>(ys(t,e,"read from private field"),r?r.call(t):e.get(t)),Jn=(t,e,r)=>e.has(t)?Ur("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),jt=(t,e,r,n)=>(ys(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),ip=(t,e,r)=>(ys(t,e,"access private method"),r);function yi(t,e){if(e){let r;return ja(()=>{const n=t();return n&&r&&e(r,n)?r:(r=n,n)})}return ja(t)}function ko(t,e){if(Object.is(t,e))return!0;if(t===null||e===null)return!1;if(typeof t=="function"&&typeof e=="function")return t===e;if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}if(Array.isArray(t))return!Array.isArray(e)||t.length!==e.length?!1:!t.some((n,i)=>!ko(n,e[i]));if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),n=Object.keys(e);return r.length!==n.length?!1:!r.some(o=>!ko(t[o],e[o]))}return!1}function J({get:t},e){return{init(r){return Cn(r)},get(){return t.call(this).value},set(r){const n=t.call(this);n.peek()!==r&&(n.value=r)}}}function ye(t,e){const r=new WeakMap;return function(){let n=r.get(this);return n||(n=yi(t.bind(this)),r.set(this,n)),n.value}}function co(t=!0){return function(e,r){r.addInitializer(function(){const n=r.kind==="field"?this:r.static?this:Object.getPrototypeOf(this),i=Object.getOwnPropertyDescriptor(n,r.name);i&&Object.defineProperty(n,r.name,ep(Zf({},i),{enumerable:t}))})}}function Dn(...t){const e=t.map(r=>at(r));return()=>e.forEach(r=>r())}var Kl,Ql,Zl,ed,td,rd,Re,bs,fo,To,Mo,Pe,_s,po,nd,Ao,ws,ho,Io,Ro;rd=[J],td=[J],ed=[J],Zl=[co()],Ql=[co()],Kl=[co()];var Hr=class{constructor(t,e=Object.is){this.defaultValue=t,this.equals=e,Gt(Re,5,this),Jn(this,Pe),Jn(this,bs,Gt(Re,8,this)),Gt(Re,11,this),Jn(this,_s,Gt(Re,12,this)),Gt(Re,15,this),Jn(this,ws,Gt(Re,16,this)),Gt(Re,19,this),this.reset=this.reset.bind(this),this.reset()}get current(){return nr(this,Pe,Io)}get initial(){return nr(this,Pe,To)}get previous(){return nr(this,Pe,nd)}set current(t){const e=ne(()=>nr(this,Pe,Io));t&&e&&this.equals(e,t)||Dr(()=>{nr(this,Pe,To)||jt(this,Pe,t,Mo),jt(this,Pe,e,Ao),jt(this,Pe,t,Ro)})}reset(t=this.defaultValue){Dr(()=>{jt(this,Pe,void 0,Ao),jt(this,Pe,t,Mo),jt(this,Pe,t,Ro)})}};Re=tp();bs=new WeakMap;Pe=new WeakSet;_s=new WeakMap;ws=new WeakMap;fo=Br(Re,20,"#initial",rd,Pe,bs),To=fo.get,Mo=fo.set;po=Br(Re,20,"#previous",td,Pe,_s),nd=po.get,Ao=po.set;ho=Br(Re,20,"#current",ed,Pe,ws),Io=ho.get,Ro=ho.set;Br(Re,2,"current",Zl,Hr);Br(Re,2,"initial",Ql,Hr);Br(Re,2,"previous",Kl,Hr);Jl(Re,Hr);function go(t){return ne(()=>{const e={};for(const r in t)e[r]=t[r];return e})}var op=Object.create,id=Object.defineProperty,sp=Object.getOwnPropertyDescriptor,La=Object.getOwnPropertySymbols,ap=Object.prototype.hasOwnProperty,lp=Object.prototype.propertyIsEnumerable,od=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Bi=t=>{throw TypeError(t)},za=Math.pow,Wo=(t,e,r)=>e in t?id(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,dp=(t,e)=>{for(var r in e||(e={}))ap.call(e,r)&&Wo(t,r,e[r]);if(La)for(var r of La(e))lp.call(e,r)&&Wo(t,r,e[r]);return t},up=t=>{var e;return[,,,op((e=t?.[od("metadata")])!=null?e:null)]},sd=["class","method","getter","setter","accessor","field","value","get","set"],ad=t=>t!==void 0&&typeof t!="function"?Bi("Function expected"):t,cp=(t,e,r,n,i)=>({kind:sd[t],name:e,metadata:n,addInitializer:o=>r._?Bi("Already initialized"):i.push(ad(o||null))}),fp=(t,e)=>Wo(e,od("metadata"),t[3]),pp=(t,e,r,n)=>{for(var i=0,o=t[e>>1],s=o&&o.length;i<s;i++)o[i].call(r);return n},ld=(t,e,r,n,i,o)=>{for(var s,a,l,d,c=e&7,u=!1,g=!1,h=2,v=sd[c+5],m=t[h]||(t[h]=[]),x=(i=i.prototype,sp(i,r)),E=n.length-1;E>=0;E--)l=cp(c,r,a={},t[3],m),l.static=u,l.private=g,d=l.access={has:_=>r in _},d.get=_=>_[r],s=(0,n[E])(x[v],l),a._=1,ad(s)&&(x[v]=s);return x&&id(i,r,x),i},dd=(t,e,r)=>e.has(t)||Bi("Cannot "+r),hp=(t,e,r)=>(dd(t,e,"read from private field"),e.get(t)),gp=(t,e,r)=>e.has(t)?Bi("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),vp=(t,e,r,n)=>(dd(t,e,"write to private field"),e.set(t,r),r),mt=class Co{constructor(e,r){this.x=e,this.y=r}static delta(e,r){return new Co(e.x-r.x,e.y-r.y)}static distance(e,r){return Math.hypot(e.x-r.x,e.y-r.y)}static equals(e,r){return e.x===r.x&&e.y===r.y}static from({x:e,y:r}){return new Co(e,r)}},jn=class Jt{constructor(e,r,n,i){this.left=e,this.top=r,this.width=n,this.height=i,this.scale={x:1,y:1}}get inverseScale(){return{x:1/this.scale.x,y:1/this.scale.y}}translate(e,r){const{top:n,left:i,width:o,height:s,scale:a}=this,l=new Jt(i+e,n+r,o,s);return l.scale=dp({},a),l}get boundingRectangle(){const{width:e,height:r,left:n,top:i,right:o,bottom:s}=this;return{width:e,height:r,left:n,top:i,right:o,bottom:s}}get center(){const{left:e,top:r,right:n,bottom:i}=this;return new mt((e+n)/2,(r+i)/2)}get area(){const{width:e,height:r}=this;return e*r}equals(e){if(!(e instanceof Jt))return!1;const{left:r,top:n,width:i,height:o}=this;return r===e.left&&n===e.top&&i===e.width&&o===e.height}containsPoint(e){const{top:r,left:n,bottom:i,right:o}=this;return r<=e.y&&e.y<=i&&n<=e.x&&e.x<=o}intersectionArea(e){return e instanceof Jt?mp(this,e):0}intersectionRatio(e){const{area:r}=this,n=this.intersectionArea(e);return n/(e.area+r-n)}get bottom(){const{top:e,height:r}=this;return e+r}get right(){const{left:e,width:r}=this;return e+r}get aspectRatio(){const{width:e,height:r}=this;return e/r}get corners(){return[{x:this.left,y:this.top},{x:this.right,y:this.top},{x:this.left,y:this.bottom},{x:this.right,y:this.bottom}]}static from({top:e,left:r,width:n,height:i}){return new Jt(r,e,n,i)}static delta(e,r,n={x:"center",y:"center"}){const i=(o,s)=>{const a=n[s],l=s==="x"?o.left:o.top,d=s==="x"?o.width:o.height;return a=="start"?l:a=="end"?l+d:l+d/2};return mt.delta({x:i(e,"x"),y:i(e,"y")},{x:i(r,"x"),y:i(r,"y")})}static intersectionRatio(e,r){return Jt.from(e).intersectionRatio(Jt.from(r))}};function mp(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),s=i-n,a=o-r;return n<i&&r<o?s*a:0}var ud,cd,Do,si,Fn,Hi=class extends(Do=Hr,cd=[ye],ud=[ye],Do){constructor(t){const e=mt.from(t);super(e,(r,n)=>mt.equals(r,n)),pp(Fn,5,this),gp(this,si,0),this.velocity={x:0,y:0}}get delta(){return mt.delta(this.current,this.initial)}get direction(){const{current:t,previous:e}=this;if(!e)return null;const r={x:t.x-e.x,y:t.y-e.y};return!r.x&&!r.y?null:Math.abs(r.x)>Math.abs(r.y)?r.x>0?"right":"left":r.y>0?"down":"up"}get current(){return super.current}set current(t){const{current:e}=this,r=mt.from(t),n={x:r.x-e.x,y:r.y-e.y},i=Date.now(),o=i-hp(this,si),s=a=>Math.round(a/o*100);Dr(()=>{vp(this,si,i),this.velocity={x:s(n.x),y:s(n.y)},super.current=r})}reset(t=this.defaultValue){super.reset(mt.from(t)),this.velocity={x:0,y:0}}};Fn=up(Do);si=new WeakMap;ld(Fn,2,"delta",cd,Hi);ld(Fn,2,"direction",ud,Hi);fp(Fn,Hi);function jo({x:t,y:e},r){const n=Math.abs(t),i=Math.abs(e);return typeof r=="number"?Math.sqrt(za(n,2)+za(i,2))>r:"x"in r&&"y"in r?n>r.x&&i>r.y:"x"in r?n>r.x:"y"in r?i>r.y:!1}var fd=(t=>(t.Horizontal="x",t.Vertical="y",t))(fd||{}),pd=Object.values(fd),yp=Object.create,xs=Object.defineProperty,bp=Object.defineProperties,_p=Object.getOwnPropertyDescriptor,wp=Object.getOwnPropertyDescriptors,bi=Object.getOwnPropertySymbols,hd=Object.prototype.hasOwnProperty,gd=Object.prototype.propertyIsEnumerable,vd=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),$r=t=>{throw TypeError(t)},Fo=(t,e,r)=>e in t?xs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,md=(t,e)=>{for(var r in e||(e={}))hd.call(e,r)&&Fo(t,r,e[r]);if(bi)for(var r of bi(e))gd.call(e,r)&&Fo(t,r,e[r]);return t},yd=(t,e)=>bp(t,wp(e)),Va=(t,e)=>xs(t,"name",{value:e,configurable:!0}),bd=(t,e)=>{var r={};for(var n in t)hd.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&bi)for(var n of bi(t))e.indexOf(n)<0&&gd.call(t,n)&&(r[n]=t[n]);return r},Gr=t=>{var e;return[,,,yp((e=t?.[vd("metadata")])!=null?e:null)]},_d=["class","method","getter","setter","accessor","field","value","get","set"],an=t=>t!==void 0&&typeof t!="function"?$r("Function expected"):t,xp=(t,e,r,n,i)=>({kind:_d[t],name:e,metadata:n,addInitializer:o=>r._?$r("Already initialized"):i.push(an(o||null))}),dr=(t,e)=>Fo(e,vd("metadata"),t[3]),U=(t,e,r,n)=>{for(var i=0,o=t[e>>1],s=o&&o.length;i<s;i++)e&1?o[i].call(r):n=o[i].call(r,n);return n},Y=(t,e,r,n,i,o)=>{var s,a,l,d,c,u=e&7,g=!!(e&8),h=!!(e&16),v=u>3?t.length+1:u?g?1:2:0,m=_d[u+5],x=u>3&&(t[v-1]=[]),E=t[v]||(t[v]=[]),_=u&&(!h&&!g&&(i=i.prototype),u<5&&(u>3||!h)&&_p(u<4?i:{get[r](){return we(this,o)},set[r](y){return et(this,o,y)}},r));u?h&&u<4&&Va(o,(u>2?"set ":u>1?"get ":"")+r):Va(i,r);for(var P=n.length-1;P>=0;P--)d=xp(u,r,l={},t[3],E),u&&(d.static=g,d.private=h,c=d.access={has:h?y=>Sp(i,y):y=>r in y},u^3&&(c.get=h?y=>(u^1?we:Op)(y,i,u^4?o:_.get):y=>y[r]),u>2&&(c.set=h?(y,b)=>et(y,i,b,u^4?o:_.set):(y,b)=>y[r]=b)),a=(0,n[P])(u?u<4?h?o:_[m]:u>4?void 0:{get:_.get,set:_.set}:i,d),l._=1,u^4||a===void 0?an(a)&&(u>4?x.unshift(a):u?h?o=a:_[m]=a:i=a):typeof a!="object"||a===null?$r("Object expected"):(an(s=a.get)&&(_.get=s),an(s=a.set)&&(_.set=s),an(s=a.init)&&x.unshift(s));return u||dr(t,i),_&&xs(i,r,_),h?u^4?o:_:i},Ss=(t,e,r)=>e.has(t)||$r("Cannot "+r),Sp=(t,e)=>Object(e)!==e?$r('Cannot use the "in" operator on this value'):t.has(e),we=(t,e,r)=>(Ss(t,e,"read from private field"),r?r.call(t):e.get(t)),ee=(t,e,r)=>e.has(t)?$r("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),et=(t,e,r,n)=>(Ss(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Op=(t,e,r)=>(Ss(t,e,"access private method"),r);function wd(t,e){return{plugin:t,options:e}}function Os(t){return e=>wd(t,e)}function Es(t){return typeof t=="function"?{plugin:t,options:void 0}:t}var xd,Sn,Ps,ai;xd=[J];var ze=class{constructor(t,e){this.manager=t,this.options=e,ee(this,Ps,U(Sn,8,this,!1)),U(Sn,11,this),ee(this,ai,new Set)}enable(){this.disabled=!1}disable(){this.disabled=!0}isDisabled(){return ne(()=>this.disabled)}configure(t){this.options=t}registerEffect(t){const e=at(t.bind(this));return we(this,ai).add(e),e}destroy(){we(this,ai).forEach(t=>t())}static configure(t){return wd(this,t)}};Sn=Gr(null);Ps=new WeakMap;ai=new WeakMap;Y(Sn,4,"disabled",xd,ze,Ps);dr(Sn,ze);var qn=class extends ze{},li,vo=class{constructor(t){this.manager=t,this.instances=new Map,ee(this,li,[])}get values(){return Array.from(this.instances.values())}set values(t){const e=t.map(Es).reduceRight((n,i)=>n.some(({plugin:o})=>o===i.plugin)?n:[i,...n],[]),r=e.map(({plugin:n})=>n);for(const n of we(this,li))if(!r.includes(n)){if(n.prototype instanceof qn)continue;this.unregister(n)}for(const{plugin:n,options:i}of e)this.register(n,i);et(this,li,r)}get(t){return this.instances.get(t)}register(t,e){const r=this.instances.get(t);if(r)return r.options!==e&&(r.options=e),r;const n=new t(this.manager,e);return this.instances.set(t,n),n}unregister(t){const e=this.instances.get(t);e&&(e.destroy(),this.instances.delete(t))}destroy(){for(const t of this.instances.values())t.destroy();this.instances.clear()}};li=new WeakMap;function Ep(t,e){return t.priority===e.priority?t.type===e.type?e.value-t.value:e.type-t.type:e.priority-t.priority}var Kn=[],Or,Er,Pp=class extends ze{constructor(t){super(t),ee(this,Or),ee(this,Er),this.computeCollisions=this.computeCollisions.bind(this),et(this,Er,Cn(Kn)),this.destroy=Dn(()=>{const e=this.computeCollisions(),r=ne(()=>this.manager.dragOperation.position.current);if(e!==Kn){const n=we(this,Or);if(et(this,Or,r),n&&r.x==n.x&&r.y==n.y)return}else et(this,Or,void 0);we(this,Er).value=e},()=>{const{dragOperation:e}=this.manager;e.status.initialized&&this.forceUpdate()})}forceUpdate(t=!0){ne(()=>{t?we(this,Er).value=this.computeCollisions():et(this,Or,void 0)})}computeCollisions(t,e){const{registry:r,dragOperation:n}=this.manager,{source:i,shape:o,status:s}=n;if(!s.initialized||!o)return Kn;const a=[],l=[];for(const d of t??r.droppables){if(d.disabled||i&&!d.accepts(i))continue;const c=e??d.collisionDetector;if(!c)continue;l.push(d),d.shape;const u=ne(()=>c({droppable:d,dragOperation:n}));u&&(d.collisionPriority!=null&&(u.priority=d.collisionPriority),a.push(u))}return l.length===0?Kn:(a.sort(Ep),a)}get collisions(){return we(this,Er).value}};Or=new WeakMap;Er=new WeakMap;var Np=class{constructor(){this.registry=new Map}addEventListener(t,e){const{registry:r}=this,n=new Set(r.get(t));return n.add(e),r.set(t,n),()=>this.removeEventListener(t,e)}removeEventListener(t,e){const{registry:r}=this,n=new Set(r.get(t));n.delete(e),r.set(t,n)}dispatch(t,...e){const{registry:r}=this,n=r.get(t);if(n)for(const i of n)i(...e)}},kp=class extends Np{constructor(t){super(),this.manager=t}dispatch(t,e){const r=[e,this.manager];super.dispatch(t,...r)}};function di(t,e=!0){let r=!1;return yd(md({},t),{cancelable:e,get defaultPrevented(){return r},preventDefault(){e&&(r=!0)}})}var Tp=class extends qn{constructor(t){super(t);const e=(n,i)=>n.map(({id:o})=>o).join("")===i.map(({id:o})=>o).join("");let r=[];this.destroy=Dn(()=>{const{dragOperation:n,collisionObserver:i}=t;n.status.initializing&&(r=[],i.enable())},()=>{const{collisionObserver:n,monitor:i}=t,{collisions:o}=n;if(n.isDisabled())return;const s=di({collisions:o});if(i.dispatch("collision",s),s.defaultPrevented||e(o,r))return;r=o;const[a]=o;ne(()=>{var l;a?.id!==((l=t.dragOperation.target)==null?void 0:l.id)&&(n.disable(),t.actions.setDropTarget(a?.id).then(()=>{n.enable()}))})})}},Ns=(t=>(t[t.Lowest=0]="Lowest",t[t.Low=1]="Low",t[t.Normal=2]="Normal",t[t.High=3]="High",t[t.Highest=4]="Highest",t))(Ns||{}),ks=(t=>(t[t.Collision=0]="Collision",t[t.ShapeIntersection=1]="ShapeIntersection",t[t.PointerIntersection=2]="PointerIntersection",t))(ks||{}),Sd,Od,Ed,Pd,Nd,kd,Td,rt,Ts;Td=[J],kd=[ye],Nd=[ye],Pd=[ye],Ed=[ye],Od=[ye],Sd=[ye];var Mt=class{constructor(){U(rt,5,this),ee(this,Ts,U(rt,8,this,"idle")),U(rt,11,this)}get current(){return this.value}get idle(){return this.value==="idle"}get initializing(){return this.value==="initializing"}get initialized(){const{value:t}=this;return t!=="idle"&&t!=="initialization-pending"}get dragging(){return this.value==="dragging"}get dropped(){return this.value==="dropped"}set(t){this.value=t}};rt=Gr(null);Ts=new WeakMap;Y(rt,4,"value",Td,Mt,Ts);Y(rt,2,"current",kd,Mt);Y(rt,2,"idle",Nd,Mt);Y(rt,2,"initializing",Pd,Mt);Y(rt,2,"initialized",Ed,Mt);Y(rt,2,"dragging",Od,Mt);Y(rt,2,"dropped",Sd,Mt);dr(rt,Mt);var Mp=class{constructor(t){this.manager=t}setDragSource(t){const{dragOperation:e}=this.manager;e.sourceIdentifier=typeof t=="string"||typeof t=="number"?t:t.id}setDropTarget(t){return ne(()=>{const{dragOperation:e}=this.manager,r=t??null;if(e.targetIdentifier===r)return Promise.resolve(!1);e.targetIdentifier=r;const n=di({operation:e.snapshot()});return e.status.dragging&&this.manager.monitor.dispatch("dragover",n),this.manager.renderer.rendering.then(()=>n.defaultPrevented)})}start(t){return ne(()=>{const{dragOperation:e}=this.manager;if(t.source!=null&&this.setDragSource(t.source),!e.source)throw new Error("Cannot start a drag operation without a drag source");if(!e.status.idle)throw new Error("Cannot start a drag operation while another is active");const n=new AbortController,{event:i,coordinates:o}=t;Dr(()=>{e.status.set("initialization-pending"),e.shape=null,e.canceled=!1,e.activatorEvent=i??null,e.position.reset(o)});const s=di({operation:e.snapshot()});return this.manager.monitor.dispatch("beforedragstart",s),s.defaultPrevented?(e.reset(),n.abort(),n):(e.status.set("initializing"),e.controller=n,this.manager.renderer.rendering.then(()=>{if(n.signal.aborted)return;const{status:a}=e;a.current==="initializing"&&(e.status.set("dragging"),this.manager.monitor.dispatch("dragstart",{nativeEvent:i,operation:e.snapshot(),cancelable:!1}))}),n)})}move(t){return ne(()=>{var e,r;const{dragOperation:n}=this.manager,{status:i,controller:o}=n;if(!i.dragging||!o||o.signal.aborted)return;const s=di({nativeEvent:t.event,operation:n.snapshot(),by:t.by,to:t.to},(e=t.cancelable)!=null?e:!0);((r=t.propagate)==null||r)&&this.manager.monitor.dispatch("dragmove",s),queueMicrotask(()=>{var a,l,d,c,u;if(s.defaultPrevented)return;const g=(u=t.to)!=null?u:{x:n.position.current.x+((l=(a=t.by)==null?void 0:a.x)!=null?l:0),y:n.position.current.y+((c=(d=t.by)==null?void 0:d.y)!=null?c:0)};n.position.current=g})})}stop(t={}){return ne(()=>{var e,r;const{dragOperation:n}=this.manager,{controller:i}=n;if(!i||i.signal.aborted)return;let o;const s=()=>{const l={resume:()=>{},abort:()=>{}};return o=new Promise((d,c)=>{l.resume=d,l.abort=c}),l};i.abort();const a=()=>{this.manager.renderer.rendering.then(()=>{n.status.set("dropped");const l=ne(()=>{var c;return((c=n.source)==null?void 0:c.status)==="dropping"}),d=()=>{n.controller===i&&(n.controller=void 0),n.reset()};if(l){const{source:c}=n,u=at(()=>{c?.status==="idle"&&(u(),d())})}else this.manager.renderer.rendering.then(d)})};n.canceled=(e=t.canceled)!=null?e:!1,this.manager.monitor.dispatch("dragend",{nativeEvent:t.event,operation:n.snapshot(),canceled:(r=t.canceled)!=null?r:!1,suspend:s}),o?o.then(a).catch(()=>n.reset()):a()})}},Md,Ad,Id,Rd,Le,Ms,As,Is,Rs;Rd=[J],Id=[J],Ad=[J],Md=[J];var Bt=class{constructor(t,e){ee(this,Ms,U(Le,8,this)),U(Le,11,this),ee(this,As,U(Le,12,this)),U(Le,15,this),ee(this,Is,U(Le,16,this)),U(Le,19,this),ee(this,Rs,U(Le,20,this)),U(Le,23,this);const{effects:r,id:n,data:i={},disabled:o=!1,register:s=!0}=t;let a=n;this.manager=e,this.id=n,this.data=i,this.disabled=o,this.effects=()=>{var l;return[()=>{const{id:d,manager:c}=this;if(d!==a)return c?.registry.register(this),()=>c?.registry.unregister(this)},...(l=r?.())!=null?l:[]]},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.destroy=this.destroy.bind(this),e&&s&&queueMicrotask(this.register)}register(){var t;return(t=this.manager)==null?void 0:t.registry.register(this)}unregister(){var t;(t=this.manager)==null||t.registry.unregister(this)}destroy(){var t;(t=this.manager)==null||t.registry.unregister(this)}};Le=Gr(null);Ms=new WeakMap;As=new WeakMap;Is=new WeakMap;Rs=new WeakMap;Y(Le,4,"manager",Rd,Bt,Ms);Y(Le,4,"id",Id,Bt,As);Y(Le,4,"data",Ad,Bt,Is);Y(Le,4,"disabled",Md,Bt,Rs);dr(Le,Bt);var Ua=class{constructor(){this.map=Cn(new Map),this.cleanupFunctions=new WeakMap,this.register=(t,e)=>{const r=this.map.peek(),n=r.get(t),i=()=>this.unregister(t,e);if(n===e)return i;if(n){const a=this.cleanupFunctions.get(n);a?.(),this.cleanupFunctions.delete(n)}const o=new Map(r);o.set(t,e),this.map.value=o;const s=Dn(...e.effects());return this.cleanupFunctions.set(e,s),i},this.unregister=(t,e)=>{const r=this.map.peek();if(r.get(t)!==e)return;const n=this.cleanupFunctions.get(e);n?.(),this.cleanupFunctions.delete(e);const i=new Map(r);i.delete(t),this.map.value=i}}[Symbol.iterator](){return this.map.peek().values()}get value(){return this.map.value.values()}has(t){return this.map.value.has(t)}get(t){return this.map.value.get(t)}destroy(){for(const t of this){const e=this.cleanupFunctions.get(t);e?.(),t.destroy()}this.map.value=new Map}},Wd,Cd,Dd,jd,Fd,qd,qo,We,Ws,Cs,Ds,_t=class extends(qo=Bt,qd=[J],Fd=[J],jd=[J],Dd=[ye],Cd=[ye],Wd=[ye],qo){constructor(e,r){var n=e,{modifiers:i,type:o,sensors:s}=n,a=bd(n,["modifiers","type","sensors"]);super(a,r),U(We,5,this),ee(this,Ws,U(We,8,this)),U(We,11,this),ee(this,Cs,U(We,12,this)),U(We,15,this),ee(this,Ds,U(We,16,this,this.isDragSource?"dragging":"idle")),U(We,19,this),this.type=o,this.sensors=s,this.modifiers=i,this.alignment=a.alignment}get isDropping(){return this.status==="dropping"&&this.isDragSource}get isDragging(){return this.status==="dragging"&&this.isDragSource}get isDragSource(){var e,r;return((r=(e=this.manager)==null?void 0:e.dragOperation.source)==null?void 0:r.id)===this.id}};We=Gr(qo);Ws=new WeakMap;Cs=new WeakMap;Ds=new WeakMap;Y(We,4,"type",qd,_t,Ws);Y(We,4,"modifiers",Fd,_t,Cs);Y(We,4,"status",jd,_t,Ds);Y(We,2,"isDropping",Dd,_t);Y(We,2,"isDragging",Cd,_t);Y(We,2,"isDragSource",Wd,_t);dr(We,_t);var Ld,zd,Vd,Ud,Bd,Hd,Lo,me,js,Fs,qs,Ls,zs,wt=class extends(Lo=Bt,Hd=[J],Bd=[J],Ud=[J],Vd=[J],zd=[J],Ld=[ye],Lo){constructor(e,r){var n=e,{accept:i,collisionDetector:o,collisionPriority:s,type:a}=n,l=bd(n,["accept","collisionDetector","collisionPriority","type"]);super(l,r),U(me,5,this),ee(this,js,U(me,8,this)),U(me,11,this),ee(this,Fs,U(me,12,this)),U(me,15,this),ee(this,qs,U(me,16,this)),U(me,19,this),ee(this,Ls,U(me,20,this)),U(me,23,this),ee(this,zs,U(me,24,this)),U(me,27,this),this.accept=i,this.collisionDetector=o,this.collisionPriority=s,this.type=a}accepts(e){const{accept:r}=this;return r?typeof r=="function"?r(e):e.type?Array.isArray(r)?r.includes(e.type):e.type===r:!1:!0}get isDropTarget(){var e,r;return((r=(e=this.manager)==null?void 0:e.dragOperation.target)==null?void 0:r.id)===this.id}};me=Gr(Lo);js=new WeakMap;Fs=new WeakMap;qs=new WeakMap;Ls=new WeakMap;zs=new WeakMap;Y(me,4,"accept",Hd,wt,js);Y(me,4,"type",Bd,wt,Fs);Y(me,4,"collisionDetector",Ud,wt,qs);Y(me,4,"collisionPriority",Vd,wt,Ls);Y(me,4,"shape",zd,wt,zs);Y(me,2,"isDropTarget",Ld,wt);dr(me,wt);var jr=class extends ze{constructor(t,e){super(t,e),this.manager=t,this.options=e}},Ap=class extends AbortController{constructor(t,e){super(),this.constraints=t,this.onActivate=e,this.activated=!1;for(const r of t??[])r.controller=this}onEvent(t){var e;if(!this.activated)if((e=this.constraints)!=null&&e.length)for(const r of this.constraints)r.onEvent(t);else this.activate(t)}activate(t){this.activated||(this.activated=!0,this.onActivate(t))}abort(t){this.activated=!1,super.abort(t)}},ui,$d=class{constructor(t){this.options=t,ee(this,ui)}set controller(t){et(this,ui,t),t.signal.addEventListener("abort",()=>this.abort())}activate(t){var e;(e=we(this,ui))==null||e.activate(t)}};ui=new WeakMap;var Ba=class extends ze{constructor(t,e){super(t,e),this.manager=t,this.options=e}apply(t){return t.transform}},Ip=class{constructor(t){this.draggables=new Ua,this.droppables=new Ua,this.plugins=new vo(t),this.sensors=new vo(t),this.modifiers=new vo(t)}register(t,e){if(t instanceof _t)return this.draggables.register(t.id,t);if(t instanceof wt)return this.droppables.register(t.id,t);if(t.prototype instanceof Ba)return this.modifiers.register(t,e);if(t.prototype instanceof jr)return this.sensors.register(t,e);if(t.prototype instanceof ze)return this.plugins.register(t,e);throw new Error("Invalid instance type")}unregister(t){if(t instanceof Bt)return t instanceof _t?this.draggables.unregister(t.id,t):t instanceof wt?this.droppables.unregister(t.id,t):()=>{};if(t.prototype instanceof Ba)return this.modifiers.unregister(t);if(t.prototype instanceof jr)return this.sensors.unregister(t);if(t.prototype instanceof ze)return this.plugins.unregister(t);throw new Error("Invalid instance type")}destroy(){this.draggables.destroy(),this.droppables.destroy(),this.plugins.destroy(),this.sensors.destroy(),this.modifiers.destroy()}},Gd,Yd,Xd,Jd,Kd,Qd,Zd,eu,tu,ln,ci,Pr,de,Vs,Us,Bs,Hs,$s,dn;tu=[ye],eu=[J],Zd=[J],Qd=[J],Kd=[J],Jd=[J],Xd=[ye],Yd=[ye],Gd=[ye];var lt=class{constructor(t){U(de,5,this),ee(this,ln),ee(this,ci),ee(this,Pr,new Hr(void 0,(e,r)=>e&&r?e.equals(r):e===r)),this.status=new Mt,ee(this,Vs,U(de,8,this,!1)),U(de,11,this),ee(this,Us,U(de,12,this,null)),U(de,15,this),ee(this,Bs,U(de,16,this,null)),U(de,19,this),ee(this,Hs,U(de,20,this,null)),U(de,23,this),ee(this,$s,U(de,24,this,[])),U(de,27,this),this.position=new Hi({x:0,y:0}),ee(this,dn,{x:0,y:0}),et(this,ln,t)}get shape(){const{current:t,initial:e,previous:r}=we(this,Pr);return!t||!e?null:{current:t,initial:e,previous:r}}set shape(t){t?we(this,Pr).current=t:we(this,Pr).reset()}get source(){var t;const e=this.sourceIdentifier;if(e==null)return null;const r=we(this,ln).registry.draggables.get(e);return r&&et(this,ci,r),(t=r??we(this,ci))!=null?t:null}get target(){var t;const e=this.targetIdentifier;return e!=null&&(t=we(this,ln).registry.droppables.get(e))!=null?t:null}get transform(){const{x:t,y:e}=this.position.delta;let r={x:t,y:e};for(const n of this.modifiers)r=n.apply(yd(md({},this.snapshot()),{transform:r}));return et(this,dn,r),r}snapshot(){return ne(()=>({source:this.source,target:this.target,activatorEvent:this.activatorEvent,transform:we(this,dn),shape:this.shape?go(this.shape):null,position:go(this.position),status:go(this.status),canceled:this.canceled}))}reset(){Dr(()=>{this.status.set("idle"),this.sourceIdentifier=null,this.targetIdentifier=null,we(this,Pr).reset(),this.position.reset({x:0,y:0}),et(this,dn,{x:0,y:0}),this.modifiers=[]})}};de=Gr(null);ln=new WeakMap;ci=new WeakMap;Pr=new WeakMap;Vs=new WeakMap;Us=new WeakMap;Bs=new WeakMap;Hs=new WeakMap;$s=new WeakMap;dn=new WeakMap;Y(de,2,"shape",tu,lt);Y(de,4,"canceled",eu,lt,Vs);Y(de,4,"activatorEvent",Zd,lt,Us);Y(de,4,"sourceIdentifier",Qd,lt,Bs);Y(de,4,"targetIdentifier",Kd,lt,Hs);Y(de,4,"modifiers",Jd,lt,$s);Y(de,2,"source",Xd,lt);Y(de,2,"target",Yd,lt);Y(de,2,"transform",Gd,lt);dr(de,lt);var Rp={get rendering(){return Promise.resolve()}},Wp=class{constructor(e){this.destroy=()=>{this.dragOperation.status.idle||this.actions.stop({canceled:!0}),this.dragOperation.modifiers.forEach(c=>c.destroy()),this.registry.destroy(),this.collisionObserver.destroy()};const{plugins:r=[],sensors:n=[],modifiers:i=[],renderer:o=Rp}=e??{},s=new kp(this),a=new Ip(this);this.registry=a,this.monitor=s,this.renderer=o,this.actions=new Mp(this),this.dragOperation=new lt(this),this.collisionObserver=new Pp(this),this.plugins=[Tp,...r],this.modifiers=i,this.sensors=n;const{destroy:l}=this,d=Dn(()=>{var c,u,g;const h=ne(()=>this.dragOperation.modifiers),v=this.modifiers;h!==v&&h.forEach(m=>m.destroy()),this.dragOperation.modifiers=(g=(u=(c=this.dragOperation.source)==null?void 0:c.modifiers)==null?void 0:u.map(m=>{const{plugin:x,options:E}=Es(m);return new x(this,E)}))!=null?g:v});this.destroy=()=>{d(),l()}}get plugins(){return this.registry.plugins.values}set plugins(e){this.registry.plugins.values=e}get modifiers(){return this.registry.modifiers.values}set modifiers(e){this.registry.modifiers.values=e}get sensors(){return this.registry.sensors.values}set sensors(e){this.registry.sensors.values=e}},ru=t=>{throw TypeError(t)},Gs=(t,e,r)=>e.has(t)||ru("Cannot "+r),H=(t,e,r)=>(Gs(t,e,"read from private field"),e.get(t)),qe=(t,e,r)=>e.has(t)?ru("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),He=(t,e,r,n)=>(Gs(t,e,"write to private field"),e.set(t,r),r),nu=(t,e,r)=>(Gs(t,e,"access private method"),r);function $i(t){return t?t instanceof KeyframeEffect?!0:"getKeyframes"in t&&typeof t.getKeyframes=="function":!1}function Cp(t,e){const r=t.getAnimations();if(r.length>0)for(const n of r){if(n.playState!=="running")continue;const{effect:i}=n,s=($i(i)?i.getKeyframes():[]).filter(e);if(s.length>0)return[s[s.length-1],n]}return null}function Gi(t){const{width:e,height:r,top:n,left:i,bottom:o,right:s}=t.getBoundingClientRect();return{width:e,height:r,top:n,left:i,bottom:o,right:s}}function Ys(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Ln(t){return"nodeType"in t}function dt(t){var e,r,n;return t?Ys(t)?t:Ln(t)?"defaultView"in t?(e=t.defaultView)!=null?e:window:(n=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?n:window:window:window}function _i(t){const{Document:e}=dt(t);return t instanceof e||"nodeType"in t&&t.nodeType===Node.DOCUMENT_NODE}function sr(t){return!t||Ys(t)?!1:t instanceof dt(t).HTMLElement||"namespaceURI"in t&&typeof t.namespaceURI=="string"&&t.namespaceURI.endsWith("html")}function iu(t){return t instanceof dt(t).SVGElement||"namespaceURI"in t&&typeof t.namespaceURI=="string"&&t.namespaceURI.endsWith("svg")}function ur(t){return t?Ys(t)?t.document:Ln(t)?_i(t)?t:sr(t)||iu(t)?t.ownerDocument:document:document:document}function Dp(t){const{documentElement:e}=ur(t),r=e.clientWidth,n=e.clientHeight;return{top:0,left:0,right:r,bottom:n,width:r,height:n}}function jp(t,e){if(Fp(t)&&t.open===!1)return!1;const{overflow:r,overflowX:n,overflowY:i}=getComputedStyle(t);return r==="visible"&&n==="visible"&&i==="visible"}function Fp(t){return t.tagName==="DETAILS"}function wi(t,e=t.getBoundingClientRect(),r=0){var n;let i=e;const{ownerDocument:o}=t,s=(n=o.defaultView)!=null?n:window;let a=t.parentElement;for(;a&&a!==o.documentElement;){if(!jp(a)){const g=a.getBoundingClientRect(),h=r*(g.bottom-g.top),v=r*(g.right-g.left),m=r*(g.bottom-g.top),x=r*(g.right-g.left);i={top:Math.max(i.top,g.top-h),right:Math.min(i.right,g.right+v),bottom:Math.min(i.bottom,g.bottom+m),left:Math.max(i.left,g.left-x),width:0,height:0},i.width=i.right-i.left,i.height=i.bottom-i.top}a=a.parentElement}const l=s.innerWidth,d=s.innerHeight,c=r*d,u=r*l;return i={top:Math.max(i.top,0-c),right:Math.min(i.right,l+u),bottom:Math.min(i.bottom,d+c),left:Math.max(i.left,0-u),width:0,height:0},i.width=i.right-i.left,i.height=i.bottom-i.top,i.width<0&&(i.width=0),i.height<0&&(i.height=0),i}function Fr(t){return{x:t.clientX,y:t.clientY}}var ou=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function zo(t=document,e=new Set){if(e.has(t))return[];e.add(t);const r=[t];for(const n of Array.from(t.querySelectorAll("iframe, frame")))try{const i=n.contentDocument;i&&!e.has(i)&&r.push(...zo(i,e))}catch{}try{const n=t.defaultView;if(n&&n!==window.top){const i=n.parent;i&&i.document&&i.document!==t&&r.push(...zo(i.document,e))}}catch{}return r}function su(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Xs(t){return!t||!Ln(t)?!1:t instanceof dt(t).ShadowRoot}function xi(t){if(t&&Ln(t)){let e=t.getRootNode();if(Xs(e))return e;if(e instanceof Document)return e}return ur(t)}function au(t){return t.matchMedia("(prefers-reduced-motion: reduce)").matches}function qp(t){const e="input, textarea, select, canvas, [contenteditable]",r=t.cloneNode(!0),n=Array.from(t.querySelectorAll(e));return Array.from(r.querySelectorAll(e)).forEach((o,s)=>{const a=n[s];if(Ha(o)&&Ha(a)&&(o.type!=="file"&&(o.value=a.value),o.type==="radio"&&o.name&&(o.name=`Cloned__${o.name}`)),$a(o)&&$a(a)&&a.width>0&&a.height>0){const l=o.getContext("2d");l?.drawImage(a,0,0)}}),r}function Ha(t){return"value"in t}function $a(t){return t.tagName==="CANVAS"}function lu(t,{x:e,y:r}){const n=t.elementFromPoint(e,r);if(Lp(n)){const{contentDocument:i}=n;if(i){const{left:o,top:s}=n.getBoundingClientRect();return lu(i,{x:e-o,y:r-s})}}return n}function Lp(t){return t?.tagName==="IFRAME"}var Ga=new WeakMap;function zp(t){return!!t.closest(`
      input:not([disabled]),
      select:not([disabled]),
      textarea:not([disabled]),
      button:not([disabled]),
      a[href],
      [contenteditable]:not([contenteditable="false"])
    `)}var du=class{constructor(){this.entries=new Set,this.clear=()=>{for(const t of this.entries){const[e,{type:r,listener:n,options:i}]=t;e.removeEventListener(r,n,i)}this.entries.clear()}}bind(t,e){const r=Array.isArray(t)?t:[t],n=Array.isArray(e)?e:[e],i=[];for(const o of r)for(const s of n){const{type:a,listener:l,options:d}=s,c=[o,s];o.addEventListener(a,l,d),this.entries.add(c),i.push(c)}return function(){for(const[s,{type:a,listener:l,options:d}]of i)s.removeEventListener(a,l,d)}}};function qr(t){const e=t?.ownerDocument.defaultView;if(e&&e.self!==e.parent)return e.frameElement}function Vp(t){const e=new Set;let r=qr(t);for(;r;)e.add(r),r=qr(r);return e}function Up(t,e){const r=setTimeout(t,e);return()=>clearTimeout(r)}function uu(t,e){const r=()=>performance.now();let n,i;return function(...o){const s=this;i?(n?.(),n=Up(()=>{t.apply(s,o),i=r()},e-(r()-i))):(t.apply(s,o),i=r())}}function Bp(t,e){return t===e?!0:!t||!e?!1:t.top==e.top&&t.left==e.left&&t.right==e.right&&t.bottom==e.bottom}function Hp(t,e=t.getBoundingClientRect()){const{width:r,height:n}=wi(t,e);return r>0&&n>0}var $p=ou?ResizeObserver:class{observe(){}unobserve(){}disconnect(){}},fi,Gp=class extends $p{constructor(t){super(e=>{if(!H(this,fi)){He(this,fi,!0);return}t(e,this)}),qe(this,fi,!1)}};fi=new WeakMap;var Ya=Array.from({length:100},(t,e)=>e/100),cu=75,Kt,Si,Ct,Qt,un,xe,yn,cn,Oi,fu,pu,hu=class{constructor(t,e,r={debug:!1,skipInitial:!1}){this.element=t,this.callback=e,qe(this,Oi),this.disconnect=()=>{var o,s,a;He(this,yn,!0),(o=H(this,Ct))==null||o.disconnect(),(s=H(this,Qt))==null||s.disconnect(),H(this,un).disconnect(),(a=H(this,xe))==null||a.remove()},qe(this,Kt,!0),qe(this,Si),qe(this,Ct),qe(this,Qt),qe(this,un),qe(this,xe),qe(this,yn,!1),qe(this,cn,uu(()=>{var o,s,a;const{element:l}=this;if((o=H(this,Qt))==null||o.disconnect(),H(this,yn)||!H(this,Kt)||!l.isConnected)return;const d=(s=l.ownerDocument)!=null?s:document,{innerHeight:c,innerWidth:u}=(a=d.defaultView)!=null?a:window,g=l.getBoundingClientRect(),h=wi(l,g),{top:v,left:m,bottom:x,right:E}=h,_=-Math.floor(v),P=-Math.floor(m),y=-Math.floor(u-E),b=-Math.floor(c-x),T=`${_}px ${y}px ${b}px ${P}px`;this.boundingClientRect=g,He(this,Qt,new IntersectionObserver(S=>{const[k]=S,{intersectionRect:A}=k;(k.intersectionRatio!==1?k.intersectionRatio:jn.intersectionRatio(A,wi(l)))!==1&&H(this,cn).call(this)},{threshold:Ya,rootMargin:T,root:d})),H(this,Qt).observe(l),nu(this,Oi,fu).call(this)},cu)),this.boundingClientRect=t.getBoundingClientRect(),He(this,Kt,Hp(t,this.boundingClientRect));let n=!0;this.callback=o=>{n&&(n=!1,r.skipInitial)||e(o)};const i=t.ownerDocument;r?.debug&&(He(this,xe,document.createElement("div")),H(this,xe).style.background="rgba(0,0,0,0.15)",H(this,xe).style.position="fixed",H(this,xe).style.pointerEvents="none",i.body.appendChild(H(this,xe))),He(this,un,new IntersectionObserver(o=>{var s,a;const l=o[o.length-1],{boundingClientRect:d,isIntersecting:c}=l,{width:u,height:g}=d,h=H(this,Kt);He(this,Kt,c),!(!u&&!g)&&(h&&!c?((s=H(this,Qt))==null||s.disconnect(),this.callback(null),(a=H(this,Ct))==null||a.disconnect(),He(this,Ct,void 0),H(this,xe)&&(H(this,xe).style.visibility="hidden")):H(this,cn).call(this),c&&!H(this,Ct)&&(He(this,Ct,new Gp(H(this,cn))),H(this,Ct).observe(t)))},{threshold:Ya,root:i})),H(this,Kt)&&!r.skipInitial&&this.callback(this.boundingClientRect),H(this,un).observe(t)}};Kt=new WeakMap;Si=new WeakMap;Ct=new WeakMap;Qt=new WeakMap;un=new WeakMap;xe=new WeakMap;yn=new WeakMap;cn=new WeakMap;Oi=new WeakSet;fu=function(){H(this,yn)||(nu(this,Oi,pu).call(this),!Bp(this.boundingClientRect,H(this,Si))&&(this.callback(this.boundingClientRect),He(this,Si,this.boundingClientRect)))};pu=function(){if(H(this,xe)){const{top:t,left:e,width:r,height:n}=wi(this.element);H(this,xe).style.overflow="hidden",H(this,xe).style.visibility="visible",H(this,xe).style.top=`${Math.floor(t)}px`,H(this,xe).style.left=`${Math.floor(e)}px`,H(this,xe).style.width=`${Math.floor(r)}px`,H(this,xe).style.height=`${Math.floor(n)}px`}};var Qn=new WeakMap,Zn=new WeakMap;function Yp(t,e){let r=Qn.get(t);return r||(r={disconnect:new hu(t,i=>{const o=Qn.get(t);o&&o.callbacks.forEach(s=>s(i))},{skipInitial:!0}).disconnect,callbacks:new Set}),r.callbacks.add(e),Qn.set(t,r),()=>{r.callbacks.delete(e),r.callbacks.size===0&&(Qn.delete(t),r.disconnect())}}function Xp(t,e){const r=new Set;for(const n of t){const i=Yp(n,e);r.add(i)}return()=>r.forEach(n=>n())}function Jp(t,e){var r;const n=t.ownerDocument;if(!Zn.has(n)){const s=new AbortController,a=new Set;document.addEventListener("scroll",l=>a.forEach(d=>d(l)),{capture:!0,passive:!0,signal:s.signal}),Zn.set(n,{disconnect:()=>s.abort(),listeners:a})}const{listeners:i,disconnect:o}=(r=Zn.get(n))!=null?r:{};return!i||!o?()=>{}:(i.add(e),()=>{i.delete(e),i.size===0&&(o(),Zn.delete(n))})}var fn,pn,pi,Vo,Kp=class{constructor(t,e,r){this.callback=e,qe(this,fn),qe(this,pn,!1),qe(this,pi),qe(this,Vo,uu(s=>{if(!H(this,pn)&&s.target&&"contains"in s.target&&typeof s.target.contains=="function"){for(const a of H(this,pi))if(s.target.contains(a)){this.callback(H(this,fn).boundingClientRect);break}}},cu));const n=Vp(t),i=Xp(n,e),o=Jp(t,H(this,Vo));He(this,pi,n),He(this,fn,new hu(t,e,r)),this.disconnect=()=>{H(this,pn)||(He(this,pn,!0),i(),o(),H(this,fn).disconnect())}}};fn=new WeakMap;pn=new WeakMap;pi=new WeakMap;Vo=new WeakMap;function Uo(t){return"showPopover"in t&&"hidePopover"in t&&typeof t.showPopover=="function"&&typeof t.hidePopover=="function"}function On(t){try{Uo(t)&&t.isConnected&&t.hasAttribute("popover")&&!t.matches(":popover-open")&&t.showPopover()}catch{}}function Xa(t){return!ou||!t?!1:t===ur(t).scrollingElement}function gu(t){const e=dt(t),r=Xa(t)?Dp(t):Gi(t),n=Xa(t)?{height:e.innerHeight,width:e.innerWidth}:{height:t.clientHeight,width:t.clientWidth},i={current:{x:t.scrollLeft,y:t.scrollTop},max:{x:t.scrollWidth-n.width,y:t.scrollHeight-n.height}},o=i.current.y<=0,s=i.current.x<=0,a=i.current.y>=i.max.y,l=i.current.x>=i.max.x;return{rect:r,position:i,isTop:o,isLeft:s,isBottom:a,isRight:l}}function Qp(t,e){const{isTop:r,isBottom:n,isLeft:i,isRight:o,position:s}=gu(t),{x:a,y:l}=e??{x:0,y:0},d=!r&&s.current.y+l>0,c=!n&&s.current.y+l<s.max.y,u=!i&&s.current.x+a>0,g=!o&&s.current.x+a<s.max.x;return{top:d,bottom:c,left:u,right:g,x:u||g,y:d||c}}var Js=class{constructor(e){this.scheduler=e,this.pending=!1,this.tasks=new Set,this.resolvers=new Set,this.flush=()=>{const{tasks:r,resolvers:n}=this;this.pending=!1,this.tasks=new Set,this.resolvers=new Set;for(const i of r)i();for(const i of n)i()}}schedule(e){return this.tasks.add(e),this.pending||(this.pending=!0,this.scheduler(this.flush)),new Promise(r=>this.resolvers.add(r))}},Ei=new Js(t=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(t):t()}),Zp=new Js(t=>setTimeout(t,50)),Pi=new Map,eh=Pi.clear.bind(Pi);function At(t,e=!1){if(!e)return Ja(t);let r=Pi.get(t);return r||(r=Ja(t),Pi.set(t,r),Zp.schedule(eh),r)}function Ja(t){return dt(t).getComputedStyle(t)}function th(t,e=At(t,!0)){return e.position==="fixed"||e.position==="sticky"}function rh(t,e=At(t,!0)){const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=e[i];return typeof o=="string"?r.test(o):!1})}var nh={excludeElement:!0,escapeShadowDOM:!0};function Bo(t,e=nh){const{limit:r,excludeElement:n,escapeShadowDOM:i}=e,o=new Set;function s(a){if(r!=null&&o.size>=r||!a)return o;if(_i(a)&&a.scrollingElement!=null&&!o.has(a.scrollingElement))return o.add(a.scrollingElement),o;if(i&&Xs(a))return s(a.host);if(!sr(a))return iu(a)?s(a.parentElement):o;if(o.has(a))return o;const l=At(a,!0);if(n&&a===t||rh(a,l)&&o.add(a),th(a,l)){const{scrollingElement:d}=a.ownerDocument;return d&&o.add(d),o}return s(a.parentNode)}return t?s(t):o}function ih(t){const[e]=Bo(t,{limit:1});return e??null}function Lr(t,e=window.frameElement){const r={x:0,y:0,scaleX:1,scaleY:1};if(!t)return r;let n=qr(t);for(;n;){if(n===e)return r;const i=Gi(n),{x:o,y:s}=oh(n,i);r.x=r.x+i.left,r.y=r.y+i.top,r.scaleX=r.scaleX*o,r.scaleY=r.scaleY*s,n=qr(n)}return r}function oh(t,e=Gi(t)){const r=Math.round(e.width),n=Math.round(e.height);if(sr(t))return{x:r/t.offsetWidth,y:n/t.offsetHeight};const i=At(t,!0);return{x:(parseFloat(i.width)||r)/r,y:(parseFloat(i.height)||n)/n}}function sh(t){if(t==="none")return null;const e=t.split(" "),r=parseFloat(e[0]),n=parseFloat(e[1]);return isNaN(r)&&isNaN(n)?null:{x:isNaN(r)?n:r,y:isNaN(n)?r:n}}function Ks(t){if(t==="none")return null;const[e,r,n="0"]=t.split(" "),i={x:parseFloat(e),y:parseFloat(r),z:parseInt(n,10)};return isNaN(i.x)&&isNaN(i.y)?null:{x:isNaN(i.x)?0:i.x,y:isNaN(i.y)?0:i.y,z:isNaN(i.z)?0:i.z}}function Qs(t){var e,r,n,i,o,s,a,l,d;const{scale:c,transform:u,translate:g}=t,h=sh(c),v=Ks(g),m=ah(u);if(!m&&!h&&!v)return null;const x={x:(e=h?.x)!=null?e:1,y:(r=h?.y)!=null?r:1},E={x:(n=v?.x)!=null?n:0,y:(i=v?.y)!=null?i:0},_={x:(o=m?.x)!=null?o:0,y:(s=m?.y)!=null?s:0,scaleX:(a=m?.scaleX)!=null?a:1,scaleY:(l=m?.scaleY)!=null?l:1};return{x:E.x+_.x,y:E.y+_.y,z:(d=v?.z)!=null?d:0,scaleX:x.x*_.scaleX,scaleY:x.y*_.scaleY}}function ah(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}var tt=(t=>(t[t.Idle=0]="Idle",t[t.Forward=1]="Forward",t[t.Reverse=-1]="Reverse",t))(tt||{}),lh={x:.2,y:.2},dh={x:10,y:10};function uh(t,e,r,n=25,i=lh,o=dh){const{x:s,y:a}=e,{rect:l,isTop:d,isBottom:c,isLeft:u,isRight:g}=gu(t),h=Lr(t),v=At(t,!0),m=Qs(v),x=m!==null?m?.scaleX<0:!1,E=m!==null?m?.scaleY<0:!1,_=new jn(l.left*h.scaleX+h.x,l.top*h.scaleY+h.y,l.width*h.scaleX,l.height*h.scaleY),P={x:0,y:0},y={x:0,y:0},b={height:_.height*i.y,width:_.width*i.x};return(!d||E&&!c)&&a<=_.top+b.height&&r?.y!==1&&s>=_.left-o.x&&s<=_.right+o.x?(P.y=E?1:-1,y.y=n*Math.abs((_.top+b.height-a)/b.height)):(!c||E&&!d)&&a>=_.bottom-b.height&&r?.y!==-1&&s>=_.left-o.x&&s<=_.right+o.x&&(P.y=E?-1:1,y.y=n*Math.abs((_.bottom-b.height-a)/b.height)),(!g||x&&!u)&&s>=_.right-b.width&&r?.x!==-1&&a>=_.top-o.y&&a<=_.bottom+o.y?(P.x=x?-1:1,y.x=n*Math.abs((_.right-b.width-s)/b.width)):(!u||x&&!g)&&s<=_.left+b.width&&r?.x!==1&&a>=_.top-o.y&&a<=_.bottom+o.y&&(P.x=x?1:-1,y.x=n*Math.abs((_.left+b.width-s)/b.width)),{direction:P,speed:y}}function ch(t){return"scrollIntoViewIfNeeded"in t&&typeof t.scrollIntoViewIfNeeded=="function"}function fh(t,e=!1){if(ch(t)){t.scrollIntoViewIfNeeded(e);return}if(!sr(t))return t.scrollIntoView();var r=ih(t);if(!sr(r))return;const n=At(r,!0),i=parseInt(n.getPropertyValue("border-top-width")),o=parseInt(n.getPropertyValue("border-left-width")),s=t.offsetTop-r.offsetTop<r.scrollTop,a=t.offsetTop-r.offsetTop+t.clientHeight-i>r.scrollTop+r.clientHeight,l=t.offsetLeft-r.offsetLeft<r.scrollLeft,d=t.offsetLeft-r.offsetLeft+t.clientWidth-o>r.scrollLeft+r.clientWidth,c=s&&!a;(s||a)&&e&&(r.scrollTop=t.offsetTop-r.offsetTop-r.clientHeight/2-i+t.clientHeight/2),(l||d)&&e&&(r.scrollLeft=t.offsetLeft-r.offsetLeft-r.clientWidth/2-o+t.clientWidth/2),(s||a||l||d)&&!e&&t.scrollIntoView(c)}function ph(t,e,r){const{scaleX:n,scaleY:i,x:o,y:s}=e,a=t.left+o+(1-n)*parseFloat(r),l=t.top+s+(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),d=n?t.width*n:t.width,c=i?t.height*i:t.height;return{width:d,height:c,top:l,right:a+d,bottom:l+c,left:a}}function hh(t,e,r){const{scaleX:n,scaleY:i,x:o,y:s}=e,a=t.left-o-(1-n)*parseFloat(r),l=t.top-s-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),d=n?t.width/n:t.width,c=i?t.height/i:t.height;return{width:d,height:c,top:l,right:a+d,bottom:l+c,left:a}}function gh({element:t,keyframes:e,options:r}){return t.animate(e,r).finished}var vh=new Js(t=>setTimeout(t,0)),bn=new Map,mh=bn.clear.bind(bn);function yh(t){const e=t.ownerDocument;let r=bn.get(e);if(r)return r;r=e.getAnimations(),bn.set(e,r),vh.schedule(mh);const n=r.filter(i=>$i(i.effect)&&i.effect.target===t);return bn.set(t,n),r}function bh(t,e){const r=yh(t).filter(n=>{var i,o;if($i(n.effect)){const{target:s}=n.effect;if((o=s&&((i=e.isValidTarget)==null?void 0:i.call(e,s)))!=null?o:!0)return n.effect.getKeyframes().some(l=>{for(const d of e.properties)if(l[d])return!0})}}).map(n=>{const{effect:i,currentTime:o}=n,s=i?.getComputedTiming().duration;if(!(n.pending||n.playState==="finished")&&typeof s=="number"&&typeof o=="number"&&o<s)return n.currentTime=s,()=>{n.currentTime=o}});if(r.length>0)return()=>r.forEach(n=>n?.())}var kt=class extends jn{constructor(t,e={}){var r,n,i,o;const{frameTransform:s=Lr(t),ignoreTransforms:a,getBoundingClientRect:l=Gi}=e,d=bh(t,{properties:["transform","translate","scale","width","height"],isValidTarget:b=>(b!==t||su())&&b.contains(t)}),c=l(t);let{top:u,left:g,width:h,height:v}=c,m;const x=At(t),E=Qs(x),_={x:(r=E?.scaleX)!=null?r:1,y:(n=E?.scaleY)!=null?n:1},P=_h(t,x);d?.(),E&&(m=hh(c,E,x.transformOrigin),(a||P)&&(u=m.top,g=m.left,h=m.width,v=m.height));const y={width:(i=m?.width)!=null?i:h,height:(o=m?.height)!=null?o:v};if(P&&!a&&m){const b=ph(m,P,x.transformOrigin);u=b.top,g=b.left,h=b.width,v=b.height,_.x=P.scaleX,_.y=P.scaleY}s&&(a||(g*=s.scaleX,h*=s.scaleX,u*=s.scaleY,v*=s.scaleY),g+=s.x,u+=s.y),super(g,u,h,v),this.scale=_,this.intrinsicWidth=y.width,this.intrinsicHeight=y.height}};function _h(t,e){var r;const n=t.getAnimations();let i=null;if(!n.length)return null;for(const o of n){if(o.playState!=="running")continue;const s=$i(o.effect)?o.effect.getKeyframes():[],a=s[s.length-1];if(!a)continue;const{transform:l,translate:d,scale:c}=a;if(l||d||c){const u=Qs({transform:typeof l=="string"&&l?l:e.transform,translate:typeof d=="string"&&d?d:e.translate,scale:typeof c=="string"&&c?c:e.scale});u&&(i=i?{x:i.x+u.x,y:i.y+u.y,z:(r=i.z)!=null?r:u.z,scaleX:i.scaleX*u.scaleX,scaleY:i.scaleY*u.scaleY}:u)}}return i}function _n(t){return"style"in t&&typeof t.style=="object"&&t.style!==null&&"setProperty"in t.style&&"removeProperty"in t.style&&typeof t.style.setProperty=="function"&&typeof t.style.removeProperty=="function"}var wh=class{constructor(t){this.element=t,this.initial=new Map}set(t,e=""){const{element:r}=this;if(_n(r))for(const[n,i]of Object.entries(t)){const o=`${e}${n}`;this.initial.has(o)||this.initial.set(o,r.style.getPropertyValue(o)),r.style.setProperty(o,typeof i=="string"?i:`${i}px`)}}remove(t,e=""){const{element:r}=this;if(_n(r))for(const n of t){const i=`${e}${n}`;r.style.removeProperty(i)}}reset(){const{element:t}=this;if(_n(t)){for(const[e,r]of this.initial)t.style.setProperty(e,r);t.getAttribute("style")===""&&t.removeAttribute("style")}}};function ar(t){return t?t instanceof dt(t).Element||Ln(t)&&t.nodeType===Node.ELEMENT_NODE:!1}function Zs(t){if(!t)return!1;const{KeyboardEvent:e}=dt(t.target);return t instanceof e}function xh(t){if(!t)return!1;const{PointerEvent:e}=dt(t.target);return t instanceof e}function Sh(t){if(!ar(t))return!1;const{tagName:e}=t;return e==="INPUT"||e==="TEXTAREA"||Oh(t)}function Oh(t){return t.hasAttribute("contenteditable")&&t.getAttribute("contenteditable")!=="false"}var mo={};function Ho(t){const e=mo[t]==null?0:mo[t]+1;return mo[t]=e,`${t}-${e}`}var Eh=({dragOperation:t,droppable:e})=>{const r=t.position.current;if(!r)return null;const{id:n}=e;if(!e.shape)return null;if(e.shape.containsPoint(r)){const i=mt.distance(e.shape.center,r);return{id:n,value:1/i,type:ks.PointerIntersection,priority:Ns.High}}return null},Ph=({dragOperation:t,droppable:e})=>{const{shape:r}=t;if(!e.shape||!r?.current)return null;const n=r.current.intersectionArea(e.shape);if(n){const{position:i}=t,o=mt.distance(e.shape.center,i.current),a=n/(r.current.area+e.shape.area-n)/o;return{id:e.id,value:a,type:ks.ShapeIntersection,priority:Ns.Normal}}return null},Nh=t=>{var e;return(e=Eh(t))!=null?e:Ph(t)},kh=Object.create,ea=Object.defineProperty,Th=Object.defineProperties,Mh=Object.getOwnPropertyDescriptor,Ah=Object.getOwnPropertyDescriptors,Ni=Object.getOwnPropertySymbols,vu=Object.prototype.hasOwnProperty,mu=Object.prototype.propertyIsEnumerable,yu=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Yr=t=>{throw TypeError(t)},$o=(t,e,r)=>e in t?ea(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,En=(t,e)=>{for(var r in e||(e={}))vu.call(e,r)&&$o(t,r,e[r]);if(Ni)for(var r of Ni(e))mu.call(e,r)&&$o(t,r,e[r]);return t},ta=(t,e)=>Th(t,Ah(e)),Ka=(t,e)=>ea(t,"name",{value:e,configurable:!0}),bu=(t,e)=>{var r={};for(var n in t)vu.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Ni)for(var n of Ni(t))e.indexOf(n)<0&&mu.call(t,n)&&(r[n]=t[n]);return r},Xr=t=>{var e;return[,,,kh((e=t?.[yu("metadata")])!=null?e:null)]},_u=["class","method","getter","setter","accessor","field","value","get","set"],hn=t=>t!==void 0&&typeof t!="function"?Yr("Function expected"):t,Ih=(t,e,r,n,i)=>({kind:_u[t],name:e,metadata:n,addInitializer:o=>r._?Yr("Already initialized"):i.push(hn(o||null))}),cr=(t,e)=>$o(e,yu("metadata"),t[3]),fe=(t,e,r,n)=>{for(var i=0,o=t[e>>1],s=o&&o.length;i<s;i++)e&1?o[i].call(r):n=o[i].call(r,n);return n},Xe=(t,e,r,n,i,o)=>{var s,a,l,d,c,u=e&7,g=!!(e&8),h=!!(e&16),v=u>3?t.length+1:u?g?1:2:0,m=_u[u+5],x=u>3&&(t[v-1]=[]),E=t[v]||(t[v]=[]),_=u&&(!h&&!g&&(i=i.prototype),u<5&&(u>3||!h)&&Mh(u<4?i:{get[r](){return ie(this,o)},set[r](y){return Ce(this,o,y)}},r));u?h&&u<4&&Ka(o,(u>2?"set ":u>1?"get ":"")+r):Ka(i,r);for(var P=n.length-1;P>=0;P--)d=Ih(u,r,l={},t[3],E),u&&(d.static=g,d.private=h,c=d.access={has:h?y=>Rh(i,y):y=>r in y},u^3&&(c.get=h?y=>(u^1?ie:Pn)(y,i,u^4?o:_.get):y=>y[r]),u>2&&(c.set=h?(y,b)=>Ce(y,i,b,u^4?o:_.set):(y,b)=>y[r]=b)),a=(0,n[P])(u?u<4?h?o:_[m]:u>4?void 0:{get:_.get,set:_.set}:i,d),l._=1,u^4||a===void 0?hn(a)&&(u>4?x.unshift(a):u?h?o=a:_[m]=a:i=a):typeof a!="object"||a===null?Yr("Object expected"):(hn(s=a.get)&&(_.get=s),hn(s=a.set)&&(_.set=s),hn(s=a.init)&&x.unshift(s));return u||cr(t,i),_&&ea(i,r,_),h?u^4?o:_:i},ra=(t,e,r)=>e.has(t)||Yr("Cannot "+r),Rh=(t,e)=>Object(e)!==e?Yr('Cannot use the "in" operator on this value'):t.has(e),ie=(t,e,r)=>(ra(t,e,"read from private field"),r?r.call(t):e.get(t)),ue=(t,e,r)=>e.has(t)?Yr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ce=(t,e,r,n)=>(ra(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Pn=(t,e,r)=>(ra(t,e,"access private method"),r),Qa={role:"button",roleDescription:"draggable"},Wh="dnd-kit-description",Ch="dnd-kit-announcement",Dh={draggable:"To pick up a draggable item, press the space bar. While dragging, use the arrow keys to move the item in a given direction. Press space again to drop the item in its new position, or press escape to cancel."},jh={dragstart({operation:{source:t}}){if(t)return`Picked up draggable item ${t.id}.`},dragover({operation:{source:t,target:e}}){if(!(!t||t.id===e?.id))return e?`Draggable item ${t.id} was moved over droppable target ${e.id}.`:`Draggable item ${t.id} is no longer over a droppable target.`},dragend({operation:{source:t,target:e},canceled:r}){if(t)return r?`Dragging was cancelled. Draggable item ${t.id} was dropped.`:e?`Draggable item ${t.id} was dropped over droppable target ${e.id}`:`Draggable item ${t.id} was dropped.`}};function Fh(t){const e=t.tagName.toLowerCase();return["input","select","textarea","a","button"].includes(e)}function qh(t,e){const r=document.createElement("div");return r.id=t,r.style.setProperty("display","none"),r.textContent=e,r}function Lh(t){const e=document.createElement("div");return e.id=t,e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.style.setProperty("position","fixed"),e.style.setProperty("width","1px"),e.style.setProperty("height","1px"),e.style.setProperty("margin","-1px"),e.style.setProperty("border","0"),e.style.setProperty("padding","0"),e.style.setProperty("overflow","hidden"),e.style.setProperty("clip","rect(0 0 0 0)"),e.style.setProperty("clip-path","inset(100%)"),e.style.setProperty("white-space","nowrap"),e}var zh=["dragover","dragmove"],Vh=class extends ze{constructor(t,e){super(t);const{id:r,idPrefix:{description:n=Wh,announcement:i=Ch}={},announcements:o=jh,screenReaderInstructions:s=Dh,debounce:a=500}=e??{},l=r?`${n}-${r}`:Ho(n),d=r?`${i}-${r}`:Ho(i);let c,u,g,h;const v=(b=h)=>{!g||!b||g?.nodeValue!==b&&(g.nodeValue=b)},m=()=>Ei.schedule(v),x=Uh(m,a),E=Object.entries(o).map(([b,T])=>this.manager.monitor.addEventListener(b,(S,k)=>{const A=g;if(!A)return;const W=T?.(S,k);W&&A.nodeValue!==W&&(h=W,zh.includes(b)?x():(m(),x.cancel()))})),_=()=>{let b=[];c?.isConnected||(c=qh(l,s.draggable),b.push(c)),u?.isConnected||(u=Lh(d),g=document.createTextNode(""),u.appendChild(g),b.push(u)),b.length>0&&document.body.append(...b)},P=new Set;function y(){for(const b of P)b()}this.registerEffect(()=>{var b;P.clear();for(const T of this.manager.registry.draggables.value){const S=(b=T.handle)!=null?b:T.element;if(S){(!c||!u)&&P.add(_),(!Fh(S)||su())&&!S.hasAttribute("tabindex")&&P.add(()=>S.setAttribute("tabindex","0")),!S.hasAttribute("role")&&S.tagName.toLowerCase()!=="button"&&P.add(()=>S.setAttribute("role",Qa.role)),S.hasAttribute("aria-roledescription")||P.add(()=>S.setAttribute("aria-roledescription",Qa.roleDescription)),S.hasAttribute("aria-describedby")||P.add(()=>S.setAttribute("aria-describedby",l));for(const A of["aria-pressed","aria-grabbed"]){const W=String(T.isDragging);S.getAttribute(A)!==W&&P.add(()=>S.setAttribute(A,W))}const k=String(T.disabled);S.getAttribute("aria-disabled")!==k&&P.add(()=>S.setAttribute("aria-disabled",k))}}P.size>0&&Ei.schedule(y)}),this.destroy=()=>{super.destroy(),c?.remove(),u?.remove(),E.forEach(b=>b())}}};function Uh(t,e){let r;const n=()=>{clearTimeout(r),r=setTimeout(t,e)};return n.cancel=()=>clearTimeout(r),n}var Bh=class extends ze{constructor(t,e){super(t,e),this.manager=t;const r=yi(()=>{var n;return ur((n=this.manager.dragOperation.source)==null?void 0:n.element)});this.destroy=at(()=>{var n;const{dragOperation:i}=this.manager,{cursor:o="grabbing",nonce:s}=(n=this.options)!=null?n:{};if(i.status.initialized){const a=r.value,l=a.createElement("style");return s&&l.setAttribute("nonce",s),l.textContent=`* { cursor: ${o} !important; }`,a.head.appendChild(l),()=>l.remove()}})}},yo=new Map,wu,xu,Su,Ou,Go,wn,Tt,na,ki,Eu,Pu,fr=class extends(Go=qn,Ou=[J],Su=[ye],xu=[ye],wu=[ye],Go){constructor(t){super(t),fe(Tt,5,this),ue(this,ki),ue(this,wn,new Set),ue(this,na,fe(Tt,8,this,new Set)),fe(Tt,11,this),this.registerEffect(Pn(this,ki,Eu))}register(t){return ie(this,wn).add(t),()=>{ie(this,wn).delete(t)}}addRoot(t){return ne(()=>{const e=new Set(this.additionalRoots);e.add(t),this.additionalRoots=e}),()=>{ne(()=>{const e=new Set(this.additionalRoots);e.delete(t),this.additionalRoots=e})}}get sourceRoot(){var t;const{source:e}=this.manager.dragOperation;return xi((t=e?.element)!=null?t:null)}get targetRoot(){var t;const{target:e}=this.manager.dragOperation;return xi((t=e?.element)!=null?t:null)}get roots(){const{status:t}=this.manager.dragOperation;if(t.initializing||t.initialized){const e=[this.sourceRoot,this.targetRoot].filter(r=>r!=null);return new Set([...e,...this.additionalRoots])}return new Set}};Tt=Xr(Go);wn=new WeakMap;na=new WeakMap;ki=new WeakSet;Eu=function(){const{roots:t}=this,e=[];for(const r of t)for(const n of ie(this,wn))e.push(Pn(this,ki,Pu).call(this,r,n));return()=>{for(const r of e)r()}};Pu=function(t,e){let r=yo.get(t);r||(r=new Map,yo.set(t,r));let n=r.get(e);if(!n){"adoptedStyleSheets"in t&&Array.isArray(t.adoptedStyleSheets);const o=_i(t)?t.defaultView:t.ownerDocument.defaultView,{CSSStyleSheet:s}=o??{};if(!s)return()=>{};const a=new s;a.replaceSync(e),t.adoptedStyleSheets.push(a),n={sheet:a,refCount:0,cleanup:()=>{var l;if(_i(t)||Xs(t)&&((l=t.host)!=null&&l.isConnected)){const d=t.adoptedStyleSheets.indexOf(a);d!==-1&&t.adoptedStyleSheets.splice(d,1)}r.delete(e),r.size===0&&yo.delete(t)}},r.set(e,n)}n.refCount++;let i=!1;return()=>{i||(i=!0,n.refCount--,n.refCount===0&&n.cleanup())}};Xe(Tt,4,"additionalRoots",Ou,fr,na);Xe(Tt,2,"sourceRoot",Su,fr);Xe(Tt,2,"targetRoot",xu,fr);Xe(Tt,2,"roots",wu,fr);cr(Tt,fr);var zn="data-dnd-",Yo=`${zn}dropping`,ke="--dnd-",gt=`${zn}dragging`,Ti=`${zn}placeholder`,Hh=[gt,Ti,"popover","aria-pressed","aria-grabbing"],$h=["view-transition-name"],Gh=`
  :is(:root,:host) [${gt}] {
    position: fixed !important;
    pointer-events: none !important;
    touch-action: none;
    z-index: calc(infinity);
    will-change: translate;
    top: var(${ke}top, 0px) !important;
    left: var(${ke}left, 0px) !important;
    right: unset !important;
    bottom: unset !important;
    width: var(${ke}width, auto);
    max-width: var(${ke}width, auto);
    height: var(${ke}height, auto);
    max-height: var(${ke}height, auto);
    transition: var(${ke}transition) !important;
  }

  :is(:root,:host) [${Ti}] {
    transition: none;
  }

  :is(:root,:host) [${Ti}='hidden'] {
    visibility: hidden;
  }

  [${gt}] * {
    pointer-events: none !important;
  }

  [${gt}]:not([${Yo}]) {
    translate: var(${ke}translate) !important;
  }

  [${gt}][style*='${ke}scale'] {
    scale: var(${ke}scale) !important;
    transform-origin: var(${ke}transform-origin) !important;
  }

  @layer {
    :where([${gt}][popover]) {
      overflow: visible;
      background: unset;
      border: unset;
      margin: unset;
      padding: unset;
      color: inherit;

      &:is(input, button) {
        border: revert;
        background: revert;
      }
    }
  }
  [${gt}]::backdrop, [${zn}overlay]:not([${gt}]) {
    display: none;
    visibility: hidden;
  }
`.replace(/\n+/g," ").replace(/\s+/g," ").trim();function Yh(t,e="hidden"){return ne(()=>{const{element:r,manager:n}=t;if(!r||!n)return;const i=Xh(r,n.registry.droppables),o=[],s=qp(r),{remove:a}=s;return Jh(i,s,o),Kh(s,e),s.remove=()=>{o.forEach(l=>l()),a.call(s)},s})}function Xh(t,e){const r=new Map;for(const n of e)if(n.element&&(t===n.element||t.contains(n.element))){const i=`${zn}${Ho("dom-id")}`;n.element.setAttribute(i,""),r.set(n,i)}return r}function Jh(t,e,r){for(const[n,i]of t){if(!n.element)continue;const o=`[${i}]`,s=e.matches(o)?e:e.querySelector(o);if(n.element.removeAttribute(i),!s)continue;const a=n.element;n.proxy=s,s.removeAttribute(i),Ga.set(a,s),r.push(()=>{Ga.delete(a),n.proxy=void 0})}}function Kh(t,e="hidden"){t.setAttribute("inert","true"),t.setAttribute("tab-index","-1"),t.setAttribute("aria-hidden","true"),t.setAttribute(Ti,e)}function Nu(t,e){return t===e?!0:qr(t)===qr(e)}function Za(t){const{target:e}=t;"newState"in t&&t.newState==="closed"&&ar(e)&&e.hasAttribute("popover")&&requestAnimationFrame(()=>On(e))}function Xo(t){return t.tagName==="TR"}function Qh(t,e,r){const n=new MutationObserver(i=>{let o=!1;for(const s of i){if(s.target!==t){o=!0;continue}if(s.type!=="attributes")continue;const a=s.attributeName;if(a.startsWith("aria-")||Hh.includes(a))continue;const l=t.getAttribute(a);if(a==="style"){if(_n(t)&&_n(e)){const d=t.style;for(const c of Array.from(e.style))d.getPropertyValue(c)===""&&e.style.removeProperty(c);for(const c of Array.from(d)){if($h.includes(c)||c.startsWith(ke))continue;const u=d.getPropertyValue(c);e.style.setProperty(c,u)}}}else l!==null?e.setAttribute(a,l):e.removeAttribute(a)}o&&r&&(e.innerHTML=t.innerHTML)});return n.observe(t,{attributes:!0,subtree:!0,childList:!0}),n}function Zh(t,e,r){const n=new MutationObserver(i=>{for(const o of i)if(o.addedNodes.length!==0)for(const s of Array.from(o.addedNodes)){if(s.contains(t)&&t.nextElementSibling!==e){t.insertAdjacentElement("afterend",e),On(r);return}if(s.contains(e)&&e.previousElementSibling!==t){e.insertAdjacentElement("beforebegin",t),On(r);return}}});return n.observe(t.ownerDocument.body,{childList:!0,subtree:!0}),n}function eg(t){return new ResizeObserver(()=>{var e,r;const n=new kt(t.placeholder,{frameTransform:t.frameTransform,ignoreTransforms:!0}),i=(e=t.transformOrigin)!=null?e:{x:1,y:1},o=(t.width-n.width)*i.x+t.delta.x,s=(t.height-n.height)*i.y+t.delta.y;if(t.styles.set({width:n.width-t.widthOffset,height:n.height-t.heightOffset,top:t.top+s,left:t.left+o},ke),(r=t.getElementMutationObserver())==null||r.takeRecords(),Xo(t.element)&&Xo(t.placeholder)){const a=Array.from(t.element.cells),l=Array.from(t.placeholder.cells);t.getSavedCellWidths()||t.setSavedCellWidths(a.map(d=>d.style.width));for(const[d,c]of a.entries()){const u=l[d];c.style.width=`${u.getBoundingClientRect().width}px`}}t.dragOperation.shape=new kt(t.feedbackElement)})}var tg=250,rg="ease";function ng(t){var e,r,n,i;const{animation:o}=t;if(typeof o=="function"){const _=o({element:t.element,feedbackElement:t.feedbackElement,placeholder:t.placeholder,translate:t.translate,moved:t.moved});Promise.resolve(_).then(()=>{t.cleanup(),requestAnimationFrame(t.restoreFocus)});return}const{duration:s=tg,easing:a=rg}=o??{};On(t.feedbackElement);const[,l]=(e=Cp(t.feedbackElement,_=>"translate"in _))!=null?e:[];l?.pause();const d=(r=t.placeholder)!=null?r:t.element,c={frameTransform:Nu(t.feedbackElement,d)?null:void 0},u=new kt(t.feedbackElement,c),g=(n=Ks(At(t.feedbackElement).translate))!=null?n:t.translate,h=new kt(d,c),v=jn.delta(u,h,t.alignment),m={x:g.x-v.x,y:g.y-v.y},x=Math.round(u.intrinsicHeight)!==Math.round(h.intrinsicHeight)?{minHeight:[`${u.intrinsicHeight}px`,`${h.intrinsicHeight}px`],maxHeight:[`${u.intrinsicHeight}px`,`${h.intrinsicHeight}px`]}:{},E=Math.round(u.intrinsicWidth)!==Math.round(h.intrinsicWidth)?{minWidth:[`${u.intrinsicWidth}px`,`${h.intrinsicWidth}px`],maxWidth:[`${u.intrinsicWidth}px`,`${h.intrinsicWidth}px`]}:{};t.styles.set({transition:t.transition},ke),t.feedbackElement.setAttribute(Yo,""),(i=t.getElementMutationObserver())==null||i.takeRecords(),gh({element:t.feedbackElement,keyframes:ta(En(En({},x),E),{translate:[`${g.x}px ${g.y}px 0`,`${m.x}px ${m.y}px 0`]}),options:{duration:au(dt(t.feedbackElement))?0:t.moved||t.feedbackElement!==t.element?s:0,easing:a}}).then(()=>{t.feedbackElement.removeAttribute(Yo),l?.finish(),t.cleanup(),requestAnimationFrame(t.restoreFocus)})}var ku,Jo,Nn,ia,hi,Tu,Mu,kn=class extends(Jo=ze,ku=[J],Jo){constructor(e,r){super(e,r),ue(this,hi),ue(this,ia,fe(Nn,8,this)),fe(Nn,11,this),this.state={initial:{},current:{}};const n=e.registry.plugins.get(fr),i=n?.register(Gh);if(i){const o=this.destroy.bind(this);this.destroy=()=>{i(),o()}}this.registerEffect(Pn(this,hi,Tu).bind(this,n)),this.registerEffect(Pn(this,hi,Mu))}};Nn=Xr(Jo);ia=new WeakMap;hi=new WeakSet;Tu=function(t){const{overlay:e}=this;if(!e||!t)return;const r=xi(e);if(r)return t.addRoot(r)};Mu=function(){var t,e,r;const{state:n,manager:i,options:o}=this,{dragOperation:s}=i,{position:a,source:l,status:d}=s;if(d.idle){n.current={},n.initial={};return}if(!l)return;const{element:c,feedback:u}=l;if(!c||u==="none"||!d.initialized||d.initializing)return;const{initial:g}=n,h=(t=this.overlay)!=null?t:c,v=Lr(h),m=Lr(c),x=!Nu(c,h),E=new kt(c,{frameTransform:x?m:null,ignoreTransforms:!x}),_={x:m.scaleX/v.scaleX,y:m.scaleY/v.scaleY};let{width:P,height:y,top:b,left:T}=E;x&&(P=P/_.x,y=y/_.y);const S=new wh(h),{transition:k,translate:A,boxSizing:W,paddingBlockStart:$,paddingBlockEnd:M,paddingInlineStart:z,paddingInlineEnd:oe,borderInlineStartWidth:_e,borderInlineEndWidth:Fe,borderBlockStartWidth:xt,borderBlockEndWidth:Ve}=At(c),Je=u==="clone",it=W==="content-box",St=it?parseInt(z)+parseInt(oe)+parseInt(_e)+parseInt(Fe):0,Ot=it?parseInt($)+parseInt(M)+parseInt(xt)+parseInt(Ve):0,he=u!=="move"&&!this.overlay?Yh(l,Je?"clone":"hidden"):null,Ht=ne(()=>Zs(i.dragOperation.activatorEvent));if(A!=="none"){const re=Ks(A);re&&!g.translate&&(g.translate=re)}if(!g.transformOrigin){const re=ne(()=>a.current);g.transformOrigin={x:(re.x-T*v.scaleX-v.x)/(P*v.scaleX),y:(re.y-b*v.scaleY-v.y)/(y*v.scaleY)}}const{transformOrigin:Ke}=g,It=b*v.scaleY+v.y,$t=T*v.scaleX+v.x;if(!g.coordinates&&(g.coordinates={x:$t,y:It},_.x!==1||_.y!==1)){const{scaleX:re,scaleY:Ie}=m,{x:Wt,y:br}=Ke;g.coordinates.x+=(P*re-P)*Wt,g.coordinates.y+=(y*Ie-y)*br}g.dimensions||(g.dimensions={width:P,height:y}),g.frameTransform||(g.frameTransform=v);const Et={x:g.coordinates.x-$t,y:g.coordinates.y-It},Rt={width:(g.dimensions.width*g.frameTransform.scaleX-P*v.scaleX)*Ke.x,height:(g.dimensions.height*g.frameTransform.scaleY-y*v.scaleY)*Ke.y},Pt={x:Et.x/v.scaleX+Rt.width,y:Et.y/v.scaleY+Rt.height},vr={left:T+Pt.x,top:b+Pt.y};h.setAttribute(gt,"true");const te=ne(()=>s.transform),B=(e=g.translate)!=null?e:{x:0,y:0},Ae=te.x*v.scaleX+B.x,mr=te.y*v.scaleY+B.y;S.set({width:P-St,height:y-Ot,top:vr.top,left:vr.left,translate:`${Ae}px ${mr}px 0`,transition:k?`${k}, translate 0ms linear`:"",scale:x?`${_.x} ${_.y}`:"","transform-origin":`${Ke.x*100}% ${Ke.y*100}%`},ke),he&&(c.insertAdjacentElement("afterend",he),o?.rootElement&&(typeof o.rootElement=="function"?o.rootElement(l):o.rootElement).appendChild(c)),Uo(h)&&(h.hasAttribute("popover")||h.setAttribute("popover","manual"),On(h),h.addEventListener("beforetoggle",Za));let ft,en,yr;const Hn=eg({placeholder:he,element:c,feedbackElement:h,frameTransform:v,transformOrigin:Ke,width:P,height:y,top:b,left:T,widthOffset:St,heightOffset:Ot,delta:Pt,styles:S,dragOperation:s,getElementMutationObserver:()=>ft,getSavedCellWidths:()=>yr,setSavedCellWidths:re=>{yr=re}}),$n=new kt(h);ne(()=>s.shape=$n);const Gn=dt(h),tn=re=>{this.manager.actions.stop({event:re})},Yn=au(Gn);Ht&&Gn.addEventListener("resize",tn),ne(()=>l.status)==="idle"&&requestAnimationFrame(()=>l.status="dragging"),he&&(Hn.observe(he),ft=Qh(c,he,Je),en=Zh(c,he,h));const Xn=(r=i.dragOperation.source)==null?void 0:r.id,no=()=>{var re;if(!Ht||Xn==null)return;const Ie=i.registry.draggables.get(Xn),Wt=(re=Ie?.handle)!=null?re:Ie?.element;sr(Wt)&&Wt.focus()},io=()=>{var re;if(ft?.disconnect(),en?.disconnect(),Hn.disconnect(),Gn.removeEventListener("resize",tn),Uo(h)&&(h.removeEventListener("beforetoggle",Za),h.removeAttribute("popover")),h.removeAttribute(gt),S.reset(),yr&&Xo(c)){const Wt=Array.from(c.cells);for(const[br,_r]of Wt.entries())_r.style.width=(re=yr[br])!=null?re:""}l.status="idle";const Ie=n.current.translate!=null;he&&(Ie||he.parentElement!==h.parentElement)&&h.isConnected&&he.replaceWith(h),he?.remove()},oo=o?.dropAnimation,wc=Dn(()=>{var re;const{transform:Ie,status:Wt}=s;if(!(!Ie.x&&!Ie.y&&!n.current.translate)&&Wt.dragging){const br=(re=g.translate)!=null?re:{x:0,y:0},_r={x:Ie.x/v.scaleX+br.x,y:Ie.y/v.scaleY+br.y},Pa=n.current.translate,xc=ne(()=>s.modifiers),so=ne(()=>{var rn;return(rn=s.shape)==null?void 0:rn.current}),Sc=Ht&&!Yn?"250ms cubic-bezier(0.25, 1, 0.5, 1)":"0ms linear";if(S.set({transition:`${k}, translate ${Sc}`,translate:`${_r.x}px ${_r.y}px 0`},ke),ft?.takeRecords(),so&&so!==$n&&Pa&&!xc.length){const rn=mt.delta(_r,Pa);s.shape=jn.from(so.boundingRectangle).translate(rn.x*v.scaleX,rn.y*v.scaleY)}else s.shape=new kt(h);n.current.translate=_r}},function(){if(s.status.dropped){this.dispose(),l.status="dropping";let re=n.current.translate;const Ie=re!=null;if(!re&&c!==h&&(re={x:0,y:0}),!re||oo===null){io();return}i.renderer.rendering.then(()=>{ng({element:c,feedbackElement:h,placeholder:he,translate:re,moved:Ie,transition:k,alignment:l.alignment,styles:S,animation:oo??void 0,getElementMutationObserver:()=>ft,cleanup:io,restoreFocus:no})})}});return()=>{io(),wc()}};Xe(Nn,4,"overlay",ku,kn,ia);cr(Nn,kn);kn.configure=Os(kn);var ig=kn,nn=!0,og=!1,Au,Iu,Ru,Wu,qt,oa,sa;Wu=(Ru=[J],tt.Forward),Iu=(Au=[J],tt.Reverse);var Tn=class{constructor(){ue(this,oa,fe(qt,8,this,nn)),fe(qt,11,this),ue(this,sa,fe(qt,12,this,nn)),fe(qt,15,this)}isLocked(t){return t===tt.Idle?!1:t==null?this[tt.Forward]===nn&&this[tt.Reverse]===nn:this[t]===nn}unlock(t){t!==tt.Idle&&(this[t]=og)}};qt=Xr(null);oa=new WeakMap;sa=new WeakMap;Xe(qt,4,Wu,Ru,Tn,oa);Xe(qt,4,Iu,Au,Tn,sa);cr(qt,Tn);var sg=[tt.Forward,tt.Reverse],el=class{constructor(){this.x=new Tn,this.y=new Tn}isLocked(){return this.x.isLocked()&&this.y.isLocked()}},ag=class extends ze{constructor(t){super(t);const e=Cn(new el);let r=null;this.signal=e,at(()=>{const{status:n}=t.dragOperation;if(!n.initialized){r=null,e.value=new el;return}const{delta:i}=t.dragOperation.position;if(r){const o={x:tl(i.x,r.x),y:tl(i.y,r.y)},s=e.peek();Dr(()=>{for(const a of pd)for(const l of sg)o[a]===l&&s[a].unlock(l);e.value=s})}r=i})}get current(){return this.signal.peek()}};function tl(t,e){return Math.sign(t-e)}var Cu,Ko,Mn,aa,Dt,Qo,Yi=class extends(Ko=qn,Cu=[J],Ko){constructor(t){super(t),ue(this,aa,fe(Mn,8,this,!1)),fe(Mn,11,this),ue(this,Dt),ue(this,Qo,()=>{if(!ie(this,Dt))return;const{element:o,by:s}=ie(this,Dt);s.y&&(o.scrollTop+=s.y),s.x&&(o.scrollLeft+=s.x)}),this.scroll=o=>{var s;if(this.disabled)return!1;const a=this.getScrollableElements();if(!a)return Ce(this,Dt,void 0),!1;const{position:l}=this.manager.dragOperation,d=l?.current;if(d){const{by:c}=o??{},u=c?{x:rl(c.x),y:rl(c.y)}:void 0,g=u?void 0:this.scrollIntentTracker.current;if(g?.isLocked())return!1;for(const h of a){const v=Qp(h,c);if(v.x||v.y){const{speed:m,direction:x}=uh(h,d,u);if(g)for(const E of pd)g[E].isLocked(x[E])&&(m[E]=0,x[E]=0);if(x.x||x.y){const{x:E,y:_}=c??x,P=E*m.x,y=_*m.y;if(P||y){const b=(s=ie(this,Dt))==null?void 0:s.by;if(this.autoScrolling&&b&&(b.x&&!P||b.y&&!y))continue;return Ce(this,Dt,{element:h,by:{x:P,y}}),Ei.schedule(ie(this,Qo)),!0}}}}}return Ce(this,Dt,void 0),!1};let e=null,r=null;const n=yi(()=>{const{position:o,source:s}=t.dragOperation;if(!o)return null;const a=lu(xi(s?.element),o.current);return a&&(e=a),a??e}),i=yi(()=>{const o=n.value,{documentElement:s}=ur(o);if(!o||o===s){const{target:a}=t.dragOperation,l=a?.element;if(l){const d=Bo(l,{excludeElement:!1});return r=d,d}}if(o){const a=Bo(o,{excludeElement:!1});return this.autoScrolling&&r&&a.size<r?.size?r:(r=a,a)}return r=null,null},ko);this.getScrollableElements=()=>i.value,this.scrollIntentTracker=new ag(t),this.destroy=t.monitor.addEventListener("dragmove",o=>{this.disabled||o.defaultPrevented||!Zs(t.dragOperation.activatorEvent)||!o.by||this.scroll({by:o.by})&&o.preventDefault()})}};Mn=Xr(Ko);aa=new WeakMap;Dt=new WeakMap;Qo=new WeakMap;Xe(Mn,4,"autoScrolling",Cu,Yi,aa);cr(Mn,Yi);function rl(t){return t>0?tt.Forward:t<0?tt.Reverse:tt.Idle}var lg=class{constructor(t){this.scheduler=t,this.pending=!1,this.tasks=new Set,this.resolvers=new Set,this.flush=()=>{const{tasks:e,resolvers:r}=this;this.pending=!1,this.tasks=new Set,this.resolvers=new Set;for(const n of e)n();for(const n of r)n()}}schedule(t){return this.tasks.add(t),this.pending||(this.pending=!0,this.scheduler(this.flush)),new Promise(e=>this.resolvers.add(e))}},dg=new lg(t=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(t):t()}),ug=10,Du=class extends ze{constructor(t,e){super(t);const r=t.registry.plugins.get(Yi);if(!r)throw new Error("AutoScroller plugin depends on Scroller plugin");this.destroy=at(()=>{if(this.disabled)return;const{position:n,status:i}=t.dragOperation;if(i.dragging)if(r.scroll()){r.autoScrolling=!0;const s=setInterval(()=>dg.schedule(r.scroll),ug);return()=>{clearInterval(s)}}else r.autoScrolling=!1})}},nl={capture:!0,passive:!0},gn,cg=class extends qn{constructor(t){super(t),ue(this,gn),this.handleScroll=()=>{ie(this,gn)==null&&Ce(this,gn,setTimeout(()=>{this.manager.collisionObserver.forceUpdate(!1),Ce(this,gn,void 0)},50))};const{dragOperation:e}=this.manager;this.destroy=at(()=>{var r,n,i;if(e.status.dragging){const s=(i=(n=(r=e.source)==null?void 0:r.element)==null?void 0:n.ownerDocument)!=null?i:document;return s.addEventListener("scroll",this.handleScroll,nl),()=>{s.removeEventListener("scroll",this.handleScroll,nl)}}})}};gn=new WeakMap;var fg=class extends ze{constructor(t,e){super(t,e),this.manager=t,this.destroy=at(()=>{var r;const{dragOperation:n}=this.manager,{nonce:i}=(r=this.options)!=null?r:{};if(n.status.initialized){const o=document.createElement("style");return i&&o.setAttribute("nonce",i),o.textContent="* { user-select: none !important; -webkit-user-select: none !important; }",document.head.appendChild(o),bo(),document.addEventListener("selectionchange",bo,{capture:!0}),()=>{document.removeEventListener("selectionchange",bo,{capture:!0}),o.remove()}}})}};function bo(){var t;(t=document.getSelection())==null||t.removeAllRanges()}var vn=Object.freeze({offset:10,keyboardCodes:{start:["Space","Enter"],cancel:["Escape"],end:["Space","Enter","Tab"],up:["ArrowUp"],down:["ArrowDown"],left:["ArrowLeft"],right:["ArrowRight"]},preventActivation(t,e){var r;const n=(r=e.handle)!=null?r:e.element;return t.target!==n}}),Nr,Mi=class extends jr{constructor(e,r){super(e),this.manager=e,this.options=r,ue(this,Nr,[]),this.listeners=new du,this.handleSourceKeyDown=(n,i,o)=>{if(this.disabled||n.defaultPrevented||!ar(n.target)||i.disabled)return;const{keyboardCodes:s=vn.keyboardCodes,preventActivation:a=vn.preventActivation}=o??{};s.start.includes(n.code)&&this.manager.dragOperation.status.idle&&(a?.(n,i)||this.handleStart(n,i,o))}}bind(e,r=this.options){return at(()=>{var i;const o=(i=e.handle)!=null?i:e.element,s=a=>{Zs(a)&&this.handleSourceKeyDown(a,e,r)};if(o)return o.addEventListener("keydown",s),()=>{o.removeEventListener("keydown",s)}})}handleStart(e,r,n){const{element:i}=r;if(!i)throw new Error("Source draggable does not have an associated element");e.preventDefault(),e.stopImmediatePropagation(),fh(i);const{center:o}=new kt(i);if(this.manager.actions.start({event:e,coordinates:{x:o.x,y:o.y},source:r}).signal.aborted)return this.cleanup();this.sideEffects();const a=ur(i),l=[this.listeners.bind(a,[{type:"keydown",listener:d=>this.handleKeyDown(d,r,n),options:{capture:!0}}])];ie(this,Nr).push(...l)}handleKeyDown(e,r,n){const{keyboardCodes:i=vn.keyboardCodes}=n??{};if(xr(e,[...i.end,...i.cancel])){e.preventDefault();const o=xr(e,i.cancel);this.handleEnd(e,o);return}xr(e,i.up)?this.handleMove("up",e):xr(e,i.down)&&this.handleMove("down",e),xr(e,i.left)?this.handleMove("left",e):xr(e,i.right)&&this.handleMove("right",e)}handleEnd(e,r){this.manager.actions.stop({event:e,canceled:r}),this.cleanup()}handleMove(e,r){var n,i;const{shape:o}=this.manager.dragOperation,s=r.shiftKey?5:1;let a={x:0,y:0},l=(i=(n=this.options)==null?void 0:n.offset)!=null?i:vn.offset;if(typeof l=="number"&&(l={x:l,y:l}),!!o){switch(e){case"up":a={x:0,y:-l.y*s};break;case"down":a={x:0,y:l.y*s};break;case"left":a={x:-l.x*s,y:0};break;case"right":a={x:l.x*s,y:0};break}(a.x||a.y)&&(r.preventDefault(),this.manager.actions.move({event:r,by:a}))}}sideEffects(){const e=this.manager.registry.plugins.get(Du);e?.disabled===!1&&(e.disable(),ie(this,Nr).push(()=>{e.enable()}))}cleanup(){ie(this,Nr).forEach(e=>e()),Ce(this,Nr,[])}destroy(){this.cleanup(),this.listeners.clear()}};Nr=new WeakMap;Mi.configure=Os(Mi);Mi.defaults=vn;var pg=Mi;function xr(t,e){return e.includes(t.code)}var Zt,hg=class extends $d{constructor(){super(...arguments),ue(this,Zt)}onEvent(t){switch(t.type){case"pointerdown":Ce(this,Zt,Fr(t));break;case"pointermove":if(!ie(this,Zt))return;const{x:e,y:r}=Fr(t),n={x:e-ie(this,Zt).x,y:r-ie(this,Zt).y},{tolerance:i}=this.options;if(i&&jo(n,i)){this.abort();return}jo(n,this.options.value)&&this.activate(t);break;case"pointerup":this.abort();break}}abort(){Ce(this,Zt,void 0)}};Zt=new WeakMap;var kr,er,gg=class extends $d{constructor(){super(...arguments),ue(this,kr),ue(this,er)}onEvent(t){switch(t.type){case"pointerdown":Ce(this,er,Fr(t)),Ce(this,kr,setTimeout(()=>this.activate(t),this.options.value));break;case"pointermove":if(!ie(this,er))return;const{x:e,y:r}=Fr(t),n={x:e-ie(this,er).x,y:r-ie(this,er).y};jo(n,this.options.tolerance)&&this.abort();break;case"pointerup":this.abort();break}}abort(){ie(this,kr)&&(clearTimeout(ie(this,kr)),Ce(this,er,void 0),Ce(this,kr,void 0))}};kr=new WeakMap;er=new WeakMap;var Mr=class{};Mr.Delay=gg;Mr.Distance=hg;var Zo=Object.freeze({activationConstraints(t,e){var r;const{pointerType:n,target:i}=t;if(!(n==="mouse"&&ar(i)&&(e.handle===i||(r=e.handle)!=null&&r.contains(i))))return n==="touch"?[new Mr.Delay({value:250,tolerance:5})]:Sh(i)&&!t.defaultPrevented?[new Mr.Delay({value:200,tolerance:0})]:[new Mr.Delay({value:200,tolerance:10}),new Mr.Distance({value:5})]},preventActivation(t,e){var r;const{target:n}=t;return n===e.element||n===e.handle||!ar(n)||(r=e.handle)!=null&&r.contains(n)?!1:zp(n)}}),Tr,Ai=class extends jr{constructor(e,r){super(e),this.manager=e,this.options=r,ue(this,Tr,new Set),this.listeners=new du,this.latest={event:void 0,coordinates:void 0},this.handleMove=()=>{const{event:n,coordinates:i}=this.latest;!n||!i||this.manager.actions.move({event:n,to:i})},this.handleCancel=this.handleCancel.bind(this),this.handlePointerUp=this.handlePointerUp.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}activationConstraints(e,r,n=this.options){const{activationConstraints:i=Zo.activationConstraints}=n??{};return typeof i=="function"?i(e,r):i}bind(e,r=this.options){return at(()=>{var i;const o=new AbortController,{signal:s}=o,a=d=>{xh(d)&&this.handlePointerDown(d,e,r)};let l=[(i=e.handle)!=null?i:e.element];r?.activatorElements&&(Array.isArray(r.activatorElements)?l=r.activatorElements:l=r.activatorElements(e));for(const d of l)d&&(bg(d.ownerDocument.defaultView),d.addEventListener("pointerdown",a,{signal:s}));return()=>o.abort()})}handlePointerDown(e,r,n){if(this.disabled||!e.isPrimary||e.button!==0||!ar(e.target)||r.disabled||mg(e)||!this.manager.dragOperation.status.idle)return;const{preventActivation:i=Zo.preventActivation}=n??{};if(i?.(e,r))return;const{target:o}=e,s=sr(o)&&o.draggable&&o.getAttribute("draggable")==="true",a=Lr(r.element),{x:l,y:d}=Fr(e);this.initialCoordinates={x:l*a.scaleX+a.x,y:d*a.scaleY+a.y};const c=this.activationConstraints(e,r,n);e.sensor=this;const u=new Ap(c,m=>this.handleStart(r,m));u.signal.onabort=()=>this.handleCancel(e),u.onEvent(e),this.controller=u;const g=zo(),h=this.listeners.bind(g,[{type:"pointermove",listener:m=>this.handlePointerMove(m,r)},{type:"pointerup",listener:this.handlePointerUp,options:{capture:!0}},{type:"dragstart",listener:s?this.handleCancel:ei,options:{capture:!0}}]),v=()=>{h(),this.initialCoordinates=void 0};ie(this,Tr).add(v)}handlePointerMove(e,r){var n,i;if(((n=this.controller)==null?void 0:n.activated)===!1){(i=this.controller)==null||i.onEvent(e);return}if(this.manager.dragOperation.status.dragging){const o=Fr(e),s=Lr(r.element);o.x=o.x*s.scaleX+s.x,o.y=o.y*s.scaleY+s.y,e.preventDefault(),e.stopPropagation(),this.latest.event=e,this.latest.coordinates=o,Ei.schedule(this.handleMove)}}handlePointerUp(e){const{status:r}=this.manager.dragOperation;if(!r.idle){e.preventDefault(),e.stopPropagation();const n=!r.initialized;this.manager.actions.stop({event:e,canceled:n})}this.cleanup()}handleKeyDown(e){e.key==="Escape"&&(e.preventDefault(),this.handleCancel(e))}handleStart(e,r){const{manager:n,initialCoordinates:i}=this;if(!i||!n.dragOperation.status.idle||r.defaultPrevented)return;if(n.actions.start({coordinates:i,event:r,source:e}).signal.aborted)return this.cleanup();r.preventDefault();const a=ur(r.target).body;a.setPointerCapture(r.pointerId);const l=ar(r.target)?[r.target,a]:a,d=this.listeners.bind(l,[{type:"touchmove",listener:ei,options:{passive:!1}},{type:"click",listener:ei},{type:"contextmenu",listener:ei},{type:"keydown",listener:this.handleKeyDown}]);ie(this,Tr).add(d)}handleCancel(e){const{dragOperation:r}=this.manager;r.status.initialized&&this.manager.actions.stop({event:e,canceled:!0}),this.cleanup()}cleanup(){this.latest={event:void 0,coordinates:void 0},ie(this,Tr).forEach(e=>e()),ie(this,Tr).clear()}destroy(){this.cleanup(),this.listeners.clear()}};Tr=new WeakMap;Ai.configure=Os(Ai);Ai.defaults=Zo;var vg=Ai;function mg(t){return"sensor"in t}function ei(t){t.preventDefault()}function yg(){}var il=new WeakSet;function bg(t){!t||il.has(t)||(t.addEventListener("touchmove",yg,{capture:!1,passive:!1}),il.add(t))}var ol={plugins:[Vh,Du,Bh,ig,fg],sensors:[vg,pg]},_g=class extends Wp{constructor(t={}){const{plugins:e=ol.plugins,sensors:r=ol.sensors,modifiers:n=[]}=t;super(ta(En({},t),{plugins:[cg,Yi,fr,...e],sensors:r,modifiers:n}))}},ju,Fu,qu,es,st,la,da,ua,Vn=class extends(es=_t,qu=[J],Fu=[J],ju=[J],es){constructor(t,e){var r=t,{element:n,effects:i=()=>[],handle:o,feedback:s="default"}=r,a=bu(r,["element","effects","handle","feedback"]);super(En({effects:()=>[...i(),()=>{var l,d;const{manager:c}=this;if(!c)return;const g=((d=(l=this.sensors)==null?void 0:l.map(Es))!=null?d:[...c.sensors]).map(h=>{const v=h instanceof jr?h:c.registry.register(h.plugin),m=h instanceof jr?void 0:h.options;return v.bind(this,m)});return function(){g.forEach(v=>v())}}]},a),e),ue(this,la,fe(st,8,this)),fe(st,11,this),ue(this,da,fe(st,12,this)),fe(st,15,this),ue(this,ua,fe(st,16,this)),fe(st,19,this),this.element=n,this.handle=o,this.feedback=s}};st=Xr(es);la=new WeakMap;da=new WeakMap;ua=new WeakMap;Xe(st,4,"handle",qu,Vn,la);Xe(st,4,"element",Fu,Vn,da);Xe(st,4,"feedback",ju,Vn,ua);cr(st,Vn);var Lu,zu,ts,Lt,ca,_o,Vu,Uu,xn,fa,pa=class extends(ts=wt,zu=[J],Lu=[J],ts){constructor(t,e){var r=t,{element:n,effects:i=()=>[]}=r,o=bu(r,["element","effects"]);const{collisionDetector:s=Nh}=o,a=d=>{const{manager:c,element:u}=this;if(!u||d===null){this.shape=void 0;return}if(!c)return;const g=new kt(u),h=ne(()=>this.shape);return g&&h?.equals(g)?h:(this.shape=g,g)},l=Cn(!1);super(ta(En({},o),{collisionDetector:s,effects:()=>[...i(),()=>{const{element:d,manager:c}=this;if(!c)return;const{dragOperation:u}=c,{source:g}=u;l.value=!!(g&&u.status.initialized&&d&&!this.disabled&&this.accepts(g))},()=>{const{element:d}=this;if(l.value&&d){const c=new Kp(d,a);return()=>{c.disconnect(),this.shape=void 0}}},()=>{var d;if((d=this.manager)!=null&&d.dragOperation.status.initialized)return()=>{this.shape=void 0}}]}),e),ue(this,xn),ue(this,ca,fe(Lt,8,this)),fe(Lt,11,this),ue(this,fa,fe(Lt,12,this)),fe(Lt,15,this),this.element=n,this.refreshShape=()=>a()}set element(t){Ce(this,xn,t,Uu)}get element(){var t;return(t=this.proxy)!=null?t:ie(this,xn,Vu)}};Lt=Xr(ts);ca=new WeakMap;xn=new WeakSet;fa=new WeakMap;_o=Xe(Lt,20,"#element",zu,xn,ca),Vu=_o.get,Uu=_o.set;Xe(Lt,4,"proxy",Lu,pa,fa);cr(Lt,pa);var $e=(t=>(t.String="string",t.JSON="json",t))($e||{});const wg={string:"String",json:"JSON"},xg=Object.values($e);var N=(t=>(t.And="and",t.Or="or",t.Xor="xor",t.Not="not",t.Eq="eq",t.In="in",t.Format="format",t.Pattern="pattern",t.MinLength="minLength",t.MaxLength="maxLength",t.Less="less",t.LessOrEq="lessOrEq",t.Greater="greater",t.GreaterOrEq="greaterOrEq",t.MultipleOf="multipleOf",t.Contains="contains",t.MinItems="minItems",t.MaxItems="maxItems",t.UniqueItems="uniqueItems",t.HasProperty="has",t.Property="property",t))(N||{});const Sg={and:"And",or:"Or",xor:"Xor",not:"Not",eq:"Equal",in:"In",format:"Format",pattern:"Pattern",minLength:"MinLength",maxLength:"MaxLength",less:"Less",lessOrEq:"LessOrEq",greater:"Greater",greaterOrEq:"GreaterOrEq",multipleOf:"MultipleOf",contains:"Contains",minItems:"MinItems",maxItems:"MaxItems",uniqueItems:"UniqueItems",has:"HasProperty",property:"Property"},ib=Object.values(N),Og=["and","or","xor"],Eg=new Set(Og),Pg=["not","contains"],Ng=new Set(Pg),kg=["format","pattern"],Tg=new Set(kg),Mg=["greater","greaterOrEq","less","lessOrEq","multipleOf","minLength","maxLength","minItems","maxItems"],Ag=new Set(Mg),Ig="aggregatedField";function Rg(t,e){D(e,!0);const r=v=>{var m=X(),x=C(m);Ge(x,()=>f(u)??Ut,()=>i,()=>e.config,()=>({get current(){return n()},set current(E){n(E)}}),()=>f(c)),w(v,m)};let n=q(e,"value",15);const i=le(),o=O(()=>Ar(i,"fieldTemplate",e.config)),s="aggregatedWidget",a=O(()=>Ar(i,s,e.config)),l=us(i,()=>e.config,()=>cs(i,e.config,n())),d=O(()=>e.uiOption("collectErrors")??!1),c=O(()=>f(d)?Nl(i,kl(i,e.config.path)):fs(i,e.config.path)),u=O(()=>ps(i,e.config,Ig));var g=X(),h=C(g);{let v=O(()=>f(u)&&r);Z(h,()=>f(o),(m,x)=>{x(m,{type:"template",showTitle:!0,useLabel:!0,widgetType:s,get uiOption(){return e.uiOption},get value(){return n()},get config(){return e.config},get errors(){return f(c)},get action(){return f(v)},children:(E,_)=>{var P=X(),y=C(P),b=()=>n()??void 0,T=S=>n(S);Z(y,()=>f(a),(S,k)=>{k(S,{type:"widget",get config(){return e.config},get errors(){return f(c)},get uiOption(){return e.uiOption},get value(){return b()},set value(A){T(A)},get handlers(){return l}})}),w(E,P)},$$slots:{default:!0}})})}w(t,g),j()}qi.aggregatedField=Rg;const Wg="booleanSelectField";function Cg(t,e){D(e,!0);const r=v=>{var m=X(),x=C(m);Ge(x,()=>f(u)??Ut,()=>n,()=>e.config,()=>({get current(){return i()},set current(E){i(E)}}),()=>f(c)),w(v,m)},n=le();let i=q(e,"value",15);const o=O(()=>Ar(n,"fieldTemplate",e.config)),s="selectWidget",a=O(()=>Ar(n,s,e.config)),l=O(()=>{const v=e.translate("yes",{}),m=e.translate("no",{});if(Array.isArray(e.config.schema.oneOf))return Ta(n,e.config,e.uiOption,{oneOf:e.config.schema.oneOf.map(E=>typeof E=="boolean"?E?{const:!0,title:v}:{const:!1,title:m}:{...E,title:E.title??(E.const===!0?v:m)})})??[];const x=e.config.schema.enum??zl;return x.length===2&&x.every(E=>typeof E=="boolean")&&e.uiOption("enumNames")===void 0?x.map((E,_)=>({id:Wc(n,e.config.path,_),label:E?v:m,value:E,disabled:!1})):Ta(n,e.config,e.uiOption,Object.setPrototypeOf({enum:x},e.config.schema))??[]}),d=us(n,()=>e.config,()=>cs(n,e.config,i())),c=O(()=>fs(n,e.config.path)),u=O(()=>ps(n,e.config,Wg));var g=X(),h=C(g);{let v=O(()=>f(u)&&r);Z(h,()=>f(o),(m,x)=>{x(m,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:s,get value(){return i()},get config(){return e.config},get errors(){return f(c)},get action(){return f(v)},children:(E,_)=>{var P=X(),y=C(P);Z(y,()=>f(a),(b,T)=>{T(b,{type:"widget",get options(){return f(l)},get errors(){return f(c)},get handlers(){return d},get uiOption(){return e.uiOption},get config(){return e.config},get value(){return i()},set value(S){i(S)}})}),w(E,P)},$$slots:{default:!0}})})}w(t,g),j()}qi.booleanSelectField=Cg;function Dg(t,e){D(e,!0);let r=q(e,"value",15),n=Rn(e,["$$slots","$$events","$$legacy","value"]);var i=()=>(Tl(r()),r()),o=s=>{r(s)};Cc(t,Fi(()=>n,{get value(){return i()},set value(s){o(s)}})),j()}qi.arrayFilesField=Dg;const jg="tagsField";function Fg(t,e){D(e,!0);const r=v=>{var m=X(),x=C(m);Ge(x,()=>f(u)??Ut,()=>o,()=>e.config,()=>({get current(){return n()},set current(E){n(E)}}),()=>f(c)),w(v,m)};let n=q(e,"value",15);const i="tagsWidget",o=le(),s=O(()=>Ar(o,"fieldTemplate",e.config)),a=O(()=>Ar(o,i,e.config)),l=us(o,()=>e.config,()=>cs(o,e.config,n())),d=O(()=>e.uiOption("collectErrors")??!1),c=O(()=>f(d)?Nl(o,kl(o,e.config.path)):fs(o,e.config.path)),u=O(()=>ps(o,e.config,jg));var g=X(),h=C(g);{let v=O(()=>f(u)&&r);Z(h,()=>f(s),(m,x)=>{x(m,{type:"template",showTitle:!0,useLabel:!0,widgetType:i,get uiOption(){return e.uiOption},get value(){return n()},get config(){return e.config},get errors(){return f(c)},get action(){return f(v)},children:(E,_)=>{var P=X(),y=C(P),b=()=>n()??void 0,T=S=>n(S);Z(y,()=>f(a),(S,k)=>{k(S,{type:"widget",get config(){return e.config},get errors(){return f(c)},get uiOption(){return e.uiOption},get value(){return b()},set value(A){T(A)},get handlers(){return l}})}),w(E,P)},$$slots:{default:!0}})})}w(t,g),j()}function qg(t,e){D(e,!0);let r=q(e,"value",15),n=Rn(e,["$$slots","$$events","$$legacy","value"]);var i=()=>(Tl(r()),r()),o=s=>{r(s)};Fg(t,Fi(()=>n,{get value(){return i()},set value(s){o(s)}})),j()}qi.arrayTagsField=qg;var Lg=R("<button><!></button>");function zg(t,e){D(e,!0);const r=le();var n=Lg();pe(n,o=>({...o}),[()=>Dc(r,e.config,"submitButton","submit",{class:"sjsf-submit-button"})]);var i=L(n);Ge(i,()=>e.children),F(n),w(t,n),j()}var Vg=R("<button><!></button>");function Ug(t,e){D(e,!0);const r=le();var n=Vg();pe(n,o=>({...o}),[()=>jc(r,e.config,{disabled:e.disabled,type:"button","data-type":e.type,class:"sjsf-button",onclick:e.onclick},Lc("button"),qc("buttons",o=>o[e.type]),Fc)]);var i=L(n);Ge(i,()=>e.children),F(n),w(t,n),j()}var Bg=R("<span>*</span>"),Hg=R("<label> <!></label>");function $g(t,e){D(e,!0);const r=le();var n=Hg();pe(n,a=>({...a}),[()=>zc(r,e.config,"labelAttributes",{class:"sjsf-label"})]);var i=L(n),o=I(i);{var s=a=>{var l=Bg();w(a,l)};be(o,a=>{e.config.required&&a(s)})}F(n),K(()=>ae(i,`${e.title??""} `)),w(t,n),j()}const Gg=Object.freeze(Object.defineProperty({__proto__:null,button:Ug,description:Wf,errorsList:qf,form:kf,help:Df,label:$g,layout:Mf,submitButton:zg,title:If},Symbol.toStringTag,{value:"Module"}));var Yg=R("<input/> <!>",1);function Xg(t,e){D(e,!0);let r=q(e,"value",15);const n=le(),i=O(()=>Vt(n,e.config,"text",e.handlers,{type:"text",class:"sjsf-text"}));var o=Yg(),s=C(o);pe(s,()=>({...f(i)}),void 0,void 0,void 0,void 0,!0);var a=I(s,2);hs(a,{get id(){return f(i).list},get config(){return e.config}}),In(s,r),w(t,o),j()}var Jg=R("<input/> <!>",1);function Kg(t,e){D(e,!0);let r=q(e,"value",15);const n=le(),i=O(()=>Vt(n,e.config,"number",e.handlers,{type:"number",class:"sjsf-number"}));var o=Jg(),s=C(o);pe(s,()=>({...f(i)}),void 0,void 0,void 0,void 0,!0);var a=I(s,2);hs(a,{get id(){return f(i).list},get config(){return e.config}}),In(s,()=>r()??null,l=>r(l??void 0)),w(t,o),j()}var Qg=R("<option> </option>"),Zg=R("<option> </option>"),ev=R("<select><!><!></select>");function tv(t,e){D(e,!0);let r=q(e,"value",15);const n=le(),i=O(()=>Il(n,e.config,"select",e.handlers,{class:"sjsf-select"})),o=O(()=>f(i).placeholder),s=O(()=>Vc(f(i),["placeholder"])),a=Al({mapper:()=>Li(e.options),value:()=>r(),update:g=>r(g)});var l=ev();pe(l,()=>({...f(s)}));var d=L(l);{var c=g=>{var h=Qg(),v=L(h,!0);F(h);var m={};K(()=>{ae(v,f(o)),m!==(m=Ma)&&(h.value=(h.__value=Ma)??"")}),w(g,h)};be(d,g=>{e.config.schema.default===void 0&&g(c)})}var u=I(d);Ye(u,17,()=>e.options,g=>g.id,(g,h)=>{var v=Zg(),m=L(v,!0);F(v);var x={};K(()=>{v.disabled=f(h).disabled,ae(m,f(h).label),x!==(x=f(h).id)&&(v.value=(v.__value=f(h).id)??"")}),w(g,v)}),F(l),Ml(l,()=>a.current,g=>a.current=g),w(t,l),j()}var rv=R('<label class="sjsf-checkbox"><input/> </label>');function nv(t,e){D(e,!0);let r=q(e,"value",15);const n=le(),i=O(()=>Vt(n,e.config,"checkbox",e.handlers,{type:"checkbox"}));var o=rv(),s=L(o);pe(s,()=>({type:"checkbox",...f(i)}),void 0,void 0,void 0,void 0,!0);var a=I(s);F(o),K(()=>ae(a,` ${e.config.title??""}`)),Uc(s,()=>r()??!1,l=>r(l)),w(t,o),j()}const iv=Object.freeze(Object.defineProperty({__proto__:null,checkboxWidget:nv,numberWidget:Kg,selectWidget:tv,textWidget:Xg},Symbol.toStringTag,{value:"Module"})),pr={...Gg,...iv};var ov=R('<label class="sjsf-checkboxes"><input/> </label>');function sv(t,e){D(e,!0);const r=[];let n=q(e,"value",15);const i=le(),o=O(()=>Vt(i,e.config,"checkboxes",e.handlers,{type:"checkbox"})),s=Wl({mapper:()=>Li(e.options),value:()=>n(),update:d=>n(d)});var a=X(),l=C(a);Ye(l,17,()=>e.options,d=>d.id,(d,c)=>{var u=ov(),g=L(u);pe(g,()=>({value:f(c).id,...f(o),id:f(c).id,disabled:f(c).disabled||f(o).disabled}),void 0,void 0,void 0,void 0,!0);var h=I(g);F(u),K(()=>ae(h,` ${f(c).label??""}`)),Rl(r,[],g,()=>(f(c).id,s.current),v=>s.current=v),w(d,u)}),w(t,a),j()}pr.checkboxesWidget=sv;var av=R("<input/> <!>",1);function lv(t,e){D(e,!0);let r=q(e,"value",15);const n=le(),i=O(()=>Vt(n,e.config,"datePicker",e.handlers,{type:"date",class:"sjsf-date-picker"}));var o=av(),s=C(o);pe(s,()=>({...f(i)}),void 0,void 0,void 0,void 0,!0);var a=I(s,2);hs(a,{get id(){return f(i).list},get config(){return e.config}}),In(s,r),w(t,o),j()}pr.datePickerWidget=lv;pr.fileWidget=zf;var dv=R("<option> </option>"),uv=R("<select></select>");function cv(t,e){D(e,!0);let r=q(e,"value",15);const n=le(),i=O(()=>Il(n,e.config,"multiSelect",e.handlers,{class:"sjsf-multi-select"})),o=Wl({mapper:()=>Li(e.options),value:()=>r(),update:a=>r(a)});var s=uv();pe(s,()=>({multiple:!0,...f(i)})),Ye(s,21,()=>e.options,a=>a.id,(a,l)=>{var d=dv(),c=L(d,!0);F(d);var u={};K(()=>{d.disabled=f(l).disabled,ae(c,f(l).label),u!==(u=f(l).id)&&(d.value=(d.__value=f(l).id)??"")}),w(a,d)}),F(s),Ml(s,()=>o.current,a=>o.current=a),w(t,s),j()}pr.multiSelectWidget=cv;var fv=R('<label class="sjsf-radio"><input/> </label>');function pv(t,e){D(e,!0);const r=[];let n=q(e,"value",15);const i=le(),o=O(()=>Vt(i,e.config,"radio",e.handlers,{type:"radio"})),s=Al({mapper:()=>Li(e.options),value:()=>n(),update:d=>n(d)});var a=X(),l=C(a);Ye(l,17,()=>e.options,d=>d.id,(d,c)=>{var u=fv(),g=L(u);pe(g,()=>({value:f(c).id,...f(o),id:f(c).id,disabled:f(c).disabled||f(o).disabled}),void 0,void 0,void 0,void 0,!0);var h=I(g);F(u),K(()=>ae(h,` ${f(c).label??""}`)),Rl(r,[],g,()=>(f(c).id,s.current),v=>s.current=v),w(d,u)}),w(t,a),j()}pr.radioWidget=pv;var hv=R("<input/>");function gv(t,e){D(e,!0);let r=q(e,"value",15);const n=le(),i=O(()=>Vt(n,e.config,"range",e.handlers,{type:"range",class:"sjsf-range"}));var o=hv();pe(o,()=>({...f(i)}),void 0,void 0,void 0,void 0,!0),In(o,()=>r()??0,s=>r(s)),w(t,o),j()}pr.rangeWidget=gv;pr.textareaWidget=Uf;var nt=(t=>(t.Shadcn4="shadcn4",t))(nt||{});const vv=Object.values(nt);[...vv];function Bu(t,e,{merge:r,unique:n}={}){let i;if(r){const[o,s]=t.length<=e.length?[t,e]:[e,t];i=new Array(s.length);for(let a=0;a<o.length;a++)i[a]=r(t[a],e[a]);for(let a=o.length;a<s.length;a++)i[a]=s[a]}else i=t.concat(e);return n?Array.from(new Set(i)):i}function mv(t,e){const r=Array.isArray(e);return Array.isArray(t)!==r?e:r?Bu(t,e,{merge:Te}):Te(t,e)}const yv=["layouts","buttons"];function Te(t,e){const r=Object.assign({},t,e),n=new Set(Object.keys(t)).intersection(new Set(Object.keys(e)));for(const i of n){const o=t[i],s=e[i];if(i==="ui:options"||i==="ui:components"||i==="ui:globalOptions"){r[i]=Object.assign({},o,s);for(const a of yv)o&&s&&a in o&&a in s&&(r[i][a]=Object.assign({},o[a],s[a]))}else i==="items"?r.items=mv(o,s):i==="anyOf"||i==="oneOf"?r[i]=Bu(o,s,{merge:Te}):r[i]=Te(o,s)}return r}const{mergeSchemaDefinitions:bv}=yf();function Ne(t,e){return bv(t,e)}const _v=new Set(["date-time","time","date","duration","email","idn-email","hostname","idn-hostname","ipv4","ipv6","uuid","uri","uri-reference","iri","iri-reference","uri-template","json-pointer","relative-json-pointer","regex"]);function wv(t){return _v.has(t)}function G(t){return()=>t}var p=(t=>(t.Object="object",t.ObjectProperty="object-property",t.ObjectPropertyDependency="object-property-dependency",t.Predicate="predicate",t.Operator="operator",t.Array="array",t.Grid="grid",t.Enum="enum",t.MultiEnum="multi-enum",t.EnumItem="enum-item",t.String="string",t.Number="number",t.Boolean="boolean",t.File="file",t.Tags="tags",t.Range="range",t.QrCode="qr-code",t))(p||{});const Be={type:"object",properties:{title:{title:"Title",type:"string"},description:{title:"Description",type:"string"},required:{title:"Required",type:"boolean"}},required:["title","required"]},ha={type:"object",title:"String options",properties:{widget:{title:"Widget",type:"string",default:"textWidget"},help:{title:"Help",type:"string"},default:{title:"Default value",type:"string"},format:{type:"string",title:"Format",description:"JSON Schema string formats"},maxLength:{title:"Max length",type:"number",minimum:0},minLength:{title:"Min length",type:"number",minimum:0},pattern:{title:"Pattern",description:"Regular expression, preferably using the ECMA-262 flavour",type:"string",format:"regexp"}},required:["widget"],dependencies:{widget:{oneOf:[{type:"object",properties:{widget:{const:"textWidget"},inputType:{title:"Input type",enum:["color","date","datetime-local","email","hidden","month","password","tel","text","time","url","week"]},placeholder:{title:"Placeholder",type:"string"}}},{properties:{widget:{not:{const:"textWidget"}}}}]}}},ga={title:"Number options",type:"object",properties:{integer:{title:"Integer",type:"boolean"},widget:{title:"Widget",type:"string",default:"numberWidget"},help:{title:"Help",type:"string"},default:{title:"Default value",type:"number"},minimum:{title:"Minimum",type:"number"},maximum:{title:"Maximum",type:"number"},multipleOf:{title:"Multiple of",type:"number"}},required:["widget"]},Hu={type:"object",title:"QR code options",properties:{widget:{title:"Widget",type:"string",default:"textWidget"},placeholder:{title:"Placeholder",type:"string"},help:{title:"Help",type:"string"},default:{title:"Default value",type:"string"}},required:["widget"]};function Jr(){return crypto.randomUUID()}const xv={[p.Object]:t=>({id:t,type:p.Object,properties:[],options:{title:"Group title",required:!0}}),[p.Array]:t=>({id:t,type:p.Array,item:void 0,options:{title:"List title",required:!0}}),[p.Grid]:t=>({id:t,type:p.Grid,cells:[],width:3,height:4,options:{title:"Grid title",required:!0,cellSize:"auto",gap:"1rem",additionalStyles:"align-items: center;"}}),[p.Enum]:t=>({id:t,type:p.Enum,valueType:$e.String,items:[],options:{title:"Choice field",required:!0,widget:"radioWidget"}}),[p.MultiEnum]:t=>({id:t,type:p.MultiEnum,valueType:$e.String,items:[],options:{title:"Multi choice field",required:!0,widget:ma.properties.widget.default}}),[p.String]:t=>({id:t,type:p.String,options:{title:"String field",required:!0,widget:ha.properties.widget.default}}),[p.Number]:t=>({id:t,type:p.Number,options:{title:"Number field",required:!0,widget:ga.properties.widget.default}}),[p.Boolean]:t=>({id:t,type:p.Boolean,options:{title:"Boolean field",required:!0,widget:ya.properties.widget.default}}),[p.File]:t=>({id:t,type:p.File,options:{title:"File field",required:!0,widget:Ii.properties.widget.default,native:!0}}),[p.Tags]:t=>({id:t,type:p.Tags,options:{title:"Tags field",required:!0,widget:Xu.properties.widget.default}}),[p.Range]:t=>va(t,bt.String,{title:"Range field",required:!0,widget:Gu.properties.widget.default}),[p.QrCode]:t=>({id:t,type:p.QrCode,options:{title:"QR code",required:!0,widget:Hu.properties.widget.default}})};function ve(t){return xv[t](Jr())}function ob(t){const e=Jr(),r=p.Operator;switch(t){case N.And:case N.Or:case N.Xor:return{id:e,type:r,op:t,operands:[]};case N.Contains:case N.Not:return{id:e,type:r,op:t,operand:void 0};case N.Eq:return{id:e,type:r,op:t,value:""};case N.In:return{id:e,type:r,op:t,values:[]};case N.Format:return{id:e,type:r,op:t,value:""};case N.Pattern:return{id:e,type:r,op:t,value:""};case N.UniqueItems:return{id:e,type:r,op:t};case N.HasProperty:return{id:e,type:r,op:t,propertyId:void 0};case N.Property:return{id:e,type:r,op:t,propertyId:void 0,operator:void 0};default:return{id:e,type:r,op:t,value:void 0}}}function rs(t,e){return{id:Jr(),type:p.EnumItem,label:t,value:e}}function Xi(t){return{id:Jr(),type:p.ObjectProperty,property:t,complementary:void 0,dependencies:[]}}function $u(){return{id:Jr(),type:p.Predicate,operator:void 0}}function Sv(){return{id:Jr(),type:p.ObjectPropertyDependency,predicate:$u(),properties:[]}}var bt=(t=>(t.String="string",t.Number="number",t))(bt||{});const ns={string:"String",number:"Number"};p.String,p.Number;const Gu={title:"Range options",type:"object",properties:{widget:{title:"Widget",type:"string",default:"dateRangePickerWidget"},help:{title:"Help",type:"string"}},required:["widget"]},Ov={string:"dateRangePickerWidget",number:"rangeSliderWidget"};function ti(t,e){const r=ve(t);return r.options.title=e,r}function va(t,e,r){const n={id:t,type:p.Range,options:{...r,widget:Ov[e]}};switch(e){case"string":return{...n,valueType:e,startNode:ti(p.String,"Start"),endNode:ti(p.String,"End")};case"number":return{...n,valueType:e,startNode:ti(p.Number,"Start"),endNode:ti(p.Number,"End")}}}const Ev={title:"Group options",type:"object",properties:{}},Pv={title:"List options",type:"object",properties:{defaultValue:{title:"Default value",type:"array",items:{type:"string",format:"json"}},minItems:{title:"Min items",type:"number"},maxItems:{title:"Max items",type:"number"},uniqueItems:{title:"Unique items",type:"boolean"}}},Nv={title:"Grid options",type:"object",properties:{cellSize:{title:"Cell size",enum:["1fr","auto"]},gap:{title:"Gap",type:"string"},additionalStyles:{title:"Additional styles",type:"string"}},required:["cellSize","gap"]},Yu={title:"Choice options",type:"object",properties:{widget:{title:"Widget",type:"string",default:"selectWidget"},help:{title:"Help",type:"string"},defaultValue:{title:"Default value",type:"string",format:"json"}},required:["widget"],dependencies:{widget:{oneOf:[{type:"object",properties:{widget:{const:"radioWidget"},inline:{title:"Inline",type:"boolean"}}},{properties:{widget:{not:{const:"radioWidget"}}}}]}}},ma={title:"Multi choice options",type:"object",properties:{widget:{title:"Widget",type:"string",default:"checkboxesWidget"},help:{title:"Help",type:"string"},defaultValue:{title:"Default value",type:"array",uniqueItems:!0,items:{type:"string",format:"json"}},minItems:{title:"Min items",type:"number"},maxItems:{title:"Max items",type:"number"}},required:["widget"],dependencies:{widget:{oneOf:[{type:"object",properties:{widget:{const:"checkboxesWidget"},inline:{title:"Inline",type:"boolean"}}},{properties:{widget:{not:{const:"checkboxesWidget"}}}}]}}},ya={title:"Boolean options",type:"object",properties:{widget:{title:"Widget",type:"string",default:"checkboxWidget"},help:{title:"Help",type:"string"},default:{title:"Default value",type:"boolean"}},required:["widget"]},Ii={title:"File options",type:"object",properties:{widget:{title:"Widget",type:"string",default:"fileWidget"},help:{title:"Help",type:"string"},native:{title:"Native",type:"boolean",default:!0},multiple:{title:"Multiple",type:"boolean"}},dependencies:{multiple:{oneOf:[{type:"object",properties:{multiple:{const:!0},minItems:{title:"Min items",type:"number"},maxItems:{title:"Max items",type:"number"},uniqueItems:{title:"Unique items",type:"boolean"}}},{type:"object",properties:{multiple:{const:!1}}}]}},required:["widget"]},Xu={title:"Tags options",type:"object",properties:{widget:{title:"Widget",type:"string",default:"tagsWidget"},help:{title:"Help",type:"string"},default:{title:"Default value",type:"array",uniqueItems:!0,items:{type:"string"}},minItems:{title:"Min items",type:"number"},maxItems:{title:"Max items",type:"number"}},required:["widget"]},kv={[p.Object]:"Group",[p.Grid]:"Grid",[p.Array]:"List",[p.Enum]:"Choice",[p.MultiEnum]:"Multi choice",[p.String]:"String",[p.Number]:"Number",[p.Boolean]:"Boolean",[p.File]:"File",[p.Tags]:"Tags",[p.Range]:"Range",[p.QrCode]:"QR code"},Tv={[p.Object]:Ne(Be,Ev),[p.Array]:Ne(Be,Pv),[p.Grid]:Ne(Be,Nv),[p.Enum]:Ne(Be,Yu),[p.MultiEnum]:Ne(Be,ma),[p.String]:Ne(Be,ha),[p.Number]:Ne(Be,ga),[p.Boolean]:Ne(Be,ya),[p.File]:Ne(Be,Ii),[p.Tags]:Ne(Be,Xu),[p.Range]:Ne(Be,Gu),[p.QrCode]:Ne(Be,Hu)},Qe={"ui:options":{titleAttributes:{class:"font-medium text-md py-2"}},description:{"ui:components":{textWidget:"textareaWidget"}},defaultValue:{"ui:options":{titleAttributes:{class:"font-medium text-md"}}},widget:{"ui:components":{stringField:"enumField"}}},Mv=Object.keys(Be.properties);function Yt(...t){return{order:Mv.concat(t)}}const Av={[p.Object]:Qe,[p.Array]:Te(Qe,{defaultValue:{items:{"ui:options":{shadcn4Text:{placeholder:"Input JSON value"}}}}}),[p.Grid]:Te(Qe,{cellSize:{"ui:components":{stringField:"enumField"}},gap:{"ui:options":{shadcn4Text:{placeholder:"Input CSS unit"}}}}),[p.Enum]:Te(Qe,{"ui:options":Yt("widget","inline","*"),defaultValue:{"ui:options":{shadcn4Text:{placeholder:"Input JSON value"}}}}),[p.MultiEnum]:Te(Qe,{"ui:options":Yt("widget","inline","*"),defaultValue:{items:{"ui:options":{shadcn4Text:{placeholder:"Input JSON value"}}},"ui:options":{orderable:!1}}}),[p.String]:Te(Qe,{"ui:options":Yt("widget","inputType","placeholder","*"),inputType:{"ui:components":{stringField:"enumField"}}}),[p.Number]:Te(Qe,{"ui:options":Yt("widget","*")}),[p.Boolean]:Te(Qe,{"ui:options":Yt("widget","*"),defaultValue:{"ui:components":{booleanField:"booleanSelectField",selectWidget:"radioWidget"},"ui:options":{useLabel:!1,enumNames:["true","false"],shadcn4RadioGroup:{style:"display: flex;"}}}}),[p.File]:Te(Qe,{"ui:options":Yt("widget","native","multiple","*","help")}),[p.Tags]:Qe,[p.Range]:Qe,[p.QrCode]:Te(Qe,{"ui:options":Yt("placeholder","help","default","*")})};function Ju(t){return Ng.has(t.op)}function is(t){return Eg.has(t.op)}function Iv(t){return Tg.has(t.op)}function Rv(t){return Ag.has(t.op)}const hr=t=>e=>e.op===t,Wv=hr(N.Eq),Cv=hr(N.In);hr(N.Pattern);const Ku=hr(N.Contains),Dv=hr(N.UniqueItems),Qu=hr(N.Property),jv=hr(N.HasProperty),Kr=t=>t.type in kv,Oe=t=>e=>e.type===t,Un=Oe(p.Object),Bn=Oe(p.Array),ba=Oe(p.Grid),Fv=Oe(p.Predicate),Zu=Oe(p.Operator),Ji=Oe(p.ObjectProperty),qv=Oe(p.ObjectPropertyDependency),_a=t=>Kr(t)||Ji(t),sl=Oe(p.EnumItem),Lv=Oe(p.Enum),Ri=Oe(p.MultiEnum),Wi=Oe(p.String),ec=Oe(p.Number),tc=Oe(p.Boolean),rc=Oe(p.File),nc=Oe(p.Tags),ic=Oe(p.Range),zv=Oe(p.QrCode);function Ci(t){return Kr(t)?t.options.title:void 0}function oc(t){const e=new Map;if(Un(t))for(let r=0;r<t.properties.length;r++){const{id:n,property:i}=t.properties[r];e.set(n,Ci(i)??`Property ${r+1}`)}else if(ba(t))for(let r=0;r<t.cells.length;r++){const{node:n,x:i,y:o}=t.cells[r];e.set(n.id,Ci(n)??`Cell (${i+1}, ${o+1})`)}else ic(t)&&(e.set(t.startNode.id,"Start"),e.set(t.endNode.id,"End"));return e}function zr(t,e){return Un(t)?t.properties.find(r=>r.id===e)?.property:ba(t)?t.cells.find(r=>r.node.id===e)?.node:ic(t)?t.startNode.id===e?t.startNode:t.endNode.id===e?t.endNode:void 0:null}const Vv=zl.map((t,e)=>({id:`bool::${e}`,label:String(t),value:JSON.stringify(t)}));function wa(t){if(tc(t))return Vv;if(Lv(t)||Ri(t)){const e=t.valueType===$e.JSON;return t.items.map(r=>({id:r.id,label:r.label,value:e?r.value:JSON.stringify(r.value)}))}return[]}function Ki(t){if(Bn(t))return t.item}function Ft(t,e,r){const n=t.peek("affectedNode");if(n===void 0)t.addError(e,"It looks like you deleted the field to which this operator was applied");else return r(n)}const al={"enum-member":"does not correspond to the possible field values","json-object":"should be a JSON object","json-array":"should be a JSON array","json-string":"should be a JSON string","json-number":"should be a JSON number",boolean:"should be a boolean"};function ll(t,e){return Ft(t,e,r=>{const n=wa(r);return i=>{if(n.length>0){if(n.find(o=>o.value===i)===void 0)return"enum-member"}else if(Un(r)||ba(r)){if(!bf(i))return"json-object"}else if(Bn(r)){if(!uo(i))return"json-array"}else if(Wi(r)||zv(r)){if(!Da(i))return"json-string"}else if(ec(r)){if(!_f(i))return"json-number"}else if(tc(r)){if(!wf(i))return"boolean"}else if(rc(r)){if(r.options.multiple){if(!uo(i))return"json-array"}else if(!Da(i))return"json-string"}else if(nc(r)&&!uo(i))return"json-array"}})}function wo(t,e){e.operands.length===0?t.addError(e,"Missing operands"):e.operands.length===1&&t.addWarning(e,"An operator with one operand is redundant");for(let r=0;r<e.operands.length;r++)An(t,e.operands[r])}function Uv(t,e){e.operand===void 0?t.addError(e,"Missing operand"):An(t,e.operand)}function xa(t){return(e,r)=>{r.value===void 0?e.addError(r,"Missing value"):Ft(e,r,n=>{t(e,r,n)})}}const dl=xa((t,e,r)=>{Wi(r)||t.addError(e,"The operator can only be applied to string field")}),on=xa((t,e,r)=>{ec(r)||t.addError(e,"The operator can only be applied to number field")}),ul=xa((t,e,r)=>{Bn(r)||t.addError(e,"The operator can only be applied to list field")}),Bv={[N.And]:wo,[N.Or]:wo,[N.Xor]:wo,[N.Not]:Uv,[N.Eq]:(t,e)=>{if(!Eo(e.value))t.addError(e,"The value must be in JSON format");else{const r=ll(t,e)?.(e.value);r!==void 0&&t.addError(e,`The entered value ${al[r]}`)}},[N.In]:(t,e)=>{if(e.values.length===0)t.addError(e,"Add at least one value");else{e.values.length===1&&t.addWarning(e,"The `In` operator with one value is redundant, use the `Equal` operator");const r=e.values.filter(n=>!Eo(n));if(r.length>0)t.addError(e,`The following values must be in JSON format: "${r.join('", "')}"`);else{const n=ll(t,e);if(n!==void 0){const i=new Set,o=[];for(let s=0;s<e.values.length;s++){const a=e.values[s],l=n(a);l!==void 0?t.addError(e,`The value "${a}" ${al[l]}`):i.has(a)?o.push(a):i.add(a)}o.length>0&&t.addError(e,`Duplicated values: '${o.join("', '")}'`)}}}},[N.Format]:(t,e)=>{wv(e.value)||t.addWarning(e,"Unknown JSON Schema format"),Ft(t,e,r=>{Wi(r)||t.addError(e,"The operator can only be applied to string fields")})},[N.Pattern]:(t,e)=>{Vl(e.value)?e.value.length===0&&t.addWarning(e,"It looks like you forgot to fill in the value, if not, then ignore this warning message"):t.addError(e,"Invalid regular expression"),Ft(t,e,r=>{Wi(r)||t.addError(e,"The operator can only be applied to string fields")})},[N.MinLength]:dl,[N.MaxLength]:dl,[N.Less]:on,[N.LessOrEq]:on,[N.Greater]:on,[N.GreaterOrEq]:on,[N.MultipleOf]:on,[N.Contains]:(t,e)=>{const r=e.operand;r===void 0?t.addError(e,"Missing operand"):Ft(t,e,n=>{const i=Ki(n);if(i===void 0)t.addError(e,"Child element of the applied field not found");else{var o=[];try{const d=ot(o,t.push("affectedNode",i));An(t,r)}catch(s){var a=s,l=!0}finally{pt(o,a,l)}}})},[N.MinItems]:ul,[N.MaxItems]:ul,[N.UniqueItems]:(t,e)=>{Ft(t,e,r=>{Bn(r)||t.addError(e,"The operator can only be applied to list field")})},[N.HasProperty]:(t,e)=>{const r=e.propertyId;r===void 0?t.addError(e,"Missing value"):Ft(t,e,n=>{const i=zr(n,r);i===null?t.addError(e,`The operator cannot be applied to "${n.type}" field`):i===void 0&&t.addError(e,"Specified field not found")})},[N.Property]:(t,e)=>{const r=e.propertyId;r===void 0?t.addError(e,"Missing value"):Ft(t,e,n=>{const i=zr(n,r);if(i===null)t.addError(e,`The operator cannot be applied to "${n.type}" field`);else if(i===void 0)t.addError(e,"Specified field not found");else if(e.operator===void 0)t.addError(e,"Missing operand");else{var o=[];try{const d=ot(o,t.push("affectedNode",i));An(t,e.operator)}catch(s){var a=s,l=!0}finally{pt(o,a,l)}}})}};function An(t,e){Bv[e.op](t,e)}function cl(t,e){if(e.items.length===0)t.addError(e,"Add at least one element");else{var r=[];try{e.items.length===1&&t.addWarning(e,"Use the `Boolean` field if you need to select from a single item");const s=new Set;const a=[];const l=new Set;const d=[];const c=ot(r,t.push("enumValueType",e.valueType));for(let u=0;u<e.items.length;u++){const g=e.items[u];s.has(g.label)?a.push(g):s.add(g.label),s.add(g.label),l.has(g.value)?d.push(g):l.add(g.value),ht(t,g)}for(const u of d)t.addError(u,"Duplicated value");for(const u of a)t.addWarning(u,"Duplicated label")}catch(n){var i=n,o=!0}finally{pt(r,i,o)}}}const Hv={[p.Object]:(t,e)=>{e.properties.length===0&&t.addError(e,"Properties are missing");for(let r=0;r<e.properties.length;r++)ht(t,e.properties[r])},[p.ObjectProperty]:(t,e)=>{var o=[];try{e.complementary!==void 0&&e.dependencies.find(d=>d.id===e.complementary)===void 0?t.addError(e,"Invalid `Complement` mark, try selecting/unselecting this mark"):e.dependencies.length===1&&(e.complementary===void 0?e.dependencies[0].predicate?.operator===void 0&&t.addError(e.dependencies[0],"The only dependency should be marked as `Complement`"):Kr(e.property)&&e.property.options.required?t.addWarning(e.dependencies[0],"Redundant dependency, because the condition (presence of a value in the parent field) is always true for required field"):Un(e.property)&&t.addWarning(e.dependencies[0],"Dependency on objects without specifying a predicate is meaningless, define a predicate."));const r=[];ht(t,e.property);const n=ot(o,t.push("complementary",e.complementary));const i=ot(o,t.push("affectedNode",e.property));for(let d=0;d<e.dependencies.length;d++){const c=e.dependencies[d];c.properties.length===0&&r.push(c.id),ht(t,e.dependencies[d])}r.length===1?e.dependencies.length===1&&t.addWarning(e.dependencies[0],"Redundant dependency"):r.length>1&&t.addWarning(e,"You have more than one empty dependency, perhaps you can merge them using the `Or` operator")}catch(s){var a=s,l=!0}finally{pt(o,a,l)}},[p.ObjectPropertyDependency]:(t,e)=>{t.peek("complementary")===e.id||(e.predicate===void 0?t.addError(e,"Specify the predicate or mark the dependency as `Complement`"):ht(t,e.predicate));for(let n=0;n<e.properties.length;n++)ht(t,e.properties[n])},[p.Predicate]:(t,e)=>{e.operator===void 0?t.addError(e,"Specify the operator"):ht(t,e.operator)},[p.Operator]:An,[p.Array]:(t,e)=>{e.item===void 0?t.addError(e,"Missing item definition"):ht(t,e.item)},[p.Grid]:(t,e)=>{if(e.cells.length===0)t.addError(e,"Add at least one element");else for(let r=0;r<e.cells.length;r++)ht(t,e.cells[r].node)},[p.Enum]:cl,[p.MultiEnum]:cl,[p.EnumItem]:(t,e)=>{e.label.length===0&&t.addWarning(e,"Try not to create empty labels");const r=t.peek("enumValueType");r===void 0?t.addError(e,"This node appears to be misplaced, remove it"):r===$e.JSON&&!Eo(e.value)&&t.addError(e,"This value should match JSON format")},[p.String]:wr,[p.Number]:wr,[p.Boolean]:wr,[p.File]:wr,[p.Tags]:wr,[p.Range]:(t,e)=>{const r=t.getAvailableRangeValueTypes();r.length===0?t.addError(e,"This node cannot be used with the current theme."):r.includes(e.valueType)||t.addError(e,`Invalid range value type "${ns[e.valueType]}", one of the following values is expected: ${JSON.stringify(r.map(n=>ns[n]))}`)},[p.QrCode]:wr};function ht(t,e){Kr(e)&&t.validateCustomizableNodeOptions(e),Hv[e.type](t,e)}function ce(t,e){if(t===void 0)throw new Error(`${e} is undefined`)}function $v(t,e,{complementary:r,dependencies:n}){if(n.length===0)return;if(n.length===1){const a=n[0],l=yt(t,a);if(r===void 0){ce(a.predicate,"property dependency predicate");const c=yt(t,a.predicate);return{oneOf:[Ne({properties:{[e]:c}},l),{properties:{[e]:{not:c}}}]}}if(a.id!==r)throw new Error("Invalid node dependencies");const d=t.peek("affectedNode");if(ce(d,"property dependencies affected node"),Un(d))throw new Error("This dependency on the object does not make sense");return Bn(d)||Ri(d)||rc(d)&&d.options.multiple||nc(d)?{oneOf:[Ne({properties:{[e]:{minItems:1}}},l),{properties:{[e]:{maxItems:0}}}]}:l}let i=-1;const o=[],s=n.map((a,l)=>{if(a.id===r)return i=l,yt(t,a);ce(a.predicate,"dependency predicate");const d=yt(t,a.predicate);return o.push(d),Ne({properties:{[e]:d}},yt(t,a))});if(i>=0){const a=s[i],l=a.properties??={};l[e]={not:o.length===1?o[0]:{anyOf:o}}}return{oneOf:s}}function fl(t,e){const r=t.peek("scope");ce(r,"object scope");const n=new Map,i=new Map,o=[];for(let u=0;u<e.properties.length;u++){var a=[];try{const g=e.properties[u];if(!Kr(g.property))throw new Error;const h=r.id(g.property);n.set(h,yt(t,g.property));g.property.options.required&&o.push(h);const v=ot(a,t.push("affectedNode",g.property));const m=$v(t,h,g);m!==void 0&&i.set(h,m)}catch(l){var d=l,c=!0}finally{pt(a,d,c)}}const s={type:"object",properties:Object.fromEntries(n)};return o.length>0&&(s.required=o),i.size>0&&(s.dependencies=Object.fromEntries(i)),s}const Gv={[N.And]:(t,e)=>({allOf:e.operands.map(r=>tr(t,r))}),[N.Or]:(t,e)=>({anyOf:e.operands.map(r=>tr(t,r))}),[N.Xor]:(t,e)=>({oneOf:e.operands.map(r=>tr(t,r))}),[N.Not]:(t,e)=>(ce(e.operand,"not operator operand"),{not:tr(t,e.operand)}),[N.Eq]:(t,e)=>{const r=t.peek("affectedNode");ce(r,"eq operator affected node");const n={const:JSON.parse(e.value)};return Ri(r)?{items:n,minItems:1}:n},[N.In]:(t,e)=>{const r=t.peek("affectedNode");ce(r,"in operator affected node");const n={enum:e.values.map(i=>JSON.parse(i))};return Ri(r)?{items:n,minItems:1}:n},[N.Format]:(t,e)=>({format:e.value}),[N.Pattern]:(t,e)=>({pattern:e.value}),[N.MinLength]:(t,e)=>({minLength:e.value}),[N.MaxLength]:(t,e)=>({maxLength:e.value}),[N.Less]:(t,e)=>({exclusiveMaximum:e.value}),[N.LessOrEq]:(t,e)=>({maximum:e.value}),[N.Greater]:(t,e)=>({exclusiveMinimum:e.value}),[N.GreaterOrEq]:(t,e)=>({minimum:e.value}),[N.MultipleOf]:(t,e)=>({multipleOf:e.value}),[N.Contains]:(t,{operand:e})=>{var o=[];try{ce(e,"contains operator operand");const r=t.peek("affectedNode");ce(r,"contains operator affected node");const n=Ki(r);ce(n,"contains operator affected node child");const i=ot(o,t.push("affectedNode",n));return{contains:tr(t,e)}}catch(s){var a=s,l=!0}finally{pt(o,a,l)}},[N.MinItems]:(t,e)=>({minItems:e.value}),[N.MaxItems]:(t,e)=>({maxItems:e.value}),[N.UniqueItems]:(t,e)=>({uniqueItems:!0}),[N.HasProperty]:(t,{propertyId:e})=>{ce(e,"has property operator property id");const r=t.propertyNames.get(e);return ce(r,"has property operator property name"),{required:[r]}},[N.Property]:(t,{propertyId:e,operator:r})=>{var a=[];try{ce(e,"property operator property id");ce(r,"property operator operand");const n=t.peek("affectedNode");ce(n,"property operator affected node");const i=zr(n,e);if(!i)throw new Error(`Property "${e}" not found in "${n.type}" node`);const o=t.propertyNames.get(i.id);ce(o,"property operator property name");const s=ot(a,t.push("affectedNode",i));return{properties:{[o]:tr(t,r)},required:[o]}}catch(l){var d=l,c=!0}finally{pt(a,d,c)}}};function tr(t,e){return Gv[e.op](t,e)}function os(t,e){return t===$e.JSON?e.map(r=>JSON.parse(r.value)):e.map(r=>r.value)}function pl(t){if(!(t===void 0||t.length===0))return t.map(e=>JSON.parse(e))}const Yv=["title","description","minItems","maxItems","uniqueItems","default","minLength","maxLength","pattern","minimum","exclusiveMinimum","maximum","exclusiveMaximum","multipleOf"];function Ze(t,e){for(const r of Yv){const n=e[r];n!==void 0?t[r]=n:t[r]===void 0&&delete t[r]}return t}const Xv={[p.Object]:(t,e)=>{var n=[];try{const r=ot(n,t.createAndPushScope());return Ze(fl(t,e),e.options)}catch(i){var o=i,s=!0}finally{pt(n,o,s)}},[p.ObjectProperty]:()=>{throw new Error("Unexpected object property node")},[p.ObjectPropertyDependency]:fl,[p.Predicate]:(t,e)=>(ce(e.operator,"predicate operator"),yt(t,e.operator)),[p.Operator]:tr,[p.Array]:(t,{item:e,options:r})=>(ce(e,"array item"),Ze({type:"array",items:yt(t,e),default:pl(r.defaultValue)},r)),[p.Grid]:(t,{cells:e,options:r})=>{var a=[];try{const n=ot(a,t.createAndPushScope());const i=new Map;const o=[];for(let u=0;u<e.length;u++){const g=e[u].node;if(!Kr(g))throw new Error;const h=n.id(g);i.set(h,yt(t,g)),g.options.required&&o.push(h)}const s={type:"object",properties:Object.fromEntries(i)};o.length>0&&(s.required=o);return Ze(s,r)}catch(l){var d=l,c=!0}finally{pt(a,d,c)}},[p.Enum]:(t,{items:e,valueType:r,options:n})=>Ze({enum:os(r,e),default:n.defaultValue&&JSON.parse(n.defaultValue)},n),[p.MultiEnum]:(t,{items:e,options:r,valueType:n})=>Ze({type:"array",uniqueItems:!0,items:{enum:os(n,e)},default:pl(r.defaultValue)},r),[p.EnumItem]:()=>{throw new Error("Unexpected enum item node")},[p.String]:(t,{options:e})=>Ze({type:"string"},e),[p.Number]:(t,{options:e})=>Ze({type:e.integer?"integer":"number"},e),[p.Boolean]:(t,{options:e})=>Ze({type:"boolean"},e),[p.File]:(t,{options:e})=>{const r=e.native?{}:{type:"string",format:"data-url"};return Ze(e.multiple?{type:"array",items:r}:r,e)},[p.Tags]:(t,{options:e})=>Ze({type:"array",uniqueItems:!0,items:{type:"string"}},e),[p.Range]:(t,{options:e,startNode:r,endNode:n,valueType:i})=>{t.propertyNames.set(r.id,"start"),t.propertyNames.set(n.id,"end");const o={type:i},s={type:"object",properties:{start:o,end:o}};return e.required&&(s.required=["start","end"]),Ze(s,e)},[p.QrCode]:(t,{options:e})=>Ze({type:"string"},e)};function yt(t,e){return Xv[e.type](t,e)}const Jv=["help"];function gi(t,e){for(const r of Jv){if(!(r in e))continue;const n=e[r];n!==void 0&&(t[r]=n)}return t}const xo=()=>{throw new Error("Invalid node")};function Nt(t,e,r={}){return{"ui:components":t.uiComponents(e),"ui:options":gi(Object.assign(t.useLabelOptions(e),r),e.options)}}function hl(t,e){const r=t===$e.JSON?JSON.stringify:Oo;return e.every(n=>r(n.label)===n.value)?{}:{enumNames:e.map(n=>n.label)}}const Kv={[p.Object]:(t,{options:e,properties:r})=>{const n=t.propertiesOrder;t.propertiesOrder=[];const i={};let o=!1;for(const s of r)o||=s.dependencies.length>0,Object.assign(i,rr(t,s));return i["ui:options"]=gi(o?{order:t.propertiesOrder}:{},e),t.propertiesOrder=n,i},[p.ObjectProperty]:(t,{dependencies:e,property:r})=>{const n=t.propertyNames.get(r.id);ce(n,"object property name"),t.propertiesOrder.push(n);const i={[n]:rr(t,r)};for(const o of e)Object.assign(i,rr(t,o));return i},[p.ObjectPropertyDependency]:(t,{properties:e})=>{const r={};for(const n of e)Object.assign(r,rr(t,n));return r},[p.Predicate]:xo,[p.Operator]:xo,[p.Array]:(t,{options:e,item:r})=>(ce(r,"array item"),{"ui:options":gi({},e),items:rr(t,r)}),[p.Grid]:(t,{options:e,height:r,width:n,cells:i})=>Object.assign({"ui:options":gi({layouts:{"object-properties":{style:`display: grid; grid-template-columns: repeat(${n}, ${e.cellSize}); grid-template-rows: repeat(${r}, ${e.cellSize}); gap: ${e.gap};${e.additionalStyles??""}`}}},e)},...i.map(({node:o,x:s,y:a,w:l,h:d})=>{const c=rr(t,o),u=t.propertyNames.get(o.id);ce(u,"grid cell name");const g={"ui:options":{layouts:{"object-property":{style:`grid-column: ${s+1} / span ${l}; grid-row: ${a+1} / span ${d};`}}}};return{[u]:c?Te(c,g):g}})),[p.Enum]:(t,e)=>Nt(t,e,Object.assign(hl(e.valueType,e.items),e.options.widget=="radioWidget"?t.radioWidgetOptions(e.options.inline??!1):void 0)),[p.MultiEnum]:(t,e)=>{const r=Nt(t,e,e.options.widget==="checkboxesWidget"?t.checkboxesWidgetOptions(e.options.inline??!1):{}),n=hl(e.valueType,e.items);return Object.keys(n).length>0&&(r.items={"ui:options":n}),r},[p.EnumItem]:xo,[p.String]:(t,e)=>Nt(t,e,e.options.widget==="textWidget"?t.textWidgetOptions({type:e.options.inputType,placeholder:e.options.placeholder}):{}),[p.Number]:Nt,[p.Boolean]:Nt,[p.File]:Nt,[p.Tags]:Nt,[p.Range]:(t,e)=>Nt(t,e,{collectErrors:!0}),[p.QrCode]:Nt};function rr(t,e){const r=Kv[e.type](t,e);if(r){const n=Object.entries(r).filter(([i,o])=>o!==void 0&&Object.keys(o).length>0);return n.length>0?Object.fromEntries(n):void 0}return r}const Qv=["title","description","minItems","maxItems","uniqueItems","default","minLength","maxLength","pattern","minimum","exclusiveMinimum","maximum","exclusiveMaximum","multipleOf"];function sc(t){const e={};for(const r of Qv){const n=t[r];n!==void 0&&(e[r]=n)}return e}function Zv(){return crypto.randomUUID()}function Ue(t,e,r){if(!t)return r;const n=t["ui:components"];if(n&&typeof n=="object"){if(n.stringField==="formataQrField")return"textWidget";if(n.objectField==="aggregatedField")return"aggregatedWidget";if(n.arrayField==="multiEnumField")return"checkboxesWidget";if(n.arrayField==="arrayTagsField")return"tagsWidget";if(n.arrayField==="arrayFilesField"||n.arrayField==="arrayNativeFilesField")return"fileWidget"}return r}function em(t){const e=t?.["ui:components"];return typeof e=="object"&&e!==null&&e.stringField==="formataQrField"}function tm(t){const e=t?.["ui:components"];if(typeof e!="object"||e===null)return null;const r=e;return r.stringField==="fileField"?{multiple:!1,native:!1}:r.unknownField==="unknownNativeFileField"?{multiple:!1,native:!0}:r.arrayField==="arrayFilesField"?{multiple:!0,native:!1}:r.arrayField==="arrayNativeFilesField"?{multiple:!0,native:!0}:null}function Ee(t,e,r,n){const i=sc(e);i.title!==void 0?t.options.title=String(i.title):t.options.title=n,i.description!==void 0&&(t.options.description=String(i.description));const o=e.required;if(typeof o=="boolean"&&(t.options.required=o),r?.["ui:options"]&&typeof r["ui:options"]=="object"){const s=r["ui:options"];typeof s.help=="string"&&(t.options.help=s.help)}}function rm(t){if(t.type!=="object"||!t.properties)return!1;const e=Object.keys(t.properties);if(e.length!==2||!e.includes("start")||!e.includes("end"))return!1;const r=t.properties.start,n=t.properties.end;if(!r||!n||typeof r!="object"||typeof n!="object")return!1;const i=r.type,o=n.type;return i==="string"&&o==="string"||(i==="number"||i==="integer")&&(o==="number"||o==="integer")}function nm(t){const e=t.properties?.start;if(typeof e!="object"||e===null)return bt.String;const r=e.type;return r==="number"||r==="integer"?bt.Number:bt.String}function gl(t){const e=t.default;if(!(!Array.isArray(e)||e.length===0))return e.map(r=>JSON.stringify(r))}function im(t,e){if(t.type!=="object")throw new Error('parseSchemaToRootNode: root schema must have type "object"');const n=ac(t,e,{},t.title??"Form title");if(n.type!==p.Object)throw new Error("parseSchemaToRootNode: expected ObjectNode at root");return n}function ac(t,e,r,n){if(rm(t)){const a=nm(t),l=va(Zv(),a,{title:t.title??n,required:Array.isArray(t.required)&&t.required.includes("start"),widget:a===bt.Number?"rangeSliderWidget":"dateRangePickerWidget"});return Ee(l,t,e,n),l}const i=ve(p.Object);Ee(i,t,e,n);const o=t.properties;if(!o||typeof o!="object")return i;const s=new Set(Array.isArray(t.required)?t.required:[]);for(const[a,l]of Object.entries(o)){if(!l||typeof l!="object")continue;const d=e?.[a],c=lc(l,d,r,a),u=Xi(c);c.options.required=s.has(a),c.options.title=a,i.properties.push(u)}return i}function lc(t,e,r,n){const i=sc(t),o=tm(e);if(o&&!o.multiple&&o.native&&(t.type===void 0||t.type===null)){const a=ve(p.File);return Ee(a,t,e,n),a.options.multiple=!1,a.options.native=!0,a.options.widget=Ue(e,p.File,"fileWidget"),a}if(t.enum!==void 0&&(t.type===void 0||t.type==="string")){const a=ve(p.Enum);a.valueType=$e.String;const d=t.enumNames;if(a.items=t.enum.map((c,u)=>{const g=d?.[u]??String(c),h=typeof c=="string"?c:JSON.stringify(c);return rs(g,h)}),a.options.title=i.title??n,a.options.required=!0,i.default!==void 0&&(a.options.defaultValue=JSON.stringify(i.default)),a.options.widget=Ue(e,p.Enum,"radioWidget"),e?.["ui:options"]&&typeof e["ui:options"]=="object"){const c=e["ui:options"];typeof c.inline=="boolean"&&(a.options.inline=c.inline)}return a}if(t.type==="array"){const a=t.items;if(a&&typeof a=="object"&&!Array.isArray(a)){const u=a,g=o?.multiple===!0?o:null;if(u.type==="string"&&u.format==="data-url"){const h=ve(p.File);return Ee(h,t,e,n),h.options.multiple=!0,h.options.native=!1,h.options.widget=Ue(e,p.File,"fileWidget"),h}if(g?.native&&(u.type===void 0||u.type===null)){const h=ve(p.File);return Ee(h,t,e,n),h.options.multiple=!0,h.options.native=!0,h.options.widget=Ue(e,p.File,"fileWidget"),h}if(u.type==="string"&&g&&!g.native){const h=ve(p.File);return Ee(h,t,e,n),h.options.multiple=!0,h.options.native=!1,h.options.widget=Ue(e,p.File,"fileWidget"),h}if(u.enum!==void 0&&t.uniqueItems===!0){const h=ve(p.MultiEnum);h.valueType=$e.String;const m=u.enumNames;if(h.items=u.enum.map((x,E)=>{const _=m?.[E]??String(x),P=typeof x=="string"?x:JSON.stringify(x);return rs(_,P)}),Ee(h,t,e,n),i.minItems!==void 0&&(h.options.minItems=Number(i.minItems)),i.maxItems!==void 0&&(h.options.maxItems=Number(i.maxItems)),i.default!==void 0&&(h.options.defaultValue=gl(t)),h.options.widget=Ue(e,p.MultiEnum,"checkboxesWidget"),e?.["ui:options"]&&typeof e["ui:options"]=="object"){const x=e["ui:options"];typeof x.inline=="boolean"&&(h.options.inline=x.inline)}return h}if(u.type==="string"&&t.uniqueItems===!0){const h=ve(p.Tags);return Ee(h,t,e,n),h.options.widget=Ue(e,p.Tags,"tagsWidget"),h}}const l=ve(p.Array);Ee(l,t,e,n),i.default!==void 0&&(l.options.defaultValue=gl(t));const d=a&&typeof a=="object"&&!Array.isArray(a)?a:{type:"string"},c=e?.items;return l.item=lc(d,c,r,"Item"),l}if(t.type==="string"){if(t.format==="data-url"){const l=ve(p.File);return Ee(l,t,e,n),l.options.multiple=!1,l.options.native=!1,l.options.widget=Ue(e,p.File,"fileWidget"),l}if(o&&!o.multiple&&!o.native){const l=ve(p.File);return Ee(l,t,e,n),l.options.multiple=!1,l.options.native=!1,l.options.widget=Ue(e,p.File,"fileWidget"),l}if(em(e)){const l=ve(p.QrCode);if(Ee(l,t,e,n),i.default!==void 0&&(l.options.default=String(i.default)),l.options.widget=Ue(e,p.QrCode,"textWidget"),e?.["ui:options"]&&typeof e["ui:options"]=="object"){const d=e["ui:options"];typeof d.placeholder=="string"&&(l.options.placeholder=d.placeholder)}return l}const a=ve(p.String);if(Ee(a,t,e,n),i.default!==void 0&&(a.options.default=String(i.default)),i.minLength!==void 0&&(a.options.minLength=Number(i.minLength)),i.maxLength!==void 0&&(a.options.maxLength=Number(i.maxLength)),i.pattern!==void 0&&(a.options.pattern=String(i.pattern)),a.options.widget=Ue(e,p.String,"textWidget"),e?.["ui:options"]&&typeof e["ui:options"]=="object"){const l=e["ui:options"];typeof l.placeholder=="string"&&(a.options.placeholder=l.placeholder);const d=l.text??l.shadcn4Text;d&&typeof d=="object"&&d.placeholder&&(a.options.placeholder=String(d.placeholder))}return a}if(t.type==="number"||t.type==="integer"){const a=ve(p.Number);return Ee(a,t,e,n),a.options.integer=t.type==="integer",i.default!==void 0&&(a.options.default=Number(i.default)),i.minimum!==void 0&&(a.options.minimum=Number(i.minimum)),i.maximum!==void 0&&(a.options.maximum=Number(i.maximum)),i.multipleOf!==void 0&&(a.options.multipleOf=Number(i.multipleOf)),a.options.widget=Ue(e,p.Number,"numberWidget"),a}if(t.type==="boolean"){const a=ve(p.Boolean);return Ee(a,t,e,n),i.default!==void 0&&(a.options.default=!!i.default),a.options.widget=Ue(e,p.Boolean,"checkboxWidget"),a}if(t.type==="object")return ac(t,e,r,n);const s=ve(p.String);return Ee(s,t,e,n),s.options.title=(i.title??n)||"Field",s}const ir=0,vt=1,dc=vt<<1;function vi(t,e,r){let n=t.operatorStatus(e);switch(e.op){case N.And:case N.Or:case N.Xor:{if(e.operands.length===0)return{status:n|vt,value:`${e.op}(<undefined>)`};const i=[];for(const o of e.operands){const s=vi(t,o,r);n|=s.status,i.push(s.value)}return{status:n,value:`${e.op}(${i.join(", ")})`}}case N.Contains:case N.Not:{if(e.operand===void 0)return{status:n|vt,value:`${e.op}(<undefined>)`};const i=vi(t,e.operand,r&&(Ku(e)?Ki(r):r));return{status:n|i.status,value:`${e.op}(${i.value})`}}case N.Eq:return{status:n,value:`${e.op}(${e.value})`};case N.In:{const i=e.values.length>0;return{status:n|(i?ir:vt),value:`${e.op}([${i?e.values.join(", "):"<undefined>"}])`}}case N.Pattern:{const i=Vl(e.value);return{status:n|(i?ir:vt),value:`${e.op}(${i?e.value:"<invalid>"})`}}case N.UniqueItems:return{status:n,value:e.op};case N.HasProperty:{const i=r&&e.propertyId&&(zr(r,e.propertyId)??void 0),o=(i&&Ci(i))??e.propertyId;return{status:n|(i!==void 0?ir:vt),value:`${e.op}(${o?`"${o}"`:"<undefined>"})`}}case N.Property:{const i=r&&e.propertyId&&(zr(r,e.propertyId)??void 0),o=e.operator&&vi(t,e.operator,i),s=(i&&Ci(i))??e.propertyId;return{status:n|(o?.status??vt),value:`${e.op}(${s?`"${s}"`:"<undefined>"}, ${o?.value??"<undefined>"})`}}default:{const i=e.value!==void 0;return{status:n|(i?ir:vt),value:`${e.op}(${i?e.value:"<undefined>"})`}}}}function om(t){return function*e(r,n={parentType:"root",parentNode:void 0}){t.onEnter&&(yield*t.onEnter(r,n));const i={parentType:r.type,parentNode:r};if(r.type===p.Object)for(const o of r.properties)yield*e(o,i);else if(r.type===p.ObjectProperty){yield*e(r.property,i);for(const o of r.dependencies)yield*e(o,i)}else if(r.type===p.ObjectPropertyDependency){r.predicate!==void 0&&(yield*e(r.predicate,i));for(const o of r.properties)yield*e(o,i)}else if(r.type===p.Predicate)r.operator!==void 0&&(yield*e(r.operator,i));else if(r.type===p.Operator)if(Ju(r))r.operand!==void 0&&(yield*e(r.operand,i));else if(is(r))for(const o of r.operands)yield*e(o,i);else Qu(r)&&r.operator!==void 0&&(yield*e(r.operator,i));else if(r.type===p.Array)r.item!==void 0&&(yield*e(r.item,i));else if(r.type===p.Grid)for(const o of r.cells)yield*e(o.node,i);else r.type===p.Range&&(yield*e(r.startNode,i),yield*e(r.endNode,i));t.onLeave&&(yield*t.onLeave(r,n))}}const uc=[],Xt=G(uc),So=G([N.HasProperty,N.Property]),cc=[N.MinItems,N.MaxItems],vl=G(cc),fc=cc.concat(N.UniqueItems),sm=fc.concat(N.Contains),ml=G([N.Format,N.Pattern,N.MinLength,N.MaxLength]),am=G([N.Less,N.LessOrEq,N.Greater,N.GreaterOrEq,N.MultipleOf]),lm={[p.Object]:So,[p.ObjectProperty]:Xt,[p.ObjectPropertyDependency]:Xt,[p.Predicate]:Xt,[p.Operator]:Xt,[p.Array]:G(sm),[p.Grid]:So,[p.Enum]:Xt,[p.MultiEnum]:vl,[p.EnumItem]:Xt,[p.String]:ml,[p.Number]:am,[p.Boolean]:Xt,[p.File]:t=>t.options.multiple?fc:uc,[p.Tags]:vl,[p.Range]:So,[p.QrCode]:ml},dm=new Set([N.And,N.Or,N.Xor,N.Not,N.Eq,N.In]),um=om({*onEnter(t){yield lm[t.type](t)}});function cm(t,e=!1){const r=new Set(dm);for(const n of um(t)){for(const i of n)r.add(i);if(e)break}return r}var pc=(t=>(t.Ajv="ajv8",t))(pc||{}),Di=(t=>(t.Basic="basic",t.Compat="compat",t))(Di||{}),hc=(t=>(t.None="none",t.Flowbite="flowbite",t.Moving="moving",t.Lucide="lucide",t.Radix="radix",t))(hc||{}),ss=(t=>(t.Editor="editor",t.Preview="preview",t))(ss||{});const fm={[nt.Shadcn4]:t=>({shadcn4Text:{...t}})},gc={[nt.Shadcn4]:t=>t?{layouts:{"field-content":{style:"display: flex; gap: 1rem;"}}}:{}},pm={...gc,[nt.Shadcn4]:t=>t?{shadcn4RadioGroup:{style:"grid-auto-flow: column; grid-auto-columns: max-content;"}}:{}},hm={[Di.Basic]:{[p.Enum]:t=>{const e=os(t.valueType,t.items);return{[`${Bc(e.map(Hc))}Field`]:"enumField"}},[p.MultiEnum]:G({arrayField:"multiEnumField"}),[p.String]:G(void 0),[p.Number]:G(void 0),[p.Boolean]:G(void 0),[p.File]:t=>t.options.multiple?{arrayField:t.options.native?"arrayNativeFilesField":"arrayFilesField"}:t.options.native?{unknownField:"unknownNativeFileField"}:{stringField:"fileField"},[p.Tags]:G({arrayField:"arrayTagsField"}),[p.Range]:G({objectField:"aggregatedField"}),[p.QrCode]:G({stringField:"formataQrField"})},[Di.Compat]:{[p.Enum]:G(void 0),[p.MultiEnum]:G(void 0),[p.String]:G(void 0),[p.Number]:G(void 0),[p.Boolean]:G(void 0),[p.File]:t=>{if(t.options.native)return t.options.multiple?{arrayField:"arrayNativeFilesField"}:{unknownField:"unknownNativeFileField"}},[p.Tags]:G({arrayField:"arrayTagsField"}),[p.Range]:G({objectField:"aggregatedField"}),[p.QrCode]:G({stringField:"formataQrField"})}},yl={[p.Enum]:Yu.properties.widget.default,[p.MultiEnum]:ma.properties.widget.default,[p.String]:ha.properties.widget.default,[p.Number]:ga.properties.widget.default,[p.Boolean]:ya.properties.widget.default,[p.File]:Ii.properties.widget.default,[p.Tags]:Ii.properties.widget.default,[p.Range]:"aggregatedWidget",[p.QrCode]:"textWidget"},gm=["textWidget","numberWidget","checkboxWidget","selectWidget"];new Set(gm);const as={textWidget:"Text input",numberWidget:"Number input",selectWidget:"Select",checkboxWidget:"Checkbox",fileWidget:"File input",checkboxesWidget:"Checkboxes",tagsWidget:"Tags",datePickerWidget:"Date picker",multiSelectWidget:"Multi Select",radioWidget:"Radio group",rangeWidget:"Range",textareaWidget:"Textarea",radioButtonsWidget:"Radio buttons",switchWidget:"Switch",comboboxWidget:"Combobox",aggregatedWidget:"Invalid widget",shadcn4DateRangePickerWidget:"Date range picker",dateRangePickerWidget:"Date range picker",rangeSliderWidget:"Range slider"},vm={textWidget:!0,numberWidget:!0,selectWidget:!0,checkboxWidget:!0,fileWidget:!0,checkboxesWidget:!1,tagsWidget:!0,datePickerWidget:!0,multiSelectWidget:!0,radioWidget:!1,rangeWidget:!0,textareaWidget:!0,radioButtonsWidget:!1,switchWidget:!0,comboboxWidget:!0,aggregatedWidget:!1,shadcn4DateRangePickerWidget:!1,dateRangePickerWidget:new Set([nt.Shadcn4]),rangeSliderWidget:!1};function bl(t,e){const r=vm[e];return typeof r=="boolean"?r:r.has(t)}p.Enum+"",G({properties:{widget:{enum:["selectWidget","radioWidget"]}}}),p.MultiEnum+"",G({properties:{widget:{enum:["checkboxesWidget","multiSelectWidget"]}}}),p.String+"",G({properties:{widget:{enum:["textWidget","textareaWidget","datePickerWidget"]}}}),p.Number+"",G({properties:{widget:{enum:["numberWidget","rangeWidget"]}}}),p.Boolean+"",G({properties:{widget:{enum:["checkboxWidget"]}}}),p.File+"",G({properties:{widget:{enum:["fileWidget"]}}});const vc={[nt.Shadcn4]:{[p.Enum]:G({properties:{widget:{enum:["selectWidget","radioWidget","comboboxWidget"]}}}),[p.MultiEnum]:G({properties:{widget:{enum:["checkboxesWidget","multiSelectWidget"]}}}),[p.String]:G({properties:{widget:{enum:["textWidget","textareaWidget","datePickerWidget"]}}}),[p.Number]:G({properties:{widget:{enum:["numberWidget","rangeWidget"]}}}),[p.Boolean]:G({properties:{widget:{enum:["checkboxWidget","switchWidget"]}}}),[p.File]:G({properties:{widget:{enum:["fileWidget"]}}}),[p.Range]:t=>({properties:{widget:{enum:{[bt.String]:["dateRangePickerWidget"],[bt.Number]:["rangeSliderWidget"]}[t.valueType]}}})}},mm={[nt.Shadcn4]:ym(vc[nt.Shadcn4])};function ym(t){const e={};for(const[r,n]of Object.entries(t)){const i=bm(n);e[r]=i}return e}function bm(t){return e=>{const n=t(e).properties?.widget;if(!(n===void 0||!$c(n)||n.enum===void 0||n.enum.some(i=>typeof i!="string"||!(i in as))))return{widget:{"ui:options":{enumNames:n.enum.map(i=>as[i])}}}}}const _m=[p.Object,p.Grid,p.Array,p.Enum,p.MultiEnum,p.String,p.Number,p.Boolean,p.File,p.QrCode],wm={[nt.Shadcn4]:[..._m,p.Range]},xm={[nt.Shadcn4]:[bt.String,bt.Number]};function _l(t){return t.replace(/'/g,"&#39;").replace(/&/g,"&amp;")}function wl(t,e="	"){return t.split(`
`).map(r=>e+r).join(`
`)}function Sm({schema:t,uiSchema:e={}}){const r=JSON.stringify(t,null,"	"),n=_l(wl(r)),i=e??{},o=i&&!Gc(i)?`
	ui-schema='
${_l(wl(JSON.stringify(i,null,"	")))}'`:"";return`<formata-form
	schema='
${n}'${o}
></formata-form>`}const[je,sb]=Wn(),xl={current(){},update(){}},Sl={current:void 0},Sa=ve(p.Object);Sa.options.title="Form title";Sa.properties.push(Xi(ve(p.String)));class ab{constructor(e){this.highlighter=e,ao(()=>{this.#e.destroy()}),this.#e.monitor.addEventListener("beforedragstart",({operation:{source:s}})=>{if(s===null)return;const{id:a,data:l}=s;V(this.#r,a),a!==void 0&&(this.#s.get(a)?.(),V(this.#n,l.node))}),this.#e.monitor.addEventListener("dragover",s=>{V(this.#o,s.operation.target?.id)}),this.#e.monitor.addEventListener("dragend",({operation:{target:s,source:a}})=>{V(this.#r,void 0),V(this.#o,void 0),V(this.#n,void 0);const l=s?.id;if(l===void 0||a===null)return;const{id:d,data:c}=a;this.#a.get(d)?.();const u=this.#l.get(l);Yc(()=>{u?.(c.node)})});let r,n;const i=window.requestIdleCallback??setTimeout,o=window.requestIdleCallback?cancelIdleCallback:clearTimeout;Ir(()=>{if(!this.livePreview)return;const s=lo({ignoreWarnings:this.ignoreWarnings,rootNode:this.rootNode});Xc(n,s)||(n=s,o(r),r=i(()=>{this.validate()&&this.build()}))})}#e=new _g;#N=xf({ajvPlugins:e=>Sf(Of(e))});#r=se();#o=se();#s=new Map;#a=new Map;#l=new Map;#n=se();#u=se(Jc(Sa));get rootNode(){return f(this.#u)}set rootNode(e){V(this.#u,e,!0)}#i=se(xl);#c=O(()=>{try{return f(this.#i).current()}catch{return}});get selectedNode(){return f(this.#c)}set selectedNode(e){V(this.#c,e)}#f=se(!0);#d=se(Sl);#p=O(()=>{try{return f(this.#d).current}catch{return}});get affectedNode(){return f(this.#p)}set affectedNode(e){V(this.#p,e)}get theme(){return nt.Shadcn4}get resolver(){return Di.Basic}get icons(){return hc.Lucide}get validator(){return pc.Ajv}#h=O(()=>wm[this.theme]);get availableCustomizableNodeTypes(){return f(this.#h)}set availableCustomizableNodeTypes(e){V(this.#h,e)}#g=O(()=>xm[this.theme]);get availableRangeValueTypes(){return f(this.#g)}set availableRangeValueTypes(e){V(this.#g,e)}get isDragged(){return f(this.#r)!==void 0}selectNode(e,r){V(this.#i,e),V(this.#f,r)}updateSelectedNode(e){f(this.#i).update(e)}selectAffectedNode(e){V(this.#d,e)}clearSelection(){V(this.#i,xl),V(this.#d,Sl)}#v=se(!1);get ignoreWarnings(){return f(this.#v)}set ignoreWarnings(e){V(this.#v,e,!0)}#m=se(!0);get livePreview(){return f(this.#m)}set livePreview(e){V(this.#m,e,!0)}#y=se(!1);get html5Validation(){return f(this.#y)}set html5Validation(e){V(this.#y,e,!0)}#b=se(0);get _errorsCount(){return f(this.#b)}set _errorsCount(e){V(this.#b,e,!0)}get errorsCount(){return this._errorsCount}#_=se({});get _errors(){return f(this.#_)}set _errors(e){V(this.#_,e)}get errors(){return this._errors}#w=se(0);get _warningsCount(){return f(this.#w)}set _warningsCount(e){V(this.#w,e,!0)}get warningsCount(){return this._warningsCount}#x=se({});get _warnings(){return f(this.#x)}set _warnings(e){V(this.#x,e)}get warnings(){return this._warnings}setIssues(e,r){this[`_${e}Count`]=r.length,this[`_${e}`]=Object.groupBy(r,n=>n.nodeId)}#S=se({name:ss.Editor});get route(){return f(this.#S)}set route(e){V(this.#S,e)}#t=se(void 0);#O=O(()=>f(this.#t)?.schema??{type:"object"});get schema(){return f(this.#O)}set schema(e){V(this.#O,e)}#k=O(()=>(f(this.#t),this.theme,this.resolver,Rr(()=>({uiSchema:this.rootNode&&f(this.#t)&&rr({propertyNames:f(this.#t).propertyNames,propertiesOrder:[],uiComponents:r=>{const n=r.options.widget,i=Object.assign({},hm[this.resolver][r.type](r)),o=yl[r.type];return r.options.widget!==o&&(i[o]=n),i},textWidgetOptions:r=>Object.values(r).every(n=>n===void 0)?{}:fm[this.theme](r),checkboxesWidgetOptions:r=>gc[this.theme](r),radioWidgetOptions:r=>pm[this.theme](r),useLabelOptions:({type:r,options:n})=>{const i=n.widget,o=yl[r];if(o!==i){const s=bl(this.theme,i);if(bl(this.theme,o)!==s)return{useLabel:s}}return{}}},this.rootNode)}))));#E=O(()=>f(this.#k).uiSchema);get uiSchema(){return f(this.#E)}set uiSchema(e){V(this.#E,e)}#P=O(()=>this.highlight("html",Sm({schema:this.schema,uiSchema:this.uiSchema})));get formataFormHtml(){return f(this.#P)}set formataFormHtml(e){V(this.#P,e)}importState(e){const{rootNode:r,ignoreWarnings:n,html5Validation:i,route:o,livePreview:s}=e;this.rootNode=r,this.ignoreWarnings=n,this.html5Validation=i,this.route=o,"livePreview"in e&&(this.livePreview=e.livePreview),this.route.name===ss.Preview&&this.build()}loadFromSchema(e,r){const n=im(e,r);this.importState({rootNode:n,ignoreWarnings:this.ignoreWarnings,html5Validation:this.html5Validation,route:this.route,livePreview:this.livePreview})}exportState(){return lo({rootNode:this.rootNode,livePreview:this.livePreview,ignoreWarnings:this.ignoreWarnings,route:this.route,html5Validation:this.html5Validation})}createPlaygroundSample(){return{schema:this.schema,uiSchema:this.uiSchema??{},initialValue:null,html5Validation:!0}}createDroppable(e,r){const n=crypto.randomUUID(),i=new pa({id:n,accept(s){return r.accept(s.data.node)}},this.#e);Ir(()=>{i.disabled=e.isDragged}),this.#l.set(n,s=>{r.accept(s)&&r.onDrop(s)}),ao(()=>{this.#l.delete(n),i.destroy()});const o=this;return{get isReady(){return f(o.#n)===void 0||r.accept(f(o.#n))},get isOver(){return f(o.#o)===n},attach(s){return i.element=s,()=>{i.element=void 0}}}}createDraggable(e){const r=crypto.randomUUID();let n;const i=new Vn({data:{get node(){return n}},feedback:"clone",id:r},this.#e);this.#s.set(r,()=>{n=lo(e.node)}),this.#a.set(r,e.unmount),ao(()=>{this.#s.delete(r),this.#a.delete(r),i.destroy()});const o=this;return{get isDragged(){return f(o.#r)===r},attach(s){return i.element=s,()=>{i.element=void 0}},attachHandle(s){return i.handle=s,()=>{i.handle=void 0}}}}nodeSchema(e){const r=Tv[e.type],n=vc[this.theme][e.type]?.(e);return n?Ne(r,n):r}nodeUiSchema(e){const r=Te(Av[e.type],{required:{"ui:options":{layouts:{"object-property":{hidden:!f(this.#f)}}}}}),n=mm[this.theme][e.type]?.(e);return n?Te(r,n):r}summarizeOperator(e,r){return vi({operatorStatus:n=>(this._errors[n.id]===void 0?ir:vt)|(this._warnings[n.id]===void 0?ir:dc)},e,r)}validate(){if(this.rootNode===void 0)return!1;const e={complementary:[],affectedNode:[],enumValueType:[]},r=[],n=[],i=this;return ht({validateCustomizableNodeOptions(o){const s=i.nodeSchema(o),a=i.#N.validateFormValue(s,o.options);a.errors&&(r.push({nodeId:o.id,message:"Invalid field options"}),console.error(a.errors))},getAvailableRangeValueTypes(){return i.availableRangeValueTypes},addError(o,s){r.push({nodeId:o.id,message:s,node:o})},addWarning(o,s){n.push({nodeId:o.id,message:s})},push(o,s){return e[o].push(s),{[Symbol.dispose]:()=>{e[o].pop()}}},peek(o){return e[o].at(-1)}},this.rootNode),this.setIssues("errors",r),this.setIssues("warnings",n),r.length===0&&(this.ignoreWarnings||n.length===0)}build(){if(this.rootNode===void 0)throw new Error("Root node is undefined");const e={scope:[],affectedNode:[]},r=new Map,n={propertyNames:r,createAndPushScope(){const o=new Map,s={id({id:a,options:{title:l}}){let d=o.get(l)??0;const c=d===0?l:`${l}_${d}`;return o.set(l,d+1),r.set(a,c),c}};return Object.assign(s,n.push("scope",s))},push(o,s){return e[o].push(s),{[Symbol.dispose](){e[o].pop()}}},peek(o){return e[o].at(-1)}},i=yt(n,this.rootNode);V(this.#t,{propertyNames:r,schema:i})}highlight(e,r){return Pf(this.highlighter,e,r)}}const[Qr,Om]=Wn();var Em=R("<div><div><!></div></div>");function Qi(t,e){D(e,!0);var r=Em(),n=L(r),i=L(n);Ge(i,()=>e.placeholder),F(n),F(r),zi(r,()=>e.droppable.attach),K(()=>{Wr(r,1,Cr(["border-2 border-dashed rounded-md p-6 w-full h-full flex items-center justify-center",e.droppable.isOver&&"border-chart-2 bg-chart-2/5"])),Wr(n,1,Cr(["text-lg text-center font-medium",e.droppable.isReady?"text-foreground":"text-muted-foreground"]))}),w(t,r),j()}var Pm=R("<div><!></div>");function Nm(t,e){D(e,!0);const r=Rn(e,["$$slots","$$events","$$legacy","children","class"]);var n=Pm();pe(n,o=>({class:o,...r}),[()=>Vi("rounded-md p-2 border bg-background w-full",e.class)]);var i=L(n);Ge(i,()=>e.children??Ut),F(n),w(t,n),j()}function ut(t,e){D(e,!0);let r=q(e,"node",15),n=q(e,"status",3,ir);const i=je(),o={current(){return r()},update(d){r(d)}},s=d=>{d.stopPropagation(),!e.disableSelection&&(i.selectNode(o,e.showRequired),e.onSelect?.())},a=O(()=>n()&vt||i.errors[r().id]!==void 0),l=O(()=>n()&dc||i.warnings[r().id]!==void 0);{let d=O(()=>Vi(e.draggable.isDragged&&"opacity-70",i.selectedNode?.id===r().id?"border-blue-600":f(a)?"border-destructive":f(l)&&"border-chart-3",e.class));Nm(t,{[Kc()]:c=>(e.draggable.attach||Ut)(c),get class(){return f(d)},role:"button",tabindex:0,onkeydown:c=>{(c.code==="Enter"||c.code==="Space")&&s(c)},onclick:s,get children(){return e.children}})}j()}function Oa(t,e){Me(t,{variant:"destructive",size:"icon",class:"size-8",get onclick(){return e.onClick},children:(r,n)=>{Ef(r,{})},$$slots:{default:!0}})}var km=R('<div><div class="cursor-grab"><!></div> <div class="text-md truncate flex-1"><!></div> <!> <!></div>');function Zi(t,e){D(e,!0);var r=km(),n=L(r),i=L(n);Ul(i,{class:"size-5"}),F(n),zi(n,()=>e.draggable.attachHandle);var o=I(n,2),s=L(o);Ge(s,()=>e.children),F(o);var a=I(o,2);Ge(a,()=>e.append??Ut);var l=I(a,2);Oa(l,{onClick:d=>{d.stopPropagation(),e.unmount()}}),F(r),K(()=>Wr(r,1,Cr(["flex gap-2 items-center pt-2",e.disablePadding?"pb-2":"pb-4"]))),w(t,r),j()}var Tm=R('<span class="text-muted-foreground"> </span>'),Mm=R("<span>*</span>"),Am=R(" <!>",1);function Zr(t,e){D(e,!0);const n=q(e,"append",3,i=>{var o=X(),s=C(o);{var a=l=>{var d=Tm(),c=L(d,!0);F(d),K(()=>ae(c,as[e.node.options.widget])),w(l,d)};be(s,l=>{"widget"in e.node.options&&l(a)})}w(i,o)});Zi(t,{get draggable(){return e.draggable},get unmount(){return e.unmount},get disablePadding(){return e.disablePadding},get append(){return n()},children:(i,o)=>{ge();var s=Am(),a=C(s),l=I(a);{var d=c=>{var u=Mm();w(c,u)};be(l,c=>{e.showRequired&&e.node.options.required&&c(d)})}K(()=>ae(a,`${e.node.options.title??""} `)),w(i,s)},$$slots:{default:!0}}),j()}var Im=R("<li> </li>"),Rm=R("<ul></ul>"),Wm=R("<div><!> <!></div>");function ct(t,e){D(e,!0);const r=(l,d=Ut)=>{const c=O(()=>f(i)[d()]);var u=X(),g=C(u);{var h=v=>{var m=Rm();Ye(m,21,()=>f(c),ds,(x,E)=>{var _=Im(),P=L(_,!0);F(_),K(()=>ae(P,f(E).message)),w(x,_)}),F(m),K(()=>Wr(m,1,Cr(["list-inside list-disc",{"text-destructive":d()==="errors","text-chart-3":d()==="warnings"}]))),w(v,m)};be(g,v=>{f(c)!==void 0&&f(c).length>0&&v(h)})}w(l,u)},n=je(),i=O(()=>({errors:n.errors[e.node.id],warnings:n.warnings[e.node.id]}));var o=X(),s=C(o);{var a=l=>{var d=Wm(),c=L(d);r(c,()=>"errors");var u=I(c,2);r(u,()=>"warnings"),F(d),K(g=>Wr(d,1,g),[()=>Cr(Vi("p-2 flex flex-col gap-2",e.class))]),w(l,d)};be(s,l=>{(f(i).errors||f(i).warnings)&&l(a)})}w(t,o),j()}var Cm=R("<!> <!>",1),Dm=R('<div class="flex items-center gap-2"><!> <!></div>');function mc(t,e){const r=Cl();D(e,!0);let n=q(e,"value",15);var i=Dm(),o=L(i);Dl(o,{class:"text-base text-muted-foreground",get for(){return r},children:(a,l)=>{ge();var d=Se("Value type");w(a,d)},$$slots:{default:!0}});var s=I(o,2);Z(s,()=>Ll,(a,l)=>{l(a,{type:"single",get value(){return n()},set value(d){n(d)},children:(d,c)=>{var u=Cm(),g=C(u);Z(g,()=>jl,(v,m)=>{m(v,{get id(){return r},size:"sm",children:(x,E)=>{ge();var _=Se();K(()=>ae(_,e.labels[n()])),w(x,_)},$$slots:{default:!0}})});var h=I(g,2);Z(h,()=>Fl,(v,m)=>{m(v,{children:(x,E)=>{var _=X(),P=C(_);Ye(P,16,()=>e.items,y=>y,(y,b)=>{var T=X(),S=C(T);Z(S,()=>ql,(k,A)=>{A(k,{get value(){return b},children:(W,$)=>{ge();var M=Se();K(()=>ae(M,e.labels[b])),w(W,M)},$$slots:{default:!0}})}),w(y,T)}),w(x,_)},$$slots:{default:!0}})}),w(d,u)},$$slots:{default:!0}})}),F(i),w(t,i),j()}var jm=R('<div class="h-2 w-full flex flex-col justify-center"><div></div></div>');function ji(t,e){D(e,!0);const r=Rn(e,["$$slots","$$events","$$legacy"]),n=je(),i=Qr(),o=n.createDroppable(i,r);var s=jm(),a=L(s);F(s),zi(s,()=>o.attach),K(()=>Wr(a,1,Cr(["w-full h-0.5 bg-chart-2",!o.isOver&&"hidden"]))),w(t,s),j()}var Fm=R('<div class="cursor-grab"><!></div> <!> <!> <!> <!>',1);function qm(t,e){D(e,!0);let r=q(e,"node",15);ut(t,{get draggable(){return e.draggable},class:"grid grid-cols-[auto_1fr_1fr_auto] gap-2 items-center",disableSelection:!0,showRequired:!1,get node(){return r()},set node(n){r(n)},children:(n,i)=>{var o=Fm(),s=C(o),a=L(s);Ul(a,{class:"size-5"}),F(s),zi(s,()=>e.draggable.attachHandle);var l=I(s,2),d=()=>r().label,c=v=>{e.toValue(r().label)===r().value&&r(r().value=e.toValue(v),!0),r(r().label=v,!0)};or(l,{placeholder:"Label",get value(){return d()},set value(v){c(v)}});var u=I(l,2);or(u,{placeholder:"Value",get value(){return r().value},set value(v){r(r().value=v,!0)}});var g=I(u,2);Oa(g,{get onClick(){return e.unmount}});var h=I(g,2);ct(h,{class:"col-span-4",get node(){return r()}}),w(n,o)},$$slots:{default:!0}}),j()}const Lm=new Set(["true","false","null"]);var zm=R("<!> <!>",1),Vm=R('<div class="grid grid-cols-[1fr_1fr_auto] gap-2 items-center"><!> <!> <!></div> <div class="flex flex-col gap-0.5"><!> <!></div>',1);function Um(t,e){D(e,!0);let r=q(e,"items",15);const n=O(()=>e.valueType===$e.JSON?{toValue(S){return Lm.has(S)||Number(S).toString()===S?S:JSON.stringify(S)}}:{toValue:Oo}),i=O(()=>f(n).toValue),o={[$e.JSON]:S=>{try{const k=JSON.parse(S);return typeof k=="string"?k:S}catch{return S}},[$e.String]:Oo};let s;Ir(()=>{if(s!==void 0){const S=o[s],k=Rr(()=>r().map(W=>S(W.value)));for(let W=0;W<k.length;W++)r(r()[W].value=f(i)(k[W]),!0);const A=Rr(()=>S(f(l)));V(l,f(i)(A),!0)}s=e.valueType});let a=se(""),l=se(""),d=se(null);function c(S){S.stopPropagation(),r().push(rs(f(a),f(l))),V(a,""),V(l,f(i)(""),!0),f(d)?.focus()}function u(S){S.code==="Enter"&&(S.preventDefault(),c(S))}const g=je();var h=Vm(),v=C(h),m=L(v),x=()=>f(a),E=S=>{f(i)(f(a))===f(l)&&V(l,f(i)(S),!0),V(a,S,!0)};or(m,{placeholder:"Enter label...",get value(){return x()},set value(S){E(S)},onkeydown:u,get ref(){return f(d)},set ref(S){V(d,S)}});var _=I(m,2);or(_,{placeholder:"Enter value...",onkeydown:u,get value(){return f(l)},set value(S){V(l,S,!0)}});var P=I(_,2);Me(P,{variant:"outline",size:"icon",class:"size-8",onclick:c,children:(S,k)=>{gs(S,{class:"size-4"})},$$slots:{default:!0}}),F(v);var y=I(v,2),b=L(y);Ye(b,19,r,S=>S.id,(S,k,A)=>{const W=O(()=>()=>{r().splice(f(A),1)}),$=O(()=>g.createDraggable({unmount:f(W),get node(){return r()[f(A)]}}));var M=zm(),z=C(M);ji(z,{get accept(){return sl},onDrop:_e=>{r().splice(f(A),0,_e)}});var oe=I(z,2);qm(oe,{showRequired:!1,get draggable(){return f($)},get toValue(){return f(i)},unmount:f(W),get node(){return r()[f(A)]},set node(_e){r(r()[f(A)]=_e,!0)}}),w(S,M)});var T=I(b,2);ji(T,{get accept(){return sl},onDrop:S=>{r().push(S)}}),F(y),w(t,h),j()}var Bm=R("<!> <!> <!>",1);function Ol(t,e){D(e,!0);let r=q(e,"node",15);ut(t,{get draggable(){return e.draggable},get showRequired(){return e.showRequired},class:"flex flex-col gap-0.5",get node(){return r()},set node(n){r(n)},children:(n,i)=>{var o=Bm(),s=C(o);Zr(s,{get node(){return r()},get draggable(){return e.draggable},get unmount(){return e.unmount},get showRequired(){return e.showRequired},append:c=>{mc(c,{get items(){return xg},get labels(){return wg},get value(){return r().valueType},set value(u){r(r().valueType=u,!0)}})},$$slots:{append:!0}});var a=I(s,2);Um(a,{get valueType(){return r().valueType},get items(){return r().items},set items(d){r(r().items=d,!0)}});var l=I(a,2);ct(l,{get node(){return r()}}),w(n,o)},$$slots:{default:!0}}),j()}const[Hm,$m]=Wn();function Gm(t,e){D(e,!0),$m({get current(){return e.index}});var r=X(),n=C(r);Ge(n,()=>e.children),w(t,r),j()}var Ym=R("<!> <!>",1),Xm=R("<!> <!>",1);function eo(t,e){D(e,!0);const r=q(e,"nodes",15),n=je(),i=Qr();var o=X(),s=C(o);{var a=d=>{const c=O(()=>n.createDroppable(i,{accept:e.accept,onDrop(u){e.onDrop(u,0)}}));Qi(d,{get droppable(){return f(c)},placeholder:g=>{ge();var h=Se("Drop form elements here");w(g,h)},$$slots:{placeholder:!0}})},l=d=>{var c=Xm(),u=C(c);Ye(u,18,r,h=>h,(h,v,m)=>{var x=Ym(),E=C(x);ji(E,{get accept(){return e.accept},onDrop:P=>{e.onDrop(P,f(m))}});var _=I(E,2);Gm(_,{get index(){return f(m)},children:(P,y)=>{ro(P,{get showRequired(){return e.showRequired},unmount:()=>{r().splice(f(m),1)},get node(){return r()[f(m)]},set node(b){r(r()[f(m)]=b,!0)}})},$$slots:{default:!0}}),w(h,x)});var g=I(u,2);ji(g,{get accept(){return e.accept},onDrop:h=>{e.onDrop(h,r().length)}}),w(d,c)};be(s,d=>{r().length===0?d(a):d(l,!1)})}w(t,o),j()}var Jm=R("<!> <!> <!>",1);function Km(t,e){D(e,!0);let r=q(e,"node",15);const n=je(),i=(o,s)=>{const a=Ji(o)?o:Xi(o);r().properties.splice(s,0,a),n.selectNode({current(){return r().properties.find(l=>l.id===a.id)?.property},update(l){const d=r().properties.findIndex(c=>c.id===a.id);r(r().properties[d].property=l,!0)}},!0)};ut(t,{get draggable(){return e.draggable},get showRequired(){return e.showRequired},class:"flex flex-col gap-0.5",get node(){return r()},set node(o){r(o)},children:(o,s)=>{var a=Jm(),l=C(a);{let u=O(()=>r().properties.length>0);Zr(l,{get node(){return r()},get draggable(){return e.draggable},get unmount(){return e.unmount},get disablePadding(){return f(u)},get showRequired(){return e.showRequired}})}var d=I(l,2);eo(d,{showRequired:!0,get accept(){return _a},onDrop:i,get nodes(){return r().properties},set nodes(u){r(r().properties=u,!0)}});var c=I(d,2);{let u=O(()=>[r().properties.length===0&&"pt-4"]);ct(c,{get class(){return f(u)},get node(){return r()}})}w(o,a)},$$slots:{default:!0}}),j()}const[gr,Ea]=Wn(),[Qm,Zm]=Wn();var ey=R('<div class="flex flex-col gap-0.5 px-2"><!></div>'),ty=R("<!> <!> <!> <!>",1);function ry(t,e){D(e,!0);let r=q(e,"node",15);const n=O(()=>bc[r().property.type]),i=je(),o=O(()=>i.selectedNode?.id===r().property.id),s=O(()=>r().dependencies.length>0);function a(c){c.stopPropagation();const u=Sv();r().dependencies.push(u),r(r().complementary=u.id,!0)}Zm({get complementary(){return r().complementary},set complementary(c){r(r().complementary=c,!0)}}),Ea({get node(){return r().property}});const l=O(()=>i.errors[r().id]!==void 0),d=O(()=>i.warnings[r().id]!==void 0);{let c=O(()=>["p-0 border-none relative bg-border flex flex-col gap-1",f(o)?"shadow-[inset_0_0_0_1px_var(--primary)]":f(l)?"shadow-[inset_0_0_0_1px_var(--destructive)]":f(d)&&"shadow-[inset_0_0_0_1px_var(--chart-3)]"]);ut(t,{get draggable(){return e.draggable},get class(){return f(c)},showRequired:!0,get node(){return r().property},set node(u){r(r().property=u,!0)},children:(u,g)=>{var h=ty(),v=C(h);{let P=O(()=>["absolute -bottom-11 left-1/2 -translate-x-1/2 z-50",f(o)&&!i.isDragged?"inline-flex":"hidden"]);Me(v,{get class(){return f(P)},onclick:a,children:(y,b)=>{ge();var T=Se("Add dependency");w(y,T)},$$slots:{default:!0}})}var m=I(v,2);Z(m,()=>f(n),(P,y)=>{y(P,{showRequired:!0,get unmount(){return e.unmount},get draggable(){return e.draggable},get node(){return r().property},set node(b){r(r().property=b,!0)}})});var x=I(m,2);{var E=P=>{var y=ey(),b=L(y);eo(b,{showRequired:!1,get accept(){return qv},onDrop:(T,S)=>{r().dependencies.splice(S,0,T)},get nodes(){return r().dependencies},set nodes(T){r(r().dependencies=T,!0)}}),F(y),w(P,y)};be(x,P=>{f(s)&&P(E)})}var _=I(x,2);{let P=O(()=>["p-4",r().dependencies.length>0?"pt-0":"pt-2"]);ct(_,{get class(){return f(P)},get node(){return r()}})}w(u,h)},$$slots:{default:!0}})}j()}var ny=R("Drop predicate here or <!>",1);function iy(t,e){D(e,!0);let r=q(e,"node",15);const n=je(),i=Qr(),o={current(){return r().predicate},update(c){r(r().predicate=c,!0)}};var s=X(),a=C(s);{var l=c=>{ro(c,{showRequired:!1,unmount:()=>{r(r().predicate=void 0,!0)},get node(){return r().predicate},set node(u){r(r().predicate=u,!0)}})},d=c=>{const u=O(()=>n.createDroppable(i,{accept:Fv,onDrop(g){r(r().predicate=g,!0),n.selectNode(o,!1)}}));Qi(c,{get droppable(){return f(u)},placeholder:h=>{ge();var v=ny(),m=I(C(v));Me(m,{onclick:x=>{x.stopPropagation(),r(r().predicate=$u(),!0),n.selectNode(o,!1)},children:(x,E)=>{ge();var _=Se("Create one");w(x,_)},$$slots:{default:!0}}),w(h,v)},$$slots:{placeholder:!0}})};be(a,c=>{r().predicate?c(l):c(d,!1)})}w(t,s),j()}function to(t,e){D(e,!0);let r=q(e,"node",15);const n=je(),i=Qr(),o=gr(),s=O(()=>cm(o.node,!0));var a=X(),l=C(a);{var d=u=>{ro(u,{showRequired:!1,unmount:()=>{r(void 0)},get node(){return r()},set node(g){r(g)}})},c=u=>{const g=O(()=>n.createDroppable(i,{accept:h=>Zu(h)&&f(s).has(h.op),onDrop(h){r(h)}}));Qi(u,{get droppable(){return f(g)},placeholder:v=>{ge();var m=Se("Drop operator here");w(v,m)},$$slots:{placeholder:!0}})};be(l,u=>{r()?u(d):u(c,!1)})}w(t,a),j()}var oy=R('<span class="text-muted-foreground"> </span>'),sy=R("<!> <!>",1),ay=R("<!> <!>",1);function ly(t,e){D(e,!0);const r=d=>{var c=oy(),u=L(c,!0);F(c),K(()=>ae(u,f(l)?f(l).value:"Select to edit")),w(d,c)};let n=q(e,"node",15);const i=je(),o=gr(),s={get current(){return o.node}},a=O(()=>i.selectedNode?.id===n().id),l=O(()=>n().operator&&i.summarizeOperator(n().operator,o.node));{let d=O(()=>f(l)?.status);ut(t,{get draggable(){return e.draggable},get status(){return f(d)},showRequired:!1,onSelect:()=>{i.selectAffectedNode(s)},get node(){return n()},set node(c){n(c)},children:(c,u)=>{var g=ay(),h=C(g);{let x=O(()=>f(a)?void 0:r);Zi(h,{get draggable(){return e.draggable},get unmount(){return e.unmount},get append(){return f(x)},disablePadding:!0,children:(E,_)=>{ge();var P=Se("Predicate");w(E,P)},$$slots:{default:!0}})}var v=I(h,2);{var m=x=>{var E=sy(),_=C(E);to(_,{get node(){return n().operator},set node(y){n(n().operator=y,!0)}});var P=I(_,2);ct(P,{class:"pt-4",get node(){return n()}}),w(x,E)};be(v,x=>{i.selectedNode?.id===n().id&&x(m)})}w(c,g)},$$slots:{default:!0}})}j()}function dy(t,e){D(e,!0);let r=q(e,"node",15);or(t,{placeholder:"Value",get value(){return r().value},set value(n){r(r().value=n,!0)}}),j()}function uy(t,e){D(e,!0);let r=q(e,"node",15);var n=()=>r().value,i=o=>r(r().value=o??void 0,!0);or(t,{placeholder:"Value",get value(){return n()},set value(o){i(o)}}),j()}var cy=R(" <!>",1),fy=R("<!> ",1),py=R("<!> <!>",1),hy=R("<!> <!>",1),gy=R("<!> <!>",1);function ls(t,e){D(e,!0);let r=q(e,"value",15),n=se(!1),i=se(""),o=se(null),s=se(null);function a(){V(i,""),f(o)?.click(),f(s)?.focus()}const l=O(()=>e.options.find(v=>v.value===r())?.label);var d={focus:a},c=X(),u=C(c);{var g=v=>{var m=X(),x=C(m);Z(x,()=>df,(E,_)=>{_(E,{get open(){return f(n)},set open(P){V(n,P,!0)},children:(P,y)=>{var b=gy(),T=C(b);{const k=(A,W)=>{Me(A,Fi(()=>W?.().props,{variant:"outline",class:"flex-1 justify-between",role:"combobox",get"aria-expanded"(){return f(n)},children:(M,z)=>{ge();var oe=cy(),_e=C(oe),Fe=I(_e);lf(Fe,{class:"opacity-50"}),K(()=>ae(_e,`${f(l)??"Select some option"??""} `)),w(M,oe)},$$slots:{default:!0}}))};Z(T,()=>Qc,(A,W)=>{W(A,{get ref(){return f(o)},set ref($){V(o,$,!0)},child:k,$$slots:{child:!0}})})}var S=I(T,2);Z(S,()=>Zc,(k,A)=>{A(k,{class:"p-0",portalProps:{disabled:!0},children:(W,$)=>{var M=X(),z=C(M);Z(z,()=>ef,(oe,_e)=>{_e(oe,{children:(Fe,xt)=>{var Ve=hy(),Je=C(Ve);Z(Je,()=>tf,(St,Ot)=>{Ot(St,{placeholder:"Select some option",get value(){return f(i)},set value(he){V(i,he,!0)}})});var it=I(Je,2);Z(it,()=>rf,(St,Ot)=>{Ot(St,{children:(he,Ht)=>{var Ke=py(),It=C(Ke);Z(It,()=>nf,(Et,Rt)=>{Rt(Et,{children:(Pt,vr)=>{ge();var te=Se("No option found.");w(Pt,te)},$$slots:{default:!0}})});var $t=I(It,2);Z($t,()=>of,(Et,Rt)=>{Rt(Et,{value:"options",children:(Pt,vr)=>{var te=X(),B=C(te);Ye(B,17,()=>e.options,Ae=>Ae.id,(Ae,mr)=>{var ft=X(),en=C(ft);Z(en,()=>sf,(yr,Hn)=>{Hn(yr,{get value(){return f(mr).value},onSelect:()=>{r(f(mr).value),V(n,!1),e.onEnter?.()},children:($n,Gn)=>{var tn=fy(),Yn=C(tn);{let no=O(()=>Vi(r()!==f(mr).value&&"text-transparent"));af(Yn,{get class(){return f(no)}})}var Xn=I(Yn);K(()=>ae(Xn,` ${f(mr).label??""}`)),w($n,tn)},$$slots:{default:!0}})}),w(Ae,ft)}),w(Pt,te)},$$slots:{default:!0}})}),w(he,Ke)},$$slots:{default:!0}})}),w(Fe,Ve)},$$slots:{default:!0}})}),w(W,M)},$$slots:{default:!0}})}),w(P,b)},$$slots:{default:!0}})}),w(v,m)},h=v=>{or(v,{placeholder:"Input JSON value",onkeydown:m=>{m.code==="Enter"&&(m.preventDefault(),e.onEnter?.())},get ref(){return f(s)},set ref(m){V(s,m,!0)},get value(){return r()},set value(m){r(m)}})};be(u,v=>{e.options.length>0?v(g):v(h,!1)})}return w(t,c),j(d)}var vy=R('<div class="flex"><!></div>');function my(t,e){D(e,!0);let r=q(e,"node",15);const n=gr(),i=O(()=>wa(n.node));var o=vy(),s=L(o);ls(s,{get options(){return f(i)},get value(){return r().value},set value(a){r(r().value=a,!0)}}),F(o),w(t,o),j()}var yy=R("<!> <!>",1);function yc(t,e){D(e,!0);let r=q(e,"value",15);var n=X(),i=C(n);{let o=O(()=>e.properties.size===0);Z(i,()=>Ll,(s,a)=>{a(s,{type:"single",get disabled(){return f(o)},get value(){return r()},set value(l){r(l)},children:(l,d)=>{var c=yy(),u=C(c);Z(u,()=>jl,(h,v)=>{v(h,{class:"w-full",children:(m,x)=>{ge();var E=Se();K(_=>ae(E,_),[()=>(r()!==void 0?e.properties.get(r()):void 0)??"Select some property"]),w(m,E)},$$slots:{default:!0}})});var g=I(u,2);Z(g,()=>Fl,(h,v)=>{v(h,{children:(m,x)=>{var E=X(),_=C(E);Ye(_,17,()=>e.properties,([P,y])=>P,(P,y)=>{var b=O(()=>uf(f(y),2));let T=()=>f(b)[0],S=()=>f(b)[1];var k=X(),A=C(k);Z(A,()=>ql,(W,$)=>{$(W,{get value(){return T()},children:(M,z)=>{ge();var oe=Se();K(()=>ae(oe,S())),w(M,oe)},$$slots:{default:!0}})}),w(P,k)}),w(m,E)},$$slots:{default:!0}})}),w(l,c)},$$slots:{default:!0}})})}w(t,n),j()}var by=R('<div class="flex flex-col gap-2"><!> <!></div>');function _y(t,e){D(e,!0);let r=q(e,"node",15);const n=gr(),i=O(()=>oc(n.node)),o=O(()=>r().propertyId!==void 0?zr(n.node,r().propertyId)??void 0:void 0);Ir(()=>{f(i),Rr(()=>{const c=r().propertyId;c===void 0||f(i).has(c)||(r(r().propertyId=void 0,!0),r(r().operator=void 0,!0))})}),Ea({get node(){return f(o)}});var s=by(),a=L(s);yc(a,{get properties(){return f(i)},get value(){return r().propertyId},set value(c){r(r().propertyId=c,!0)}});var l=I(a,2);{var d=c=>{to(c,{get node(){return r().operator},set node(u){r(r().operator=u,!0)}})};be(l,c=>{f(o)&&c(d)})}F(s),w(t,s),j()}function wy(t,e){D(e,!0);let r=q(e,"node",15);const n=gr(),i=O(()=>oc(n.node));Ir(()=>{f(i),Rr(()=>{const o=r().propertyId;o===void 0||f(i).has(o)||r(r().propertyId=void 0,!0)})}),yc(t,{get properties(){return f(i)},get value(){return r().propertyId},set value(o){r(r().propertyId=o,!0)}}),j()}var xy=R('<div class="flex items-center gap-2"><!> <!></div>'),Sy=R('<div class="flex flex-col gap-2"><div class="flex items-center gap-2"><!> <!></div> <!></div>');function Oy(t,e){D(e,!0);let r=q(e,"node",15);const n=gr(),i=O(()=>wa(n.node));Ir(()=>{f(i).length!==0&&Rr(()=>{const v=new Set(f(i).map(m=>m.value));r(r().values=r().values.filter(m=>v.has(m)),!0)})});let o=se(""),s;function a(){r().values.push(f(o)),V(o,""),s.focus()}var l=Sy(),d=L(l),c=L(d);Pl(ls(c,{get options(){return f(i)},onEnter:a,get value(){return f(o)},set value(v){V(o,v,!0)}}),v=>s=v,()=>s);var u=I(c,2);{var g=v=>{Me(v,{variant:"outline",size:"icon",class:"size-8",onclick:a,children:(m,x)=>{gs(m,{class:"size-4"})},$$slots:{default:!0}})};be(u,v=>{f(i).length===0&&v(g)})}F(d);var h=I(d,2);Ye(h,17,()=>r().values,ds,(v,m,x)=>{var E=xy(),_=L(E);ls(_,{get options(){return f(i)},get value(){return r().values[x]},set value(y){r(r().values[x]=y,!0)}});var P=I(_,2);Oa(P,{onClick:()=>{r().values.splice(x,1)}}),F(E),w(v,E)}),F(l),w(t,l),j()}var Ey=R('<div class="text-destructive">First, define the child element of the list</div>');function Py(t,e){D(e,!0);let r=q(e,"node",15);const n=gr(),i=O(()=>Ki(n.node));Ea({get node(){return f(i)}});var o=X(),s=C(o);{var a=d=>{to(d,{get node(){return r().operand},set node(c){r(r().operand=c,!0)}})},l=d=>{var c=Ey();w(d,c)};be(s,d=>{f(i)?d(a):d(l,!1)})}w(t,o),j()}var Ny=R("<!> <!> <!>",1);function ky(t,e){D(e,!0);let r=q(e,"node",15);const n=O(()=>is(r())||Dv(r()));ut(t,{get draggable(){return e.draggable},showRequired:!1,disableSelection:!0,get node(){return r()},set node(i){r(i)},children:(i,o)=>{var s=Ny(),a=C(s);Zi(a,{get draggable(){return e.draggable},get unmount(){return e.unmount},get disablePadding(){return f(n)},children:(M,z)=>{ge();var oe=Se();K(()=>ae(oe,Sg[r().op])),w(M,oe)},$$slots:{default:!0}});var l=I(a,2);{var d=M=>{eo(M,{showRequired:!1,get accept(){return Zu},onDrop:(z,oe)=>{r().operands.splice(oe,0,z)},get nodes(){return r().operands},set nodes(z){r(r().operands=z,!0)}})},c=O(()=>is(r())),u=M=>{Py(M,{get node(){return r()},set node(z){r(z)}})},g=O(()=>Ku(r())),h=M=>{to(M,{get node(){return r().operand},set node(z){r(r().operand=z,!0)}})},v=O(()=>Ju(r())),m=M=>{dy(M,{get node(){return r()},set node(z){r(z)}})},x=O(()=>Iv(r())),E=M=>{uy(M,{get node(){return r()},set node(z){r(z)}})},_=O(()=>Rv(r())),P=M=>{my(M,{get node(){return r()},set node(z){r(z)}})},y=O(()=>Wv(r())),b=M=>{Oy(M,{get node(){return r()},set node(z){r(z)}})},T=O(()=>Cv(r())),S=M=>{_y(M,{get node(){return r()},set node(z){r(z)}})},k=O(()=>Qu(r())),A=M=>{wy(M,{get node(){return r()},set node(z){r(z)}})},W=O(()=>jv(r()));be(l,M=>{f(c)?M(d):f(g)?M(u,1):f(v)?M(h,2):f(x)?M(m,3):f(_)?M(E,4):f(y)?M(P,5):f(T)?M(b,6):f(k)?M(S,7):f(W)&&M(A,8)})}var $=I(l,2);ct($,{class:"pt-4",get node(){return r()}}),w(i,s)},$$slots:{default:!0}}),j()}var Ty=R("<p>Field values must be split between branches without gaps.</p> <p>Mark a branch as <code>Complement</code> to include all remaining values.</p>",1),My=R("<!> <!>",1),Ay=R('<div class="flex items-center gap-2"><!> <!> <!></div>'),Iy=R('<div class="pb-2"><!></div>'),Ry=R("<!> <!> <!> <!>",1);function Wy(t,e){const r=Cl();D(e,!0);let n=q(e,"node",15);const i=je(),o=Qm(),s=Hm(),a=(d,c)=>{const u=Ji(d)?d:Xi(d);n().properties.splice(c,0,u),i.selectNode({current(){return n().properties.find(g=>g.id===u.id)?.property},update(g){const h=n().properties.findIndex(v=>v.id===u.id);n(n().properties[h].property=g,!0)}},!1)},l=O(()=>o.complementary===n().id);ut(t,{get draggable(){return e.draggable},showRequired:!1,class:"flex flex-col gap-0.5",get node(){return n()},set node(d){n(d)},children:(d,c)=>{var u=Ry(),g=C(u);Zi(g,{get draggable(){return e.draggable},unmount:()=>{o.complementary=void 0,e.unmount()},disablePadding:!0,append:_=>{var P=Ay(),y=L(P),b=()=>f(l),T=A=>{o.complementary=A?n().id:void 0};cf(y,{get id(){return r},onclick:A=>A.stopPropagation(),get checked(){return b()},set checked(A){T(A)}});var S=I(y,2);Dl(S,{get for(){return r},class:"text-muted-foreground text-base",onclick:A=>A.stopPropagation(),children:(A,W)=>{ge();var $=Se("Complement");w(A,$)},$$slots:{default:!0}});var k=I(S,2);Z(k,()=>gf,(A,W)=>{W(A,{children:($,M)=>{var z=My(),oe=C(z);Z(oe,()=>ff,(Fe,xt)=>{xt(Fe,{children:(Ve,Je)=>{pf(Ve,{class:"size-5 text-muted-foreground"})},$$slots:{default:!0}})});var _e=I(oe,2);Z(_e,()=>hf,(Fe,xt)=>{xt(Fe,{children:(Ve,Je)=>{var it=Ty();ge(2),w(Ve,it)},$$slots:{default:!0}})}),w($,z)},$$slots:{default:!0}})}),F(P),w(_,P)},children:(_,P)=>{ge();var y=Se();K(()=>ae(y,`Branch ${s.current+1}`)),w(_,y)},$$slots:{append:!0,default:!0}});var h=I(g,2);{var v=E=>{var _=Iy(),P=L(_);iy(P,{get node(){return n()},set node(y){n(y)}}),F(_),w(E,_)};be(h,E=>{f(l)||E(v)})}var m=I(h,2);eo(m,{showRequired:!1,get accept(){return _a},onDrop:a,get nodes(){return n().properties},set nodes(E){n(n().properties=E,!0)}});var x=I(m,2);{let E=O(()=>[n().properties.length===0&&"pt-4"]);ct(x,{get class(){return f(E)},get node(){return n()}})}w(d,u)},$$slots:{default:!0}}),j()}var Cy=R("<!> <!>",1);function Dy(t,e){D(e,!0);let r=q(e,"node",15);const n=je();ut(t,{get draggable(){return e.draggable},get showRequired(){return e.showRequired},class:"flex flex-col gap-0.5",get node(){return r()},set node(i){r(i)},children:(i,o)=>{var s=Cy(),a=C(s);Zr(a,{get node(){return r()},get draggable(){return e.draggable},get unmount(){return e.unmount},get showRequired(){return e.showRequired},disablePadding:!0,append:c=>{var u=()=>r().valueType,g=h=>{r(va(r().id,h,r().options))};mc(c,{get value(){return u()},set value(h){g(h)},get items(){return n.availableRangeValueTypes},get labels(){return ns}})},$$slots:{append:!0}});var l=I(a,2);ct(l,{get node(){return r()}}),w(i,s)},$$slots:{default:!0}}),j()}var jy=R('<div class="flex items-center bg-background rounded-sm"><!> <div class="px-2 flex items-center justify-center tabular-nums"> </div> <!></div>');function El(t,e){D(e,!0);var r=jy(),n=L(r);{let a=O(()=>e.value<=e.minimum);Me(n,{variant:"outline",class:"size-8 hover:bg-accent hover:text-accent-foreground",size:"icon",get onclick(){return e.onDown},get disabled(){return f(a)},children:(l,d)=>{vf(l,{})},$$slots:{default:!0}})}var i=I(n,2),o=L(i,!0);F(i);var s=I(i,2);Me(s,{variant:"outline",class:"size-8 hover:bg-accent hover:text-accent-foreground",size:"icon",get onclick(){return e.onUp},children:(a,l)=>{gs(a,{})},$$slots:{default:!0}}),F(r),K(()=>ae(o,e.value)),w(t,r),j()}const ri={Left:t=>[t.x-1,t.x,t.y,t.y+t.h],Top:t=>[t.x,t.x+t.w,t.y-1,t.y],Right:t=>[t.x+t.w,t.x+t.w+1,t.y,t.y+t.h],Bottom:t=>[t.x,t.x+t.w,t.y+t.h,t.y+t.h+1]};function ni(){return{toMove:new Set,toShrink:new Set}}function ii(t){return t.toMove.size===0&&t.toShrink.size===0}function oi(t,e){return{toShrink:t.toShrink.union(e.toShrink),toMove:t.toMove.union(e.toMove)}}var Fy=R('<div class="flex items-center gap-2 pr-2"><span class="text-muted-foreground">Cols</span> <!></div> <div class="flex items-center gap-2 pr-2"><span class="text-muted-foreground">Rows</span> <!></div>',1),qy=R('<div class="relative flex justify-center items-center"><!> <!> <!> <!> <!> <!> <!> <!> <!></div>'),Ly=R('<!> <div class="grid gap-2"></div> <!>',1);function zy(t,e){D(e,!0);let r=q(e,"node",15);const n=(y,b)=>`${y}-${b}`,i=O(()=>{const y=new Map,b=new Map,T=mf(r().height,()=>new Array(r().width).fill(null));for(let S=0;S<r().cells.length;S++){const k=r().cells[S],A=k.node;y.set(A.id,k),b.set(A.id,S);for(let W=k.y;W<k.y+k.h;W++){const $=T[W];for(let M=k.x;M<k.x+k.w;M++)$[M]=A.id}}return{grid:T,cells:y,indexes:b}}),o=O(()=>f(i).cells),s=O(()=>f(i).grid),a=O(()=>f(i).indexes),l=new Map,d=new Map;function c(y){let b=0,T=y;for(;d.get(T)!==void 0;)T=`${y}-${b++}`;return T}function u(y,b){const T=l.get(y);if(T!==void 0)return T;let S=c(b);return l.set(y,S),d.set(S,y),S}function g(y){const b=d.get(y);l.delete(b),d.delete(y)}function*h(){const y=new Set;for(let b=0;b<r().height;b++){const T=f(s)[b];for(let S=0;S<r().width;S++){const k=T[S];k===null?yield{id:c(n(S,b)),index:-1,cell:{x:S,y:b,w:1,h:1,node:void 0}}:y.has(k)||(y.add(k),yield{id:u(k,n(S,b)),index:f(a).get(k),cell:f(o).get(k)})}}}function v([y,b,T,S]){if(y<0||b>r().width||T<0||S>r().height)return!1;for(let k=T;k<S;k++){const A=f(s)[k];for(let W=y;W<b;W++)if(A[W]!==null)return!1}return!0}function m(y){let b=ni();const T=f(o).get(y);if(T.w>1)return b.toShrink.add(y),b;if(T.x<=0)return b;let S;const k=T.x-1;for(let A=T.y;A<T.y+T.h;A++){const W=f(s)[A][k];if(W===null||S===W)continue;S=W;const $=m(W);if(ii($))return $;b=oi(b,$)}return b.toMove.add(y),b}function x(){let y=ni();const b=new Set;let T;const S=r().width-1;for(let k=0;k<r().height;k++){const A=f(s)[k][S];if(A===null||T===A)continue;T=A;const W=m(A);ii(W)?b.add(A):y=oi(y,W)}for(const k of y.toShrink)f(o).get(k).w--;for(const k of y.toMove)f(o).get(k).x--;b.size>0&&r(r().cells=r().cells.filter(k=>!b.has(k.node.id)),!0),r(r().width--,!0)}function E(y){let b=ni();const T=f(o).get(y);if(T.h>1)return b.toShrink.add(y),b;if(T.y<=0)return b;let S;const k=f(s)[T.y-1];for(let A=T.x;A<T.x+T.w;A++){const W=k[A];if(W===null||S===W)continue;S=W;const $=E(W);if(ii($))return $;b=oi(b,$)}return b.toMove.add(y),b}function _(){let y=ni();const b=new Set;let T;const S=f(s)[r().height-1];for(let k=0;k<r().width;k++){const A=S[k];if(A===null||T===A)continue;T=A;const W=E(A);ii(W)?b.add(A):y=oi(y,W)}for(const k of y.toShrink)f(o).get(k).h--;for(const k of y.toMove)f(o).get(k).y--;b.size>0&&r(r().cells=r().cells.filter(k=>!b.has(k.node.id)),!0),r(r().height--,!0)}const P=je();ut(t,{get draggable(){return e.draggable},get showRequired(){return e.showRequired},class:"flex flex-col gap-0.5",get node(){return r()},set node(y){r(y)},children:(y,b)=>{var T=Ly(),S=C(T);Zr(S,{get node(){return r()},get draggable(){return e.draggable},get unmount(){return e.unmount},get showRequired(){return e.showRequired},append:$=>{var M=Fy(),z=C(M),oe=I(L(z),2);El(oe,{minimum:1,get value(){return r().width},onUp:()=>{r(r().width++,!0)},onDown:x}),F(z);var _e=I(z,2),Fe=I(L(_e),2);El(Fe,{minimum:1,get value(){return r().height},onUp:()=>{r(r().height++,!0)},onDown:_}),F(_e),w($,M)},$$slots:{append:!0}});var k=I(S,2);Ye(k,21,h,W=>W.id,(W,$)=>{const M=O(()=>f($).cell),z=O(()=>f(M).node!==void 0&&!P.isDragged&&P.selectedNode?.id===f(M).node.id),oe=O(()=>f(z)&&v(ri.Left(f(M)))),_e=O(()=>f(z)&&v(ri.Right(f(M)))),Fe=O(()=>f(z)&&v(ri.Top(f(M)))),xt=O(()=>f(z)&&v(ri.Bottom(f(M)))),Ve=O(()=>f(z)&&f(M).w>1),Je=O(()=>f(z)&&f(M).h>1);var it=qy(),St=L(it);{let te=O(()=>["absolute size-8 z-10 -left-10",f(oe)?"inline-flex":"hidden",f(Ve)&&"top-[calc(50%-2.2rem)]"]);Me(St,{get class(){return f(te)},variant:"secondary",size:"icon",onclick:B=>{B.stopPropagation(),f(M).x-=1,f(M).w+=1},children:(B,Ae)=>{Aa(B,{})},$$slots:{default:!0}})}var Ot=I(St,2);{let te=O(()=>["absolute size-8 z-10 -left-10",f(Ve)?"inline-flex":"hidden",f(oe)&&"top-[calc(50%+0.2rem)]"]);Me(Ot,{get class(){return f(te)},variant:"secondary",size:"icon",onclick:B=>{B.stopPropagation(),f(M).x+=1,f(M).w-=1},children:(B,Ae)=>{Ia(B,{})},$$slots:{default:!0}})}var he=I(Ot,2);{let te=O(()=>["absolute size-8 z-10 -right-10",f(_e)?"inline-flex":"hidden",f(Ve)&&"top-[calc(50%-2.2rem)]"]);Me(he,{get class(){return f(te)},variant:"secondary",size:"icon",onclick:B=>{B.stopPropagation(),f(M).w+=1},children:(B,Ae)=>{Ia(B,{})},$$slots:{default:!0}})}var Ht=I(he,2);{let te=O(()=>["absolute size-8 z-10 -right-10",f(Ve)?"inline-flex":"hidden",f(_e)&&"top-[calc(50%+0.2rem)]"]);Me(Ht,{get class(){return f(te)},variant:"secondary",size:"icon",onclick:B=>{B.stopPropagation(),f(M).w-=1},children:(B,Ae)=>{Aa(B,{})},$$slots:{default:!0}})}var Ke=I(Ht,2);{let te=O(()=>["absolute size-8 z-10 -top-10",f(Fe)?"inline-flex":"hidden",f(Je)&&"left-[calc(50%-2.2rem)]"]);Me(Ke,{get class(){return f(te)},variant:"secondary",size:"icon",onclick:B=>{B.stopPropagation(),f(M).y-=1,f(M).h+=1},children:(B,Ae)=>{Ra(B,{})},$$slots:{default:!0}})}var It=I(Ke,2);{let te=O(()=>["absolute size-8 z-10 -top-10",f(Je)?"inline-flex":"hidden",f(Fe)&&"left-[calc(50%+0.2rem)]"]);Me(It,{get class(){return f(te)},variant:"secondary",size:"icon",onclick:B=>{B.stopPropagation(),f(M).y+=1,f(M).h-=1},children:(B,Ae)=>{Wa(B,{})},$$slots:{default:!0}})}var $t=I(It,2);{let te=O(()=>["absolute size-8 z-10 -bottom-10",f(xt)?"inline-flex":"hidden",f(Je)&&"left-[calc(50%-2.2rem)]"]);Me($t,{get class(){return f(te)},variant:"secondary",size:"icon",onclick:B=>{B.stopPropagation(),f(M).h+=1},children:(B,Ae)=>{Wa(B,{})},$$slots:{default:!0}})}var Et=I($t,2);{let te=O(()=>["absolute size-8 z-10 -bottom-10",f(Je)?"inline-flex":"hidden",f(xt)&&"left-[calc(50%+0.2rem)]"]);Me(Et,{get class(){return f(te)},variant:"secondary",size:"icon",onclick:B=>{B.stopPropagation(),f(M).h-=1},children:(B,Ae)=>{Ra(B,{})},$$slots:{default:!0}})}var Rt=I(Et,2),Pt=()=>r().cells[f($).index]?.node,vr=te=>{te!==void 0?r().cells.push({...f(M),node:te}):(g(f($).id),r().cells.splice(f($).index,1))};_c(Rt,{showRequired:!0,get node(){return Pt()},set node(B){vr(B)},placeholder:B=>{ge();var Ae=Se("Empty cell");w(B,Ae)},$$slots:{placeholder:!0}}),F(it),K(()=>Ca(it,`grid-column: span ${f(M).w??""} / span ${f(M).w??""}; grid-row: span ${f(M).h??""} / span ${f(M).h??""};`)),w(W,it)}),F(k);var A=I(k,2);ct(A,{class:"pt-3",get node(){return r()}}),K(()=>Ca(k,`grid-template-columns: repeat(${r().width??""}, auto); grid-template-rows: repeat(${r().height??""}, auto);`)),w(y,T)},$$slots:{default:!0}}),j()}var Vy=R("<!> <!> <!>",1);function Uy(t,e){D(e,!0);let r=q(e,"node",15);ut(t,{get draggable(){return e.draggable},get showRequired(){return e.showRequired},class:"flex flex-col gap-0.5",get node(){return r()},set node(n){r(n)},children:(n,i)=>{var o=Vy(),s=C(o);Zr(s,{get node(){return r()},get draggable(){return e.draggable},get unmount(){return e.unmount},get showRequired(){return e.showRequired}});var a=I(s,2);_c(a,{showRequired:!1,get node(){return r().item},set node(d){r(r().item=d,!0)}});var l=I(a,2);ct(l,{class:"pt-3",get node(){return r()}}),w(n,o)},$$slots:{default:!0}}),j()}var By=R("<!> <!>",1);function Sr(t,e){D(e,!0);let r=q(e,"node",15);ut(t,{get draggable(){return e.draggable},get showRequired(){return e.showRequired},get node(){return r()},set node(n){r(n)},children:(n,i)=>{var o=By(),s=C(o);Zr(s,{get node(){return r()},get unmount(){return e.unmount},get draggable(){return e.draggable},get showRequired(){return e.showRequired},disablePadding:!0});var a=I(s,2);ct(a,{get node(){return r()}}),w(n,o)},$$slots:{default:!0}}),j()}const bc={[p.Object]:Km,[p.ObjectProperty]:ry,[p.ObjectPropertyDependency]:Wy,[p.Predicate]:ly,[p.Operator]:ky,[p.Array]:Uy,[p.Grid]:zy,[p.Enum]:Ol,[p.MultiEnum]:Ol,[p.String]:Sr,[p.Number]:Sr,[p.Boolean]:Sr,[p.File]:Sr,[p.Tags]:Sr,[p.Range]:Dy,[p.QrCode]:Sr};function ro(t,e){D(e,!0);let r=q(e,"node",15);const i=je().createDraggable({unmount:e.unmount,get node(){return r()}}),o=Qr();Om({get isDragged(){return o.isDragged||i.isDragged}});const s=O(()=>bc[r().type]);var a=X(),l=C(a);Z(l,()=>f(s),(d,c)=>{c(d,{get draggable(){return i},get unmount(){return e.unmount},get showRequired(){return e.showRequired},get node(){return r()},set node(u){r(u)}})}),w(t,a),j()}const Hy=t=>{ge();var e=Se("Drop form element here");w(t,e)};function _c(t,e){D(e,!0);let r=q(e,"node",15),n=q(e,"placeholder",3,Hy);const i=je(),o=Qr(),s={current(){return r()},update(u){r(u)}};var a=X(),l=C(a);{var d=u=>{ro(u,{unmount:()=>r(void 0),get showRequired(){return e.showRequired},get node(){return r()},set node(g){r(g)}})},c=u=>{const g=O(()=>i.createDroppable(o,{accept:_a,onDrop(h){r(Ji(h)?h.property:h),i.selectNode(s,e.showRequired)}}));Qi(u,{get placeholder(){return n()},get droppable(){return f(g)}})};be(l,u=>{r()?u(d):u(c,!1)})}w(t,a),j()}export{ab as B,kv as C,p as N,N as O,_c as S,ib as a,Sg as b,ob as c,cm as d,ve as e,Nm as f,je as g,sb as h,Kr as i,Om as s};
