var Na=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),ka=t=>{throw TypeError(t)};var it=(t,e,r)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&ka("Object expected");var n,i;r&&(n=e[Na("asyncDispose")]),n===void 0&&(n=e[Na("dispose")],r&&(i=n)),typeof n!="function"&&ka("Object not disposable"),i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.push([r,n,e])}else r&&t.push([r]);return e},ft=(t,e,r)=>{var n=typeof SuppressedError=="function"?SuppressedError:function(s,a,l,d){return d=Error(l),d.name="SuppressedError",d.error=s,d.suppressed=a,d},i=s=>e=r?new n(s,e,"An error was suppressed during disposal"):(r=!0,s),o=s=>{for(;s=t.pop();)try{var a=s[1]&&s[1].call(s[2]);if(s[0])return Promise.resolve(a).then(o,l=>(i(l),o()))}catch(l){i(l)}if(r)throw e};return o()};import{p as D,o as q,a9 as le,y as pe,an as Oc,x as He,G as Pl,a as w,b as j,d as L,f as R,r as F,h as f,A as S,ao as Ec,ap as Pc,H as I,w as ye,M as K,Q as ae,ac as xe,aq as Nc,ar as kc,as as Mc,R as $e,at as ds,au as Tc,av as Vt,aw as In,ax as Ac,ay as Ic,az as Rc,E as Fi,v as X,e as W,z as Ut,D as Rn,aA as us,aB as cs,c as Z,aC as Ar,aD as Nl,aE as kl,ae as fs,aF as ps,aG as qi,aH as Cc,aI as Wc,aJ as Dc,aK as jc,aL as Fc,aM as qc,aN as Lc,aO as hs,aP as Ml,aQ as zc,aR as Tl,aS as Li,aT as Ma,aU as Al,aV as Vc,aW as Il,aX as Rl,K as wr,aY as Oo,aZ as Uc,a_ as Bc,V as Hc,a7 as $c,a$ as Cn,_ as ao,i as V,b0 as Gc,$ as Ir,a4 as lo,b1 as Yc,s as se,I as Xc,a3 as Rr,L as zi,N as Cr,O as Wr,F as Vi,b2 as Jc,B as ke,n as ge,m as Cl,b3 as Wl,aj as Dl,ak as jl,al as Fl,am as ql,ai as or,b4 as Kc,b5 as Qc,b6 as Zc,b7 as ef,b8 as tf,b9 as rf,ba as nf,bb as of,bc as sf,bd as af,be as lf,bf as df,bg as uf,bh as cf,bi as ff,bj as Ta,bk as pf,bl as Aa,bm as Ia,bn as Ra,bo as Ca}from"./index-D-ra1IDm.js";import{D as Ll,b as hf,i as Eo,e as zl,g as gf,h as uo,j as Wa,k as vf,l as mf,m as yf,n as bf,o as _f,T as wf}from"./form.svelte-Bhc7XP0z.js";import{i as Da,F as xf,j as Vl,P as gs,k as Sf,m as Of,n as Ef}from"./_layout-C5dcYtvj.js";import{a as Pf}from"./shiki-DPfReRNO.js";var Nf=R("<form><!></form>");function kf(t,e){D(e,!0);let r=q(e,"ref",15);const n=le();var i=Nf();pe(i,s=>({onsubmit:n.submit,onreset:n.reset,...s}),[()=>Oc(n,e.config,"form",e.attributes,{class:"sjsf-form"})]);var o=L(i);He(o,()=>e.children),F(i),Pl(i,s=>r(s),()=>r()),w(t,i),j()}var Mf=R("<div><!></div>");function Tf(t,e){D(e,!0);const r=le(),n=S(()=>Ec(r,e.config,"layout","layouts",e.type,{class:"sjsf-layout"}));var i=Mf();pe(i,()=>({...f(n)}));var o=L(i);He(o,()=>e.children),F(i),w(t,i),j()}var Af=R("<legend> <!></legend>");function If(t,e){D(e,!0);const r=le();var n=Af();pe(n,a=>({...a}),[()=>Pc(r,e.config,"titleAttributes",{class:"sjsf-title","data-template":e.templateType})]);var i=L(n),o=I(i);{var s=a=>{var l=xe("*");w(a,l)};ye(o,a=>{e.config.required&&e.templateType==="fieldTemplate"&&a(s)})}F(n),K(()=>ae(i,`${e.title??""} `)),w(t,n),j()}var Rf=R("<div> </div>");function Cf(t,e){D(e,!0);const r=le();var n=Rf();pe(n,o=>({...o}),[()=>Nc(r,e.config,"descriptionAttributes",{class:"sjsf-description"})]);var i=L(n,!0);F(n),K(()=>ae(i,e.description)),w(t,n),j()}var Wf=R("<div> </div>");function Df(t,e){D(e,!0);const r=le();var n=Wf();pe(n,o=>({...o}),[()=>kc(r,e.config,"helpAttributes",{class:"sjsf-help"})]);var i=L(n,!0);F(n),K(()=>ae(i,e.help)),w(t,n),j()}var jf=R("<li> </li>"),Ff=R("<ul></ul>");function qf(t,e){D(e,!0);const r=le();var n=Ff();pe(n,i=>({...i}),[()=>Mc(r,e.config,"errorsList",{class:"sjsf-errors-list"})]),$e(n,21,()=>e.errors,ds,(i,o)=>{var s=jf(),a=L(s,!0);F(s),K(()=>ae(a,f(o))),w(i,s)}),F(n),w(t,n),j()}var Lf=R("<input/>");function zf(t,e){D(e,!0);let r=q(e,"value",15);const n=le(),i=S(()=>Vt(n,e.config,"file",e.handlers,{multiple:e.multiple,class:"sjsf-file","data-loading":e.loading,"data-processing":e.processing}));var o=Lf();pe(o,()=>({type:"file",...f(i)}),void 0,void 0,void 0,void 0,!0),Tc(o,r),w(t,o),j()}var Vf=R("<textarea></textarea>");function Uf(t,e){D(e,!0);let r=q(e,"value",15);const n=le(),i=S(()=>Ac(n,e.config,"textarea",e.handlers,{class:"sjsf-textarea"}));var o=Vf();Ic(o),pe(o,()=>({...f(i)})),In(o,r),w(t,o),j()}function Ul(t,e){D(e,!0);let r=Rn(e,["$$slots","$$events","$$legacy"]);const n=[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]];Rc(t,Fi({name:"grip-vertical"},()=>r,{get iconNode(){return n},children:(i,o)=>{var s=X(),a=W(s);He(a,()=>e.children??Ut),w(i,s)},$$slots:{default:!0}})),j()}var Bf=Symbol.for("preact-signals");function Ui(){if(zt>1)zt--;else{for(var t,e=!1;mn!==void 0;){var r=mn;for(mn=void 0,Po++;r!==void 0;){var n=r.o;if(r.o=void 0,r.f&=-3,!(8&r.f)&&Hl(r))try{r.c()}catch(i){e||(t=i,e=!0)}r=n}}if(Po=0,zt--,e)throw t}}function Dr(t){if(zt>0)return t();zt++;try{return t()}finally{Ui()}}var Q=void 0;function ne(t){var e=Q;Q=void 0;try{return t()}finally{Q=e}}var mn=void 0,zt=0,Po=0,mi=0;function Bl(t){if(Q!==void 0){var e=t.n;if(e===void 0||e.t!==Q)return e={i:0,S:t,p:Q.s,n:void 0,t:Q,e:void 0,x:void 0,r:e},Q.s!==void 0&&(Q.s.n=e),Q.s=e,t.n=e,32&Q.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=Q.s,e.n=void 0,Q.s.n=e,Q.s=e),e}}function We(t,e){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=e?.watched,this.Z=e?.unwatched,this.name=e?.name}We.prototype.brand=Bf;We.prototype.h=function(){return!0};We.prototype.S=function(t){var e=this,r=this.t;r!==t&&t.e===void 0&&(t.x=r,this.t=t,r!==void 0?r.e=t:ne(function(){var n;(n=e.W)==null||n.call(e)}))};We.prototype.U=function(t){var e=this;if(this.t!==void 0){var r=t.e,n=t.x;r!==void 0&&(r.x=n,t.e=void 0),n!==void 0&&(n.e=r,t.x=void 0),t===this.t&&(this.t=n,n===void 0&&ne(function(){var i;(i=e.Z)==null||i.call(e)}))}};We.prototype.subscribe=function(t){var e=this;return st(function(){var r=e.value,n=Q;Q=void 0;try{t(r)}finally{Q=n}},{name:"sub"})};We.prototype.valueOf=function(){return this.value};We.prototype.toString=function(){return this.value+""};We.prototype.toJSON=function(){return this.value};We.prototype.peek=function(){var t=Q;Q=void 0;try{return this.value}finally{Q=t}};Object.defineProperty(We.prototype,"value",{get:function(){var t=Bl(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(Po>100)throw new Error("Cycle detected");this.v=t,this.i++,mi++,zt++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{Ui()}}}});function Wn(t,e){return new We(t,e)}function Hl(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function $l(t){for(var e=t.s;e!==void 0;e=e.n){var r=e.S.n;if(r!==void 0&&(e.r=r),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function Gl(t){for(var e=t.s,r=void 0;e!==void 0;){var n=e.p;e.i===-1?(e.S.U(e),n!==void 0&&(n.n=e.n),e.n!==void 0&&(e.n.p=n)):r=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=n}t.s=r}function lr(t,e){We.call(this,void 0),this.x=t,this.s=void 0,this.g=mi-1,this.f=4,this.W=e?.watched,this.Z=e?.unwatched,this.name=e?.name}lr.prototype=new We;lr.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===mi))return!0;if(this.g=mi,this.f|=1,this.i>0&&!Hl(this))return this.f&=-2,!0;var t=Q;try{$l(this),Q=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(r){this.v=r,this.f|=16,this.i++}return Q=t,Gl(this),this.f&=-2,!0};lr.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}We.prototype.S.call(this,t)};lr.prototype.U=function(t){if(this.t!==void 0&&(We.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};lr.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(lr.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=Bl(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function ja(t,e){return new lr(t,e)}function Yl(t){var e=t.u;if(t.u=void 0,typeof e=="function"){zt++;var r=Q;Q=void 0;try{e()}catch(n){throw t.f&=-2,t.f|=8,vs(t),n}finally{Q=r,Ui()}}}function vs(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,Yl(t)}function Hf(t){if(Q!==this)throw new Error("Out-of-order effect");Gl(this),Q=t,this.f&=-2,8&this.f&&vs(this),Ui()}function Vr(t,e){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=e?.name}Vr.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};Vr.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Yl(this),$l(this),zt++;var t=Q;return Q=this,Hf.bind(this,t)};Vr.prototype.N=function(){2&this.f||(this.f|=2,this.o=mn,mn=this)};Vr.prototype.d=function(){this.f|=8,1&this.f||vs(this)};Vr.prototype.dispose=function(){this.d()};function st(t,e){var r=new Vr(t,e);try{r.c()}catch(i){throw r.d(),i}var n=r.d.bind(r);return n[Symbol.dispose]=n,n}var $f=Object.create,ms=Object.defineProperty,Gf=Object.defineProperties,Yf=Object.getOwnPropertyDescriptor,Xf=Object.getOwnPropertyDescriptors,Fa=Object.getOwnPropertySymbols,Jf=Object.prototype.hasOwnProperty,Kf=Object.prototype.propertyIsEnumerable,Qf=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Ur=t=>{throw TypeError(t)},No=(t,e,r)=>e in t?ms(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Zf=(t,e)=>{for(var r in e||(e={}))Jf.call(e,r)&&No(t,r,e[r]);if(Fa)for(var r of Fa(e))Kf.call(e,r)&&No(t,r,e[r]);return t},ep=(t,e)=>Gf(t,Xf(e)),qa=(t,e)=>ms(t,"name",{value:e,configurable:!0}),tp=t=>{var e;return[,,,$f((e=void 0)!=null?e:null)]},Xl=["class","method","getter","setter","accessor","field","value","get","set"],sn=t=>t!==void 0&&typeof t!="function"?Ur("Function expected"):t,rp=(t,e,r,n,i)=>({kind:Xl[t],name:e,metadata:n,addInitializer:o=>r._?Ur("Already initialized"):i.push(sn(o||null))}),Jl=(t,e)=>No(e,Qf("metadata"),t[3]),Gt=(t,e,r,n)=>{for(var i=0,o=t[e>>1],s=o&&o.length;i<s;i++)e&1?o[i].call(r):n=o[i].call(r,n);return n},Br=(t,e,r,n,i,o)=>{var s,a,l,d,c,u=e&7,h=!!(e&8),g=!!(e&16),v=u>3?t.length+1:u?h?1:2:0,m=Xl[u+5],O=u>3&&(t[v-1]=[]),E=t[v]||(t[v]=[]),_=u&&(!g&&!h&&(i=i.prototype),u<5&&(u>3||!g)&&Yf(u<4?i:{get[r](){return nr(this,o)},set[r](y){return jt(this,o,y)}},r));u?g&&u<4&&qa(o,(u>2?"set ":u>1?"get ":"")+r):qa(i,r);for(var P=n.length-1;P>=0;P--)d=rp(u,r,l={},t[3],E),u&&(d.static=h,d.private=g,c=d.access={has:g?y=>np(i,y):y=>r in y},u^3&&(c.get=g?y=>(u^1?nr:ip)(y,i,u^4?o:_.get):y=>y[r]),u>2&&(c.set=g?(y,b)=>jt(y,i,b,u^4?o:_.set):(y,b)=>y[r]=b)),a=(0,n[P])(u?u<4?g?o:_[m]:u>4?void 0:{get:_.get,set:_.set}:i,d),l._=1,u^4||a===void 0?sn(a)&&(u>4?O.unshift(a):u?g?o=a:_[m]=a:i=a):typeof a!="object"||a===null?Ur("Object expected"):(sn(s=a.get)&&(_.get=s),sn(s=a.set)&&(_.set=s),sn(s=a.init)&&O.unshift(s));return u||Jl(t,i),_&&ms(i,r,_),g?u^4?o:_:i},ys=(t,e,r)=>e.has(t)||Ur("Cannot "+r),np=(t,e)=>Object(e)!==e?Ur('Cannot use the "in" operator on this value'):t.has(e),nr=(t,e,r)=>(ys(t,e,"read from private field"),r?r.call(t):e.get(t)),Jn=(t,e,r)=>e.has(t)?Ur("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),jt=(t,e,r,n)=>(ys(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),ip=(t,e,r)=>(ys(t,e,"access private method"),r);function yi(t,e){if(e){let r;return ja(()=>{const n=t();return n&&r&&e(r,n)?r:(r=n,n)})}return ja(t)}function ko(t,e){if(Object.is(t,e))return!0;if(t===null||e===null)return!1;if(typeof t=="function"&&typeof e=="function")return t===e;if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}if(Array.isArray(t))return!Array.isArray(e)||t.length!==e.length?!1:!t.some((n,i)=>!ko(n,e[i]));if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),n=Object.keys(e);return r.length!==n.length?!1:!r.some(o=>!ko(t[o],e[o]))}return!1}function J({get:t},e){return{init(r){return Wn(r)},get(){return t.call(this).value},set(r){const n=t.call(this);n.peek()!==r&&(n.value=r)}}}function me(t,e){const r=new WeakMap;return function(){let n=r.get(this);return n||(n=yi(t.bind(this)),r.set(this,n)),n.value}}function co(t=!0){return function(e,r){r.addInitializer(function(){const n=r.kind==="field"?this:r.static?this:Object.getPrototypeOf(this),i=Object.getOwnPropertyDescriptor(n,r.name);i&&Object.defineProperty(n,r.name,ep(Zf({},i),{enumerable:t}))})}}function Dn(...t){const e=t.map(r=>st(r));return()=>e.forEach(r=>r())}var Kl,Ql,Zl,ed,td,rd,Ie,bs,fo,Mo,To,Oe,_s,po,nd,Ao,ws,ho,Io,Ro;rd=[J],td=[J],ed=[J],Zl=[co()],Ql=[co()],Kl=[co()];var Hr=class{constructor(t,e=Object.is){this.defaultValue=t,this.equals=e,Gt(Ie,5,this),Jn(this,Oe),Jn(this,bs,Gt(Ie,8,this)),Gt(Ie,11,this),Jn(this,_s,Gt(Ie,12,this)),Gt(Ie,15,this),Jn(this,ws,Gt(Ie,16,this)),Gt(Ie,19,this),this.reset=this.reset.bind(this),this.reset()}get current(){return nr(this,Oe,Io)}get initial(){return nr(this,Oe,Mo)}get previous(){return nr(this,Oe,nd)}set current(t){const e=ne(()=>nr(this,Oe,Io));t&&e&&this.equals(e,t)||Dr(()=>{nr(this,Oe,Mo)||jt(this,Oe,t,To),jt(this,Oe,e,Ao),jt(this,Oe,t,Ro)})}reset(t=this.defaultValue){Dr(()=>{jt(this,Oe,void 0,Ao),jt(this,Oe,t,To),jt(this,Oe,t,Ro)})}};Ie=tp();bs=new WeakMap;Oe=new WeakSet;_s=new WeakMap;ws=new WeakMap;fo=Br(Ie,20,"#initial",rd,Oe,bs),Mo=fo.get,To=fo.set;po=Br(Ie,20,"#previous",td,Oe,_s),nd=po.get,Ao=po.set;ho=Br(Ie,20,"#current",ed,Oe,ws),Io=ho.get,Ro=ho.set;Br(Ie,2,"current",Zl,Hr);Br(Ie,2,"initial",Ql,Hr);Br(Ie,2,"previous",Kl,Hr);Jl(Ie,Hr);function go(t){return ne(()=>{const e={};for(const r in t)e[r]=t[r];return e})}var op=Object.create,id=Object.defineProperty,sp=Object.getOwnPropertyDescriptor,La=Object.getOwnPropertySymbols,ap=Object.prototype.hasOwnProperty,lp=Object.prototype.propertyIsEnumerable,od=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Bi=t=>{throw TypeError(t)},za=Math.pow,Co=(t,e,r)=>e in t?id(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,dp=(t,e)=>{for(var r in e||(e={}))ap.call(e,r)&&Co(t,r,e[r]);if(La)for(var r of La(e))lp.call(e,r)&&Co(t,r,e[r]);return t},up=t=>{var e;return[,,,op((e=t?.[od("metadata")])!=null?e:null)]},sd=["class","method","getter","setter","accessor","field","value","get","set"],ad=t=>t!==void 0&&typeof t!="function"?Bi("Function expected"):t,cp=(t,e,r,n,i)=>({kind:sd[t],name:e,metadata:n,addInitializer:o=>r._?Bi("Already initialized"):i.push(ad(o||null))}),fp=(t,e)=>Co(e,od("metadata"),t[3]),pp=(t,e,r,n)=>{for(var i=0,o=t[e>>1],s=o&&o.length;i<s;i++)o[i].call(r);return n},ld=(t,e,r,n,i,o)=>{for(var s,a,l,d,c=e&7,u=!1,h=!1,g=2,v=sd[c+5],m=t[g]||(t[g]=[]),O=(i=i.prototype,sp(i,r)),E=n.length-1;E>=0;E--)l=cp(c,r,a={},t[3],m),l.static=u,l.private=h,d=l.access={has:_=>r in _},d.get=_=>_[r],s=(0,n[E])(O[v],l),a._=1,ad(s)&&(O[v]=s);return O&&id(i,r,O),i},dd=(t,e,r)=>e.has(t)||Bi("Cannot "+r),hp=(t,e,r)=>(dd(t,e,"read from private field"),e.get(t)),gp=(t,e,r)=>e.has(t)?Bi("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),vp=(t,e,r,n)=>(dd(t,e,"write to private field"),e.set(t,r),r),vt=class Wo{constructor(e,r){this.x=e,this.y=r}static delta(e,r){return new Wo(e.x-r.x,e.y-r.y)}static distance(e,r){return Math.hypot(e.x-r.x,e.y-r.y)}static equals(e,r){return e.x===r.x&&e.y===r.y}static from({x:e,y:r}){return new Wo(e,r)}},jn=class Jt{constructor(e,r,n,i){this.left=e,this.top=r,this.width=n,this.height=i,this.scale={x:1,y:1}}get inverseScale(){return{x:1/this.scale.x,y:1/this.scale.y}}translate(e,r){const{top:n,left:i,width:o,height:s,scale:a}=this,l=new Jt(i+e,n+r,o,s);return l.scale=dp({},a),l}get boundingRectangle(){const{width:e,height:r,left:n,top:i,right:o,bottom:s}=this;return{width:e,height:r,left:n,top:i,right:o,bottom:s}}get center(){const{left:e,top:r,right:n,bottom:i}=this;return new vt((e+n)/2,(r+i)/2)}get area(){const{width:e,height:r}=this;return e*r}equals(e){if(!(e instanceof Jt))return!1;const{left:r,top:n,width:i,height:o}=this;return r===e.left&&n===e.top&&i===e.width&&o===e.height}containsPoint(e){const{top:r,left:n,bottom:i,right:o}=this;return r<=e.y&&e.y<=i&&n<=e.x&&e.x<=o}intersectionArea(e){return e instanceof Jt?mp(this,e):0}intersectionRatio(e){const{area:r}=this,n=this.intersectionArea(e);return n/(e.area+r-n)}get bottom(){const{top:e,height:r}=this;return e+r}get right(){const{left:e,width:r}=this;return e+r}get aspectRatio(){const{width:e,height:r}=this;return e/r}get corners(){return[{x:this.left,y:this.top},{x:this.right,y:this.top},{x:this.left,y:this.bottom},{x:this.right,y:this.bottom}]}static from({top:e,left:r,width:n,height:i}){return new Jt(r,e,n,i)}static delta(e,r,n={x:"center",y:"center"}){const i=(o,s)=>{const a=n[s],l=s==="x"?o.left:o.top,d=s==="x"?o.width:o.height;return a=="start"?l:a=="end"?l+d:l+d/2};return vt.delta({x:i(e,"x"),y:i(e,"y")},{x:i(r,"x"),y:i(r,"y")})}static intersectionRatio(e,r){return Jt.from(e).intersectionRatio(Jt.from(r))}};function mp(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),s=i-n,a=o-r;return n<i&&r<o?s*a:0}var ud,cd,Do,si,Fn,Hi=class extends(Do=Hr,cd=[me],ud=[me],Do){constructor(t){const e=vt.from(t);super(e,(r,n)=>vt.equals(r,n)),pp(Fn,5,this),gp(this,si,0),this.velocity={x:0,y:0}}get delta(){return vt.delta(this.current,this.initial)}get direction(){const{current:t,previous:e}=this;if(!e)return null;const r={x:t.x-e.x,y:t.y-e.y};return!r.x&&!r.y?null:Math.abs(r.x)>Math.abs(r.y)?r.x>0?"right":"left":r.y>0?"down":"up"}get current(){return super.current}set current(t){const{current:e}=this,r=vt.from(t),n={x:r.x-e.x,y:r.y-e.y},i=Date.now(),o=i-hp(this,si),s=a=>Math.round(a/o*100);Dr(()=>{vp(this,si,i),this.velocity={x:s(n.x),y:s(n.y)},super.current=r})}reset(t=this.defaultValue){super.reset(vt.from(t)),this.velocity={x:0,y:0}}};Fn=up(Do);si=new WeakMap;ld(Fn,2,"delta",cd,Hi);ld(Fn,2,"direction",ud,Hi);fp(Fn,Hi);function jo({x:t,y:e},r){const n=Math.abs(t),i=Math.abs(e);return typeof r=="number"?Math.sqrt(za(n,2)+za(i,2))>r:"x"in r&&"y"in r?n>r.x&&i>r.y:"x"in r?n>r.x:"y"in r?i>r.y:!1}var fd=(t=>(t.Horizontal="x",t.Vertical="y",t))(fd||{}),pd=Object.values(fd),yp=Object.create,xs=Object.defineProperty,bp=Object.defineProperties,_p=Object.getOwnPropertyDescriptor,wp=Object.getOwnPropertyDescriptors,bi=Object.getOwnPropertySymbols,hd=Object.prototype.hasOwnProperty,gd=Object.prototype.propertyIsEnumerable,vd=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),$r=t=>{throw TypeError(t)},Fo=(t,e,r)=>e in t?xs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,md=(t,e)=>{for(var r in e||(e={}))hd.call(e,r)&&Fo(t,r,e[r]);if(bi)for(var r of bi(e))gd.call(e,r)&&Fo(t,r,e[r]);return t},yd=(t,e)=>bp(t,wp(e)),Va=(t,e)=>xs(t,"name",{value:e,configurable:!0}),bd=(t,e)=>{var r={};for(var n in t)hd.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&bi)for(var n of bi(t))e.indexOf(n)<0&&gd.call(t,n)&&(r[n]=t[n]);return r},Gr=t=>{var e;return[,,,yp((e=t?.[vd("metadata")])!=null?e:null)]},_d=["class","method","getter","setter","accessor","field","value","get","set"],an=t=>t!==void 0&&typeof t!="function"?$r("Function expected"):t,xp=(t,e,r,n,i)=>({kind:_d[t],name:e,metadata:n,addInitializer:o=>r._?$r("Already initialized"):i.push(an(o||null))}),dr=(t,e)=>Fo(e,vd("metadata"),t[3]),U=(t,e,r,n)=>{for(var i=0,o=t[e>>1],s=o&&o.length;i<s;i++)e&1?o[i].call(r):n=o[i].call(r,n);return n},Y=(t,e,r,n,i,o)=>{var s,a,l,d,c,u=e&7,h=!!(e&8),g=!!(e&16),v=u>3?t.length+1:u?h?1:2:0,m=_d[u+5],O=u>3&&(t[v-1]=[]),E=t[v]||(t[v]=[]),_=u&&(!g&&!h&&(i=i.prototype),u<5&&(u>3||!g)&&_p(u<4?i:{get[r](){return _e(this,o)},set[r](y){return Ze(this,o,y)}},r));u?g&&u<4&&Va(o,(u>2?"set ":u>1?"get ":"")+r):Va(i,r);for(var P=n.length-1;P>=0;P--)d=xp(u,r,l={},t[3],E),u&&(d.static=h,d.private=g,c=d.access={has:g?y=>Sp(i,y):y=>r in y},u^3&&(c.get=g?y=>(u^1?_e:Op)(y,i,u^4?o:_.get):y=>y[r]),u>2&&(c.set=g?(y,b)=>Ze(y,i,b,u^4?o:_.set):(y,b)=>y[r]=b)),a=(0,n[P])(u?u<4?g?o:_[m]:u>4?void 0:{get:_.get,set:_.set}:i,d),l._=1,u^4||a===void 0?an(a)&&(u>4?O.unshift(a):u?g?o=a:_[m]=a:i=a):typeof a!="object"||a===null?$r("Object expected"):(an(s=a.get)&&(_.get=s),an(s=a.set)&&(_.set=s),an(s=a.init)&&O.unshift(s));return u||dr(t,i),_&&xs(i,r,_),g?u^4?o:_:i},Ss=(t,e,r)=>e.has(t)||$r("Cannot "+r),Sp=(t,e)=>Object(e)!==e?$r('Cannot use the "in" operator on this value'):t.has(e),_e=(t,e,r)=>(Ss(t,e,"read from private field"),r?r.call(t):e.get(t)),ee=(t,e,r)=>e.has(t)?$r("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ze=(t,e,r,n)=>(Ss(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Op=(t,e,r)=>(Ss(t,e,"access private method"),r);function wd(t,e){return{plugin:t,options:e}}function Os(t){return e=>wd(t,e)}function Es(t){return typeof t=="function"?{plugin:t,options:void 0}:t}var xd,Sn,Ps,ai;xd=[J];var Le=class{constructor(t,e){this.manager=t,this.options=e,ee(this,Ps,U(Sn,8,this,!1)),U(Sn,11,this),ee(this,ai,new Set)}enable(){this.disabled=!1}disable(){this.disabled=!0}isDisabled(){return ne(()=>this.disabled)}configure(t){this.options=t}registerEffect(t){const e=st(t.bind(this));return _e(this,ai).add(e),e}destroy(){_e(this,ai).forEach(t=>t())}static configure(t){return wd(this,t)}};Sn=Gr(null);Ps=new WeakMap;ai=new WeakMap;Y(Sn,4,"disabled",xd,Le,Ps);dr(Sn,Le);var qn=class extends Le{},li,vo=class{constructor(t){this.manager=t,this.instances=new Map,ee(this,li,[])}get values(){return Array.from(this.instances.values())}set values(t){const e=t.map(Es).reduceRight((n,i)=>n.some(({plugin:o})=>o===i.plugin)?n:[i,...n],[]),r=e.map(({plugin:n})=>n);for(const n of _e(this,li))if(!r.includes(n)){if(n.prototype instanceof qn)continue;this.unregister(n)}for(const{plugin:n,options:i}of e)this.register(n,i);Ze(this,li,r)}get(t){return this.instances.get(t)}register(t,e){const r=this.instances.get(t);if(r)return r.options!==e&&(r.options=e),r;const n=new t(this.manager,e);return this.instances.set(t,n),n}unregister(t){const e=this.instances.get(t);e&&(e.destroy(),this.instances.delete(t))}destroy(){for(const t of this.instances.values())t.destroy();this.instances.clear()}};li=new WeakMap;function Ep(t,e){return t.priority===e.priority?t.type===e.type?e.value-t.value:e.type-t.type:e.priority-t.priority}var Kn=[],Or,Er,Pp=class extends Le{constructor(t){super(t),ee(this,Or),ee(this,Er),this.computeCollisions=this.computeCollisions.bind(this),Ze(this,Er,Wn(Kn)),this.destroy=Dn(()=>{const e=this.computeCollisions(),r=ne(()=>this.manager.dragOperation.position.current);if(e!==Kn){const n=_e(this,Or);if(Ze(this,Or,r),n&&r.x==n.x&&r.y==n.y)return}else Ze(this,Or,void 0);_e(this,Er).value=e},()=>{const{dragOperation:e}=this.manager;e.status.initialized&&this.forceUpdate()})}forceUpdate(t=!0){ne(()=>{t?_e(this,Er).value=this.computeCollisions():Ze(this,Or,void 0)})}computeCollisions(t,e){const{registry:r,dragOperation:n}=this.manager,{source:i,shape:o,status:s}=n;if(!s.initialized||!o)return Kn;const a=[],l=[];for(const d of t??r.droppables){if(d.disabled||i&&!d.accepts(i))continue;const c=e??d.collisionDetector;if(!c)continue;l.push(d),d.shape;const u=ne(()=>c({droppable:d,dragOperation:n}));u&&(d.collisionPriority!=null&&(u.priority=d.collisionPriority),a.push(u))}return l.length===0?Kn:(a.sort(Ep),a)}get collisions(){return _e(this,Er).value}};Or=new WeakMap;Er=new WeakMap;var Np=class{constructor(){this.registry=new Map}addEventListener(t,e){const{registry:r}=this,n=new Set(r.get(t));return n.add(e),r.set(t,n),()=>this.removeEventListener(t,e)}removeEventListener(t,e){const{registry:r}=this,n=new Set(r.get(t));n.delete(e),r.set(t,n)}dispatch(t,...e){const{registry:r}=this,n=r.get(t);if(n)for(const i of n)i(...e)}},kp=class extends Np{constructor(t){super(),this.manager=t}dispatch(t,e){const r=[e,this.manager];super.dispatch(t,...r)}};function di(t,e=!0){let r=!1;return yd(md({},t),{cancelable:e,get defaultPrevented(){return r},preventDefault(){e&&(r=!0)}})}var Mp=class extends qn{constructor(t){super(t);const e=(n,i)=>n.map(({id:o})=>o).join("")===i.map(({id:o})=>o).join("");let r=[];this.destroy=Dn(()=>{const{dragOperation:n,collisionObserver:i}=t;n.status.initializing&&(r=[],i.enable())},()=>{const{collisionObserver:n,monitor:i}=t,{collisions:o}=n;if(n.isDisabled())return;const s=di({collisions:o});if(i.dispatch("collision",s),s.defaultPrevented||e(o,r))return;r=o;const[a]=o;ne(()=>{var l;a?.id!==((l=t.dragOperation.target)==null?void 0:l.id)&&(n.disable(),t.actions.setDropTarget(a?.id).then(()=>{n.enable()}))})})}},Ns=(t=>(t[t.Lowest=0]="Lowest",t[t.Low=1]="Low",t[t.Normal=2]="Normal",t[t.High=3]="High",t[t.Highest=4]="Highest",t))(Ns||{}),ks=(t=>(t[t.Collision=0]="Collision",t[t.ShapeIntersection=1]="ShapeIntersection",t[t.PointerIntersection=2]="PointerIntersection",t))(ks||{}),Sd,Od,Ed,Pd,Nd,kd,Md,tt,Ms;Md=[J],kd=[me],Nd=[me],Pd=[me],Ed=[me],Od=[me],Sd=[me];var Tt=class{constructor(){U(tt,5,this),ee(this,Ms,U(tt,8,this,"idle")),U(tt,11,this)}get current(){return this.value}get idle(){return this.value==="idle"}get initializing(){return this.value==="initializing"}get initialized(){const{value:t}=this;return t!=="idle"&&t!=="initialization-pending"}get dragging(){return this.value==="dragging"}get dropped(){return this.value==="dropped"}set(t){this.value=t}};tt=Gr(null);Ms=new WeakMap;Y(tt,4,"value",Md,Tt,Ms);Y(tt,2,"current",kd,Tt);Y(tt,2,"idle",Nd,Tt);Y(tt,2,"initializing",Pd,Tt);Y(tt,2,"initialized",Ed,Tt);Y(tt,2,"dragging",Od,Tt);Y(tt,2,"dropped",Sd,Tt);dr(tt,Tt);var Tp=class{constructor(t){this.manager=t}setDragSource(t){const{dragOperation:e}=this.manager;e.sourceIdentifier=typeof t=="string"||typeof t=="number"?t:t.id}setDropTarget(t){return ne(()=>{const{dragOperation:e}=this.manager,r=t??null;if(e.targetIdentifier===r)return Promise.resolve(!1);e.targetIdentifier=r;const n=di({operation:e.snapshot()});return e.status.dragging&&this.manager.monitor.dispatch("dragover",n),this.manager.renderer.rendering.then(()=>n.defaultPrevented)})}start(t){return ne(()=>{const{dragOperation:e}=this.manager;if(t.source!=null&&this.setDragSource(t.source),!e.source)throw new Error("Cannot start a drag operation without a drag source");if(!e.status.idle)throw new Error("Cannot start a drag operation while another is active");const n=new AbortController,{event:i,coordinates:o}=t;Dr(()=>{e.status.set("initialization-pending"),e.shape=null,e.canceled=!1,e.activatorEvent=i??null,e.position.reset(o)});const s=di({operation:e.snapshot()});return this.manager.monitor.dispatch("beforedragstart",s),s.defaultPrevented?(e.reset(),n.abort(),n):(e.status.set("initializing"),e.controller=n,this.manager.renderer.rendering.then(()=>{if(n.signal.aborted)return;const{status:a}=e;a.current==="initializing"&&(e.status.set("dragging"),this.manager.monitor.dispatch("dragstart",{nativeEvent:i,operation:e.snapshot(),cancelable:!1}))}),n)})}move(t){return ne(()=>{var e,r;const{dragOperation:n}=this.manager,{status:i,controller:o}=n;if(!i.dragging||!o||o.signal.aborted)return;const s=di({nativeEvent:t.event,operation:n.snapshot(),by:t.by,to:t.to},(e=t.cancelable)!=null?e:!0);((r=t.propagate)==null||r)&&this.manager.monitor.dispatch("dragmove",s),queueMicrotask(()=>{var a,l,d,c,u;if(s.defaultPrevented)return;const h=(u=t.to)!=null?u:{x:n.position.current.x+((l=(a=t.by)==null?void 0:a.x)!=null?l:0),y:n.position.current.y+((c=(d=t.by)==null?void 0:d.y)!=null?c:0)};n.position.current=h})})}stop(t={}){return ne(()=>{var e,r;const{dragOperation:n}=this.manager,{controller:i}=n;if(!i||i.signal.aborted)return;let o;const s=()=>{const l={resume:()=>{},abort:()=>{}};return o=new Promise((d,c)=>{l.resume=d,l.abort=c}),l};i.abort();const a=()=>{this.manager.renderer.rendering.then(()=>{n.status.set("dropped");const l=ne(()=>{var c;return((c=n.source)==null?void 0:c.status)==="dropping"}),d=()=>{n.controller===i&&(n.controller=void 0),n.reset()};if(l){const{source:c}=n,u=st(()=>{c?.status==="idle"&&(u(),d())})}else this.manager.renderer.rendering.then(d)})};n.canceled=(e=t.canceled)!=null?e:!1,this.manager.monitor.dispatch("dragend",{nativeEvent:t.event,operation:n.snapshot(),canceled:(r=t.canceled)!=null?r:!1,suspend:s}),o?o.then(a).catch(()=>n.reset()):a()})}},Td,Ad,Id,Rd,qe,Ts,As,Is,Rs;Rd=[J],Id=[J],Ad=[J],Td=[J];var Bt=class{constructor(t,e){ee(this,Ts,U(qe,8,this)),U(qe,11,this),ee(this,As,U(qe,12,this)),U(qe,15,this),ee(this,Is,U(qe,16,this)),U(qe,19,this),ee(this,Rs,U(qe,20,this)),U(qe,23,this);const{effects:r,id:n,data:i={},disabled:o=!1,register:s=!0}=t;let a=n;this.manager=e,this.id=n,this.data=i,this.disabled=o,this.effects=()=>{var l;return[()=>{const{id:d,manager:c}=this;if(d!==a)return c?.registry.register(this),()=>c?.registry.unregister(this)},...(l=r?.())!=null?l:[]]},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.destroy=this.destroy.bind(this),e&&s&&queueMicrotask(this.register)}register(){var t;return(t=this.manager)==null?void 0:t.registry.register(this)}unregister(){var t;(t=this.manager)==null||t.registry.unregister(this)}destroy(){var t;(t=this.manager)==null||t.registry.unregister(this)}};qe=Gr(null);Ts=new WeakMap;As=new WeakMap;Is=new WeakMap;Rs=new WeakMap;Y(qe,4,"manager",Rd,Bt,Ts);Y(qe,4,"id",Id,Bt,As);Y(qe,4,"data",Ad,Bt,Is);Y(qe,4,"disabled",Td,Bt,Rs);dr(qe,Bt);var Ua=class{constructor(){this.map=Wn(new Map),this.cleanupFunctions=new WeakMap,this.register=(t,e)=>{const r=this.map.peek(),n=r.get(t),i=()=>this.unregister(t,e);if(n===e)return i;if(n){const a=this.cleanupFunctions.get(n);a?.(),this.cleanupFunctions.delete(n)}const o=new Map(r);o.set(t,e),this.map.value=o;const s=Dn(...e.effects());return this.cleanupFunctions.set(e,s),i},this.unregister=(t,e)=>{const r=this.map.peek();if(r.get(t)!==e)return;const n=this.cleanupFunctions.get(e);n?.(),this.cleanupFunctions.delete(e);const i=new Map(r);i.delete(t),this.map.value=i}}[Symbol.iterator](){return this.map.peek().values()}get value(){return this.map.value.values()}has(t){return this.map.value.has(t)}get(t){return this.map.value.get(t)}destroy(){for(const t of this){const e=this.cleanupFunctions.get(t);e?.(),t.destroy()}this.map.value=new Map}},Cd,Wd,Dd,jd,Fd,qd,qo,Re,Cs,Ws,Ds,bt=class extends(qo=Bt,qd=[J],Fd=[J],jd=[J],Dd=[me],Wd=[me],Cd=[me],qo){constructor(e,r){var n=e,{modifiers:i,type:o,sensors:s}=n,a=bd(n,["modifiers","type","sensors"]);super(a,r),U(Re,5,this),ee(this,Cs,U(Re,8,this)),U(Re,11,this),ee(this,Ws,U(Re,12,this)),U(Re,15,this),ee(this,Ds,U(Re,16,this,this.isDragSource?"dragging":"idle")),U(Re,19,this),this.type=o,this.sensors=s,this.modifiers=i,this.alignment=a.alignment}get isDropping(){return this.status==="dropping"&&this.isDragSource}get isDragging(){return this.status==="dragging"&&this.isDragSource}get isDragSource(){var e,r;return((r=(e=this.manager)==null?void 0:e.dragOperation.source)==null?void 0:r.id)===this.id}};Re=Gr(qo);Cs=new WeakMap;Ws=new WeakMap;Ds=new WeakMap;Y(Re,4,"type",qd,bt,Cs);Y(Re,4,"modifiers",Fd,bt,Ws);Y(Re,4,"status",jd,bt,Ds);Y(Re,2,"isDropping",Dd,bt);Y(Re,2,"isDragging",Wd,bt);Y(Re,2,"isDragSource",Cd,bt);dr(Re,bt);var Ld,zd,Vd,Ud,Bd,Hd,Lo,ve,js,Fs,qs,Ls,zs,_t=class extends(Lo=Bt,Hd=[J],Bd=[J],Ud=[J],Vd=[J],zd=[J],Ld=[me],Lo){constructor(e,r){var n=e,{accept:i,collisionDetector:o,collisionPriority:s,type:a}=n,l=bd(n,["accept","collisionDetector","collisionPriority","type"]);super(l,r),U(ve,5,this),ee(this,js,U(ve,8,this)),U(ve,11,this),ee(this,Fs,U(ve,12,this)),U(ve,15,this),ee(this,qs,U(ve,16,this)),U(ve,19,this),ee(this,Ls,U(ve,20,this)),U(ve,23,this),ee(this,zs,U(ve,24,this)),U(ve,27,this),this.accept=i,this.collisionDetector=o,this.collisionPriority=s,this.type=a}accepts(e){const{accept:r}=this;return r?typeof r=="function"?r(e):e.type?Array.isArray(r)?r.includes(e.type):e.type===r:!1:!0}get isDropTarget(){var e,r;return((r=(e=this.manager)==null?void 0:e.dragOperation.target)==null?void 0:r.id)===this.id}};ve=Gr(Lo);js=new WeakMap;Fs=new WeakMap;qs=new WeakMap;Ls=new WeakMap;zs=new WeakMap;Y(ve,4,"accept",Hd,_t,js);Y(ve,4,"type",Bd,_t,Fs);Y(ve,4,"collisionDetector",Ud,_t,qs);Y(ve,4,"collisionPriority",Vd,_t,Ls);Y(ve,4,"shape",zd,_t,zs);Y(ve,2,"isDropTarget",Ld,_t);dr(ve,_t);var jr=class extends Le{constructor(t,e){super(t,e),this.manager=t,this.options=e}},Ap=class extends AbortController{constructor(t,e){super(),this.constraints=t,this.onActivate=e,this.activated=!1;for(const r of t??[])r.controller=this}onEvent(t){var e;if(!this.activated)if((e=this.constraints)!=null&&e.length)for(const r of this.constraints)r.onEvent(t);else this.activate(t)}activate(t){this.activated||(this.activated=!0,this.onActivate(t))}abort(t){this.activated=!1,super.abort(t)}},ui,$d=class{constructor(t){this.options=t,ee(this,ui)}set controller(t){Ze(this,ui,t),t.signal.addEventListener("abort",()=>this.abort())}activate(t){var e;(e=_e(this,ui))==null||e.activate(t)}};ui=new WeakMap;var Ba=class extends Le{constructor(t,e){super(t,e),this.manager=t,this.options=e}apply(t){return t.transform}},Ip=class{constructor(t){this.draggables=new Ua,this.droppables=new Ua,this.plugins=new vo(t),this.sensors=new vo(t),this.modifiers=new vo(t)}register(t,e){if(t instanceof bt)return this.draggables.register(t.id,t);if(t instanceof _t)return this.droppables.register(t.id,t);if(t.prototype instanceof Ba)return this.modifiers.register(t,e);if(t.prototype instanceof jr)return this.sensors.register(t,e);if(t.prototype instanceof Le)return this.plugins.register(t,e);throw new Error("Invalid instance type")}unregister(t){if(t instanceof Bt)return t instanceof bt?this.draggables.unregister(t.id,t):t instanceof _t?this.droppables.unregister(t.id,t):()=>{};if(t.prototype instanceof Ba)return this.modifiers.unregister(t);if(t.prototype instanceof jr)return this.sensors.unregister(t);if(t.prototype instanceof Le)return this.plugins.unregister(t);throw new Error("Invalid instance type")}destroy(){this.draggables.destroy(),this.droppables.destroy(),this.plugins.destroy(),this.sensors.destroy(),this.modifiers.destroy()}},Gd,Yd,Xd,Jd,Kd,Qd,Zd,eu,tu,ln,ci,Pr,de,Vs,Us,Bs,Hs,$s,dn;tu=[me],eu=[J],Zd=[J],Qd=[J],Kd=[J],Jd=[J],Xd=[me],Yd=[me],Gd=[me];var at=class{constructor(t){U(de,5,this),ee(this,ln),ee(this,ci),ee(this,Pr,new Hr(void 0,(e,r)=>e&&r?e.equals(r):e===r)),this.status=new Tt,ee(this,Vs,U(de,8,this,!1)),U(de,11,this),ee(this,Us,U(de,12,this,null)),U(de,15,this),ee(this,Bs,U(de,16,this,null)),U(de,19,this),ee(this,Hs,U(de,20,this,null)),U(de,23,this),ee(this,$s,U(de,24,this,[])),U(de,27,this),this.position=new Hi({x:0,y:0}),ee(this,dn,{x:0,y:0}),Ze(this,ln,t)}get shape(){const{current:t,initial:e,previous:r}=_e(this,Pr);return!t||!e?null:{current:t,initial:e,previous:r}}set shape(t){t?_e(this,Pr).current=t:_e(this,Pr).reset()}get source(){var t;const e=this.sourceIdentifier;if(e==null)return null;const r=_e(this,ln).registry.draggables.get(e);return r&&Ze(this,ci,r),(t=r??_e(this,ci))!=null?t:null}get target(){var t;const e=this.targetIdentifier;return e!=null&&(t=_e(this,ln).registry.droppables.get(e))!=null?t:null}get transform(){const{x:t,y:e}=this.position.delta;let r={x:t,y:e};for(const n of this.modifiers)r=n.apply(yd(md({},this.snapshot()),{transform:r}));return Ze(this,dn,r),r}snapshot(){return ne(()=>({source:this.source,target:this.target,activatorEvent:this.activatorEvent,transform:_e(this,dn),shape:this.shape?go(this.shape):null,position:go(this.position),status:go(this.status),canceled:this.canceled}))}reset(){Dr(()=>{this.status.set("idle"),this.sourceIdentifier=null,this.targetIdentifier=null,_e(this,Pr).reset(),this.position.reset({x:0,y:0}),Ze(this,dn,{x:0,y:0}),this.modifiers=[]})}};de=Gr(null);ln=new WeakMap;ci=new WeakMap;Pr=new WeakMap;Vs=new WeakMap;Us=new WeakMap;Bs=new WeakMap;Hs=new WeakMap;$s=new WeakMap;dn=new WeakMap;Y(de,2,"shape",tu,at);Y(de,4,"canceled",eu,at,Vs);Y(de,4,"activatorEvent",Zd,at,Us);Y(de,4,"sourceIdentifier",Qd,at,Bs);Y(de,4,"targetIdentifier",Kd,at,Hs);Y(de,4,"modifiers",Jd,at,$s);Y(de,2,"source",Xd,at);Y(de,2,"target",Yd,at);Y(de,2,"transform",Gd,at);dr(de,at);var Rp={get rendering(){return Promise.resolve()}},Cp=class{constructor(e){this.destroy=()=>{this.dragOperation.status.idle||this.actions.stop({canceled:!0}),this.dragOperation.modifiers.forEach(c=>c.destroy()),this.registry.destroy(),this.collisionObserver.destroy()};const{plugins:r=[],sensors:n=[],modifiers:i=[],renderer:o=Rp}=e??{},s=new kp(this),a=new Ip(this);this.registry=a,this.monitor=s,this.renderer=o,this.actions=new Tp(this),this.dragOperation=new at(this),this.collisionObserver=new Pp(this),this.plugins=[Mp,...r],this.modifiers=i,this.sensors=n;const{destroy:l}=this,d=Dn(()=>{var c,u,h;const g=ne(()=>this.dragOperation.modifiers),v=this.modifiers;g!==v&&g.forEach(m=>m.destroy()),this.dragOperation.modifiers=(h=(u=(c=this.dragOperation.source)==null?void 0:c.modifiers)==null?void 0:u.map(m=>{const{plugin:O,options:E}=Es(m);return new O(this,E)}))!=null?h:v});this.destroy=()=>{d(),l()}}get plugins(){return this.registry.plugins.values}set plugins(e){this.registry.plugins.values=e}get modifiers(){return this.registry.modifiers.values}set modifiers(e){this.registry.modifiers.values=e}get sensors(){return this.registry.sensors.values}set sensors(e){this.registry.sensors.values=e}},ru=t=>{throw TypeError(t)},Gs=(t,e,r)=>e.has(t)||ru("Cannot "+r),H=(t,e,r)=>(Gs(t,e,"read from private field"),e.get(t)),Fe=(t,e,r)=>e.has(t)?ru("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ue=(t,e,r,n)=>(Gs(t,e,"write to private field"),e.set(t,r),r),nu=(t,e,r)=>(Gs(t,e,"access private method"),r);function $i(t){return t?t instanceof KeyframeEffect?!0:"getKeyframes"in t&&typeof t.getKeyframes=="function":!1}function Wp(t,e){const r=t.getAnimations();if(r.length>0)for(const n of r){if(n.playState!=="running")continue;const{effect:i}=n,s=($i(i)?i.getKeyframes():[]).filter(e);if(s.length>0)return[s[s.length-1],n]}return null}function Gi(t){const{width:e,height:r,top:n,left:i,bottom:o,right:s}=t.getBoundingClientRect();return{width:e,height:r,top:n,left:i,bottom:o,right:s}}function Ys(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Ln(t){return"nodeType"in t}function lt(t){var e,r,n;return t?Ys(t)?t:Ln(t)?"defaultView"in t?(e=t.defaultView)!=null?e:window:(n=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?n:window:window:window}function _i(t){const{Document:e}=lt(t);return t instanceof e||"nodeType"in t&&t.nodeType===Node.DOCUMENT_NODE}function sr(t){return!t||Ys(t)?!1:t instanceof lt(t).HTMLElement||"namespaceURI"in t&&typeof t.namespaceURI=="string"&&t.namespaceURI.endsWith("html")}function iu(t){return t instanceof lt(t).SVGElement||"namespaceURI"in t&&typeof t.namespaceURI=="string"&&t.namespaceURI.endsWith("svg")}function ur(t){return t?Ys(t)?t.document:Ln(t)?_i(t)?t:sr(t)||iu(t)?t.ownerDocument:document:document:document}function Dp(t){const{documentElement:e}=ur(t),r=e.clientWidth,n=e.clientHeight;return{top:0,left:0,right:r,bottom:n,width:r,height:n}}function jp(t,e){if(Fp(t)&&t.open===!1)return!1;const{overflow:r,overflowX:n,overflowY:i}=getComputedStyle(t);return r==="visible"&&n==="visible"&&i==="visible"}function Fp(t){return t.tagName==="DETAILS"}function wi(t,e=t.getBoundingClientRect(),r=0){var n;let i=e;const{ownerDocument:o}=t,s=(n=o.defaultView)!=null?n:window;let a=t.parentElement;for(;a&&a!==o.documentElement;){if(!jp(a)){const h=a.getBoundingClientRect(),g=r*(h.bottom-h.top),v=r*(h.right-h.left),m=r*(h.bottom-h.top),O=r*(h.right-h.left);i={top:Math.max(i.top,h.top-g),right:Math.min(i.right,h.right+v),bottom:Math.min(i.bottom,h.bottom+m),left:Math.max(i.left,h.left-O),width:0,height:0},i.width=i.right-i.left,i.height=i.bottom-i.top}a=a.parentElement}const l=s.innerWidth,d=s.innerHeight,c=r*d,u=r*l;return i={top:Math.max(i.top,0-c),right:Math.min(i.right,l+u),bottom:Math.min(i.bottom,d+c),left:Math.max(i.left,0-u),width:0,height:0},i.width=i.right-i.left,i.height=i.bottom-i.top,i.width<0&&(i.width=0),i.height<0&&(i.height=0),i}function Fr(t){return{x:t.clientX,y:t.clientY}}var ou=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function zo(t=document,e=new Set){if(e.has(t))return[];e.add(t);const r=[t];for(const n of Array.from(t.querySelectorAll("iframe, frame")))try{const i=n.contentDocument;i&&!e.has(i)&&r.push(...zo(i,e))}catch{}try{const n=t.defaultView;if(n&&n!==window.top){const i=n.parent;i&&i.document&&i.document!==t&&r.push(...zo(i.document,e))}}catch{}return r}function su(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Xs(t){return!t||!Ln(t)?!1:t instanceof lt(t).ShadowRoot}function xi(t){if(t&&Ln(t)){let e=t.getRootNode();if(Xs(e))return e;if(e instanceof Document)return e}return ur(t)}function au(t){return t.matchMedia("(prefers-reduced-motion: reduce)").matches}function qp(t){const e="input, textarea, select, canvas, [contenteditable]",r=t.cloneNode(!0),n=Array.from(t.querySelectorAll(e));return Array.from(r.querySelectorAll(e)).forEach((o,s)=>{const a=n[s];if(Ha(o)&&Ha(a)&&(o.type!=="file"&&(o.value=a.value),o.type==="radio"&&o.name&&(o.name=`Cloned__${o.name}`)),$a(o)&&$a(a)&&a.width>0&&a.height>0){const l=o.getContext("2d");l?.drawImage(a,0,0)}}),r}function Ha(t){return"value"in t}function $a(t){return t.tagName==="CANVAS"}function lu(t,{x:e,y:r}){const n=t.elementFromPoint(e,r);if(Lp(n)){const{contentDocument:i}=n;if(i){const{left:o,top:s}=n.getBoundingClientRect();return lu(i,{x:e-o,y:r-s})}}return n}function Lp(t){return t?.tagName==="IFRAME"}var Ga=new WeakMap;function zp(t){return!!t.closest(`
      input:not([disabled]),
      select:not([disabled]),
      textarea:not([disabled]),
      button:not([disabled]),
      a[href],
      [contenteditable]:not([contenteditable="false"])
    `)}var du=class{constructor(){this.entries=new Set,this.clear=()=>{for(const t of this.entries){const[e,{type:r,listener:n,options:i}]=t;e.removeEventListener(r,n,i)}this.entries.clear()}}bind(t,e){const r=Array.isArray(t)?t:[t],n=Array.isArray(e)?e:[e],i=[];for(const o of r)for(const s of n){const{type:a,listener:l,options:d}=s,c=[o,s];o.addEventListener(a,l,d),this.entries.add(c),i.push(c)}return function(){for(const[s,{type:a,listener:l,options:d}]of i)s.removeEventListener(a,l,d)}}};function qr(t){const e=t?.ownerDocument.defaultView;if(e&&e.self!==e.parent)return e.frameElement}function Vp(t){const e=new Set;let r=qr(t);for(;r;)e.add(r),r=qr(r);return e}function Up(t,e){const r=setTimeout(t,e);return()=>clearTimeout(r)}function uu(t,e){const r=()=>performance.now();let n,i;return function(...o){const s=this;i?(n?.(),n=Up(()=>{t.apply(s,o),i=r()},e-(r()-i))):(t.apply(s,o),i=r())}}function Bp(t,e){return t===e?!0:!t||!e?!1:t.top==e.top&&t.left==e.left&&t.right==e.right&&t.bottom==e.bottom}function Hp(t,e=t.getBoundingClientRect()){const{width:r,height:n}=wi(t,e);return r>0&&n>0}var $p=ou?ResizeObserver:class{observe(){}unobserve(){}disconnect(){}},fi,Gp=class extends $p{constructor(t){super(e=>{if(!H(this,fi)){Ue(this,fi,!0);return}t(e,this)}),Fe(this,fi,!1)}};fi=new WeakMap;var Ya=Array.from({length:100},(t,e)=>e/100),cu=75,Kt,Si,Wt,Qt,un,we,yn,cn,Oi,fu,pu,hu=class{constructor(t,e,r={debug:!1,skipInitial:!1}){this.element=t,this.callback=e,Fe(this,Oi),this.disconnect=()=>{var o,s,a;Ue(this,yn,!0),(o=H(this,Wt))==null||o.disconnect(),(s=H(this,Qt))==null||s.disconnect(),H(this,un).disconnect(),(a=H(this,we))==null||a.remove()},Fe(this,Kt,!0),Fe(this,Si),Fe(this,Wt),Fe(this,Qt),Fe(this,un),Fe(this,we),Fe(this,yn,!1),Fe(this,cn,uu(()=>{var o,s,a;const{element:l}=this;if((o=H(this,Qt))==null||o.disconnect(),H(this,yn)||!H(this,Kt)||!l.isConnected)return;const d=(s=l.ownerDocument)!=null?s:document,{innerHeight:c,innerWidth:u}=(a=d.defaultView)!=null?a:window,h=l.getBoundingClientRect(),g=wi(l,h),{top:v,left:m,bottom:O,right:E}=g,_=-Math.floor(v),P=-Math.floor(m),y=-Math.floor(u-E),b=-Math.floor(c-O),M=`${_}px ${y}px ${b}px ${P}px`;this.boundingClientRect=h,Ue(this,Qt,new IntersectionObserver(x=>{const[k]=x,{intersectionRect:A}=k;(k.intersectionRatio!==1?k.intersectionRatio:jn.intersectionRatio(A,wi(l)))!==1&&H(this,cn).call(this)},{threshold:Ya,rootMargin:M,root:d})),H(this,Qt).observe(l),nu(this,Oi,fu).call(this)},cu)),this.boundingClientRect=t.getBoundingClientRect(),Ue(this,Kt,Hp(t,this.boundingClientRect));let n=!0;this.callback=o=>{n&&(n=!1,r.skipInitial)||e(o)};const i=t.ownerDocument;r?.debug&&(Ue(this,we,document.createElement("div")),H(this,we).style.background="rgba(0,0,0,0.15)",H(this,we).style.position="fixed",H(this,we).style.pointerEvents="none",i.body.appendChild(H(this,we))),Ue(this,un,new IntersectionObserver(o=>{var s,a;const l=o[o.length-1],{boundingClientRect:d,isIntersecting:c}=l,{width:u,height:h}=d,g=H(this,Kt);Ue(this,Kt,c),!(!u&&!h)&&(g&&!c?((s=H(this,Qt))==null||s.disconnect(),this.callback(null),(a=H(this,Wt))==null||a.disconnect(),Ue(this,Wt,void 0),H(this,we)&&(H(this,we).style.visibility="hidden")):H(this,cn).call(this),c&&!H(this,Wt)&&(Ue(this,Wt,new Gp(H(this,cn))),H(this,Wt).observe(t)))},{threshold:Ya,root:i})),H(this,Kt)&&!r.skipInitial&&this.callback(this.boundingClientRect),H(this,un).observe(t)}};Kt=new WeakMap;Si=new WeakMap;Wt=new WeakMap;Qt=new WeakMap;un=new WeakMap;we=new WeakMap;yn=new WeakMap;cn=new WeakMap;Oi=new WeakSet;fu=function(){H(this,yn)||(nu(this,Oi,pu).call(this),!Bp(this.boundingClientRect,H(this,Si))&&(this.callback(this.boundingClientRect),Ue(this,Si,this.boundingClientRect)))};pu=function(){if(H(this,we)){const{top:t,left:e,width:r,height:n}=wi(this.element);H(this,we).style.overflow="hidden",H(this,we).style.visibility="visible",H(this,we).style.top=`${Math.floor(t)}px`,H(this,we).style.left=`${Math.floor(e)}px`,H(this,we).style.width=`${Math.floor(r)}px`,H(this,we).style.height=`${Math.floor(n)}px`}};var Qn=new WeakMap,Zn=new WeakMap;function Yp(t,e){let r=Qn.get(t);return r||(r={disconnect:new hu(t,i=>{const o=Qn.get(t);o&&o.callbacks.forEach(s=>s(i))},{skipInitial:!0}).disconnect,callbacks:new Set}),r.callbacks.add(e),Qn.set(t,r),()=>{r.callbacks.delete(e),r.callbacks.size===0&&(Qn.delete(t),r.disconnect())}}function Xp(t,e){const r=new Set;for(const n of t){const i=Yp(n,e);r.add(i)}return()=>r.forEach(n=>n())}function Jp(t,e){var r;const n=t.ownerDocument;if(!Zn.has(n)){const s=new AbortController,a=new Set;document.addEventListener("scroll",l=>a.forEach(d=>d(l)),{capture:!0,passive:!0,signal:s.signal}),Zn.set(n,{disconnect:()=>s.abort(),listeners:a})}const{listeners:i,disconnect:o}=(r=Zn.get(n))!=null?r:{};return!i||!o?()=>{}:(i.add(e),()=>{i.delete(e),i.size===0&&(o(),Zn.delete(n))})}var fn,pn,pi,Vo,Kp=class{constructor(t,e,r){this.callback=e,Fe(this,fn),Fe(this,pn,!1),Fe(this,pi),Fe(this,Vo,uu(s=>{if(!H(this,pn)&&s.target&&"contains"in s.target&&typeof s.target.contains=="function"){for(const a of H(this,pi))if(s.target.contains(a)){this.callback(H(this,fn).boundingClientRect);break}}},cu));const n=Vp(t),i=Xp(n,e),o=Jp(t,H(this,Vo));Ue(this,pi,n),Ue(this,fn,new hu(t,e,r)),this.disconnect=()=>{H(this,pn)||(Ue(this,pn,!0),i(),o(),H(this,fn).disconnect())}}};fn=new WeakMap;pn=new WeakMap;pi=new WeakMap;Vo=new WeakMap;function Uo(t){return"showPopover"in t&&"hidePopover"in t&&typeof t.showPopover=="function"&&typeof t.hidePopover=="function"}function On(t){try{Uo(t)&&t.isConnected&&t.hasAttribute("popover")&&!t.matches(":popover-open")&&t.showPopover()}catch{}}function Xa(t){return!ou||!t?!1:t===ur(t).scrollingElement}function gu(t){const e=lt(t),r=Xa(t)?Dp(t):Gi(t),n=Xa(t)?{height:e.innerHeight,width:e.innerWidth}:{height:t.clientHeight,width:t.clientWidth},i={current:{x:t.scrollLeft,y:t.scrollTop},max:{x:t.scrollWidth-n.width,y:t.scrollHeight-n.height}},o=i.current.y<=0,s=i.current.x<=0,a=i.current.y>=i.max.y,l=i.current.x>=i.max.x;return{rect:r,position:i,isTop:o,isLeft:s,isBottom:a,isRight:l}}function Qp(t,e){const{isTop:r,isBottom:n,isLeft:i,isRight:o,position:s}=gu(t),{x:a,y:l}=e??{x:0,y:0},d=!r&&s.current.y+l>0,c=!n&&s.current.y+l<s.max.y,u=!i&&s.current.x+a>0,h=!o&&s.current.x+a<s.max.x;return{top:d,bottom:c,left:u,right:h,x:u||h,y:d||c}}var Js=class{constructor(e){this.scheduler=e,this.pending=!1,this.tasks=new Set,this.resolvers=new Set,this.flush=()=>{const{tasks:r,resolvers:n}=this;this.pending=!1,this.tasks=new Set,this.resolvers=new Set;for(const i of r)i();for(const i of n)i()}}schedule(e){return this.tasks.add(e),this.pending||(this.pending=!0,this.scheduler(this.flush)),new Promise(r=>this.resolvers.add(r))}},Ei=new Js(t=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(t):t()}),Zp=new Js(t=>setTimeout(t,50)),Pi=new Map,eh=Pi.clear.bind(Pi);function At(t,e=!1){if(!e)return Ja(t);let r=Pi.get(t);return r||(r=Ja(t),Pi.set(t,r),Zp.schedule(eh),r)}function Ja(t){return lt(t).getComputedStyle(t)}function th(t,e=At(t,!0)){return e.position==="fixed"||e.position==="sticky"}function rh(t,e=At(t,!0)){const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=e[i];return typeof o=="string"?r.test(o):!1})}var nh={excludeElement:!0,escapeShadowDOM:!0};function Bo(t,e=nh){const{limit:r,excludeElement:n,escapeShadowDOM:i}=e,o=new Set;function s(a){if(r!=null&&o.size>=r||!a)return o;if(_i(a)&&a.scrollingElement!=null&&!o.has(a.scrollingElement))return o.add(a.scrollingElement),o;if(i&&Xs(a))return s(a.host);if(!sr(a))return iu(a)?s(a.parentElement):o;if(o.has(a))return o;const l=At(a,!0);if(n&&a===t||rh(a,l)&&o.add(a),th(a,l)){const{scrollingElement:d}=a.ownerDocument;return d&&o.add(d),o}return s(a.parentNode)}return t?s(t):o}function ih(t){const[e]=Bo(t,{limit:1});return e??null}function Lr(t,e=window.frameElement){const r={x:0,y:0,scaleX:1,scaleY:1};if(!t)return r;let n=qr(t);for(;n;){if(n===e)return r;const i=Gi(n),{x:o,y:s}=oh(n,i);r.x=r.x+i.left,r.y=r.y+i.top,r.scaleX=r.scaleX*o,r.scaleY=r.scaleY*s,n=qr(n)}return r}function oh(t,e=Gi(t)){const r=Math.round(e.width),n=Math.round(e.height);if(sr(t))return{x:r/t.offsetWidth,y:n/t.offsetHeight};const i=At(t,!0);return{x:(parseFloat(i.width)||r)/r,y:(parseFloat(i.height)||n)/n}}function sh(t){if(t==="none")return null;const e=t.split(" "),r=parseFloat(e[0]),n=parseFloat(e[1]);return isNaN(r)&&isNaN(n)?null:{x:isNaN(r)?n:r,y:isNaN(n)?r:n}}function Ks(t){if(t==="none")return null;const[e,r,n="0"]=t.split(" "),i={x:parseFloat(e),y:parseFloat(r),z:parseInt(n,10)};return isNaN(i.x)&&isNaN(i.y)?null:{x:isNaN(i.x)?0:i.x,y:isNaN(i.y)?0:i.y,z:isNaN(i.z)?0:i.z}}function Qs(t){var e,r,n,i,o,s,a,l,d;const{scale:c,transform:u,translate:h}=t,g=sh(c),v=Ks(h),m=ah(u);if(!m&&!g&&!v)return null;const O={x:(e=g?.x)!=null?e:1,y:(r=g?.y)!=null?r:1},E={x:(n=v?.x)!=null?n:0,y:(i=v?.y)!=null?i:0},_={x:(o=m?.x)!=null?o:0,y:(s=m?.y)!=null?s:0,scaleX:(a=m?.scaleX)!=null?a:1,scaleY:(l=m?.scaleY)!=null?l:1};return{x:E.x+_.x,y:E.y+_.y,z:(d=v?.z)!=null?d:0,scaleX:O.x*_.scaleX,scaleY:O.y*_.scaleY}}function ah(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}var et=(t=>(t[t.Idle=0]="Idle",t[t.Forward=1]="Forward",t[t.Reverse=-1]="Reverse",t))(et||{}),lh={x:.2,y:.2},dh={x:10,y:10};function uh(t,e,r,n=25,i=lh,o=dh){const{x:s,y:a}=e,{rect:l,isTop:d,isBottom:c,isLeft:u,isRight:h}=gu(t),g=Lr(t),v=At(t,!0),m=Qs(v),O=m!==null?m?.scaleX<0:!1,E=m!==null?m?.scaleY<0:!1,_=new jn(l.left*g.scaleX+g.x,l.top*g.scaleY+g.y,l.width*g.scaleX,l.height*g.scaleY),P={x:0,y:0},y={x:0,y:0},b={height:_.height*i.y,width:_.width*i.x};return(!d||E&&!c)&&a<=_.top+b.height&&r?.y!==1&&s>=_.left-o.x&&s<=_.right+o.x?(P.y=E?1:-1,y.y=n*Math.abs((_.top+b.height-a)/b.height)):(!c||E&&!d)&&a>=_.bottom-b.height&&r?.y!==-1&&s>=_.left-o.x&&s<=_.right+o.x&&(P.y=E?-1:1,y.y=n*Math.abs((_.bottom-b.height-a)/b.height)),(!h||O&&!u)&&s>=_.right-b.width&&r?.x!==-1&&a>=_.top-o.y&&a<=_.bottom+o.y?(P.x=O?-1:1,y.x=n*Math.abs((_.right-b.width-s)/b.width)):(!u||O&&!h)&&s<=_.left+b.width&&r?.x!==1&&a>=_.top-o.y&&a<=_.bottom+o.y&&(P.x=O?1:-1,y.x=n*Math.abs((_.left+b.width-s)/b.width)),{direction:P,speed:y}}function ch(t){return"scrollIntoViewIfNeeded"in t&&typeof t.scrollIntoViewIfNeeded=="function"}function fh(t,e=!1){if(ch(t)){t.scrollIntoViewIfNeeded(e);return}if(!sr(t))return t.scrollIntoView();var r=ih(t);if(!sr(r))return;const n=At(r,!0),i=parseInt(n.getPropertyValue("border-top-width")),o=parseInt(n.getPropertyValue("border-left-width")),s=t.offsetTop-r.offsetTop<r.scrollTop,a=t.offsetTop-r.offsetTop+t.clientHeight-i>r.scrollTop+r.clientHeight,l=t.offsetLeft-r.offsetLeft<r.scrollLeft,d=t.offsetLeft-r.offsetLeft+t.clientWidth-o>r.scrollLeft+r.clientWidth,c=s&&!a;(s||a)&&e&&(r.scrollTop=t.offsetTop-r.offsetTop-r.clientHeight/2-i+t.clientHeight/2),(l||d)&&e&&(r.scrollLeft=t.offsetLeft-r.offsetLeft-r.clientWidth/2-o+t.clientWidth/2),(s||a||l||d)&&!e&&t.scrollIntoView(c)}function ph(t,e,r){const{scaleX:n,scaleY:i,x:o,y:s}=e,a=t.left+o+(1-n)*parseFloat(r),l=t.top+s+(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),d=n?t.width*n:t.width,c=i?t.height*i:t.height;return{width:d,height:c,top:l,right:a+d,bottom:l+c,left:a}}function hh(t,e,r){const{scaleX:n,scaleY:i,x:o,y:s}=e,a=t.left-o-(1-n)*parseFloat(r),l=t.top-s-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),d=n?t.width/n:t.width,c=i?t.height/i:t.height;return{width:d,height:c,top:l,right:a+d,bottom:l+c,left:a}}function gh({element:t,keyframes:e,options:r}){return t.animate(e,r).finished}var vh=new Js(t=>setTimeout(t,0)),bn=new Map,mh=bn.clear.bind(bn);function yh(t){const e=t.ownerDocument;let r=bn.get(e);if(r)return r;r=e.getAnimations(),bn.set(e,r),vh.schedule(mh);const n=r.filter(i=>$i(i.effect)&&i.effect.target===t);return bn.set(t,n),r}function bh(t,e){const r=yh(t).filter(n=>{var i,o;if($i(n.effect)){const{target:s}=n.effect;if((o=s&&((i=e.isValidTarget)==null?void 0:i.call(e,s)))!=null?o:!0)return n.effect.getKeyframes().some(l=>{for(const d of e.properties)if(l[d])return!0})}}).map(n=>{const{effect:i,currentTime:o}=n,s=i?.getComputedTiming().duration;if(!(n.pending||n.playState==="finished")&&typeof s=="number"&&typeof o=="number"&&o<s)return n.currentTime=s,()=>{n.currentTime=o}});if(r.length>0)return()=>r.forEach(n=>n?.())}var kt=class extends jn{constructor(t,e={}){var r,n,i,o;const{frameTransform:s=Lr(t),ignoreTransforms:a,getBoundingClientRect:l=Gi}=e,d=bh(t,{properties:["transform","translate","scale","width","height"],isValidTarget:b=>(b!==t||su())&&b.contains(t)}),c=l(t);let{top:u,left:h,width:g,height:v}=c,m;const O=At(t),E=Qs(O),_={x:(r=E?.scaleX)!=null?r:1,y:(n=E?.scaleY)!=null?n:1},P=_h(t,O);d?.(),E&&(m=hh(c,E,O.transformOrigin),(a||P)&&(u=m.top,h=m.left,g=m.width,v=m.height));const y={width:(i=m?.width)!=null?i:g,height:(o=m?.height)!=null?o:v};if(P&&!a&&m){const b=ph(m,P,O.transformOrigin);u=b.top,h=b.left,g=b.width,v=b.height,_.x=P.scaleX,_.y=P.scaleY}s&&(a||(h*=s.scaleX,g*=s.scaleX,u*=s.scaleY,v*=s.scaleY),h+=s.x,u+=s.y),super(h,u,g,v),this.scale=_,this.intrinsicWidth=y.width,this.intrinsicHeight=y.height}};function _h(t,e){var r;const n=t.getAnimations();let i=null;if(!n.length)return null;for(const o of n){if(o.playState!=="running")continue;const s=$i(o.effect)?o.effect.getKeyframes():[],a=s[s.length-1];if(!a)continue;const{transform:l,translate:d,scale:c}=a;if(l||d||c){const u=Qs({transform:typeof l=="string"&&l?l:e.transform,translate:typeof d=="string"&&d?d:e.translate,scale:typeof c=="string"&&c?c:e.scale});u&&(i=i?{x:i.x+u.x,y:i.y+u.y,z:(r=i.z)!=null?r:u.z,scaleX:i.scaleX*u.scaleX,scaleY:i.scaleY*u.scaleY}:u)}}return i}function _n(t){return"style"in t&&typeof t.style=="object"&&t.style!==null&&"setProperty"in t.style&&"removeProperty"in t.style&&typeof t.style.setProperty=="function"&&typeof t.style.removeProperty=="function"}var wh=class{constructor(t){this.element=t,this.initial=new Map}set(t,e=""){const{element:r}=this;if(_n(r))for(const[n,i]of Object.entries(t)){const o=`${e}${n}`;this.initial.has(o)||this.initial.set(o,r.style.getPropertyValue(o)),r.style.setProperty(o,typeof i=="string"?i:`${i}px`)}}remove(t,e=""){const{element:r}=this;if(_n(r))for(const n of t){const i=`${e}${n}`;r.style.removeProperty(i)}}reset(){const{element:t}=this;if(_n(t)){for(const[e,r]of this.initial)t.style.setProperty(e,r);t.getAttribute("style")===""&&t.removeAttribute("style")}}};function ar(t){return t?t instanceof lt(t).Element||Ln(t)&&t.nodeType===Node.ELEMENT_NODE:!1}function Zs(t){if(!t)return!1;const{KeyboardEvent:e}=lt(t.target);return t instanceof e}function xh(t){if(!t)return!1;const{PointerEvent:e}=lt(t.target);return t instanceof e}function Sh(t){if(!ar(t))return!1;const{tagName:e}=t;return e==="INPUT"||e==="TEXTAREA"||Oh(t)}function Oh(t){return t.hasAttribute("contenteditable")&&t.getAttribute("contenteditable")!=="false"}var mo={};function Ho(t){const e=mo[t]==null?0:mo[t]+1;return mo[t]=e,`${t}-${e}`}var Eh=({dragOperation:t,droppable:e})=>{const r=t.position.current;if(!r)return null;const{id:n}=e;if(!e.shape)return null;if(e.shape.containsPoint(r)){const i=vt.distance(e.shape.center,r);return{id:n,value:1/i,type:ks.PointerIntersection,priority:Ns.High}}return null},Ph=({dragOperation:t,droppable:e})=>{const{shape:r}=t;if(!e.shape||!r?.current)return null;const n=r.current.intersectionArea(e.shape);if(n){const{position:i}=t,o=vt.distance(e.shape.center,i.current),a=n/(r.current.area+e.shape.area-n)/o;return{id:e.id,value:a,type:ks.ShapeIntersection,priority:Ns.Normal}}return null},Nh=t=>{var e;return(e=Eh(t))!=null?e:Ph(t)},kh=Object.create,ea=Object.defineProperty,Mh=Object.defineProperties,Th=Object.getOwnPropertyDescriptor,Ah=Object.getOwnPropertyDescriptors,Ni=Object.getOwnPropertySymbols,vu=Object.prototype.hasOwnProperty,mu=Object.prototype.propertyIsEnumerable,yu=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Yr=t=>{throw TypeError(t)},$o=(t,e,r)=>e in t?ea(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,En=(t,e)=>{for(var r in e||(e={}))vu.call(e,r)&&$o(t,r,e[r]);if(Ni)for(var r of Ni(e))mu.call(e,r)&&$o(t,r,e[r]);return t},ta=(t,e)=>Mh(t,Ah(e)),Ka=(t,e)=>ea(t,"name",{value:e,configurable:!0}),bu=(t,e)=>{var r={};for(var n in t)vu.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Ni)for(var n of Ni(t))e.indexOf(n)<0&&mu.call(t,n)&&(r[n]=t[n]);return r},Xr=t=>{var e;return[,,,kh((e=t?.[yu("metadata")])!=null?e:null)]},_u=["class","method","getter","setter","accessor","field","value","get","set"],hn=t=>t!==void 0&&typeof t!="function"?Yr("Function expected"):t,Ih=(t,e,r,n,i)=>({kind:_u[t],name:e,metadata:n,addInitializer:o=>r._?Yr("Already initialized"):i.push(hn(o||null))}),cr=(t,e)=>$o(e,yu("metadata"),t[3]),fe=(t,e,r,n)=>{for(var i=0,o=t[e>>1],s=o&&o.length;i<s;i++)e&1?o[i].call(r):n=o[i].call(r,n);return n},Ge=(t,e,r,n,i,o)=>{var s,a,l,d,c,u=e&7,h=!!(e&8),g=!!(e&16),v=u>3?t.length+1:u?h?1:2:0,m=_u[u+5],O=u>3&&(t[v-1]=[]),E=t[v]||(t[v]=[]),_=u&&(!g&&!h&&(i=i.prototype),u<5&&(u>3||!g)&&Th(u<4?i:{get[r](){return ie(this,o)},set[r](y){return Ce(this,o,y)}},r));u?g&&u<4&&Ka(o,(u>2?"set ":u>1?"get ":"")+r):Ka(i,r);for(var P=n.length-1;P>=0;P--)d=Ih(u,r,l={},t[3],E),u&&(d.static=h,d.private=g,c=d.access={has:g?y=>Rh(i,y):y=>r in y},u^3&&(c.get=g?y=>(u^1?ie:Pn)(y,i,u^4?o:_.get):y=>y[r]),u>2&&(c.set=g?(y,b)=>Ce(y,i,b,u^4?o:_.set):(y,b)=>y[r]=b)),a=(0,n[P])(u?u<4?g?o:_[m]:u>4?void 0:{get:_.get,set:_.set}:i,d),l._=1,u^4||a===void 0?hn(a)&&(u>4?O.unshift(a):u?g?o=a:_[m]=a:i=a):typeof a!="object"||a===null?Yr("Object expected"):(hn(s=a.get)&&(_.get=s),hn(s=a.set)&&(_.set=s),hn(s=a.init)&&O.unshift(s));return u||cr(t,i),_&&ea(i,r,_),g?u^4?o:_:i},ra=(t,e,r)=>e.has(t)||Yr("Cannot "+r),Rh=(t,e)=>Object(e)!==e?Yr('Cannot use the "in" operator on this value'):t.has(e),ie=(t,e,r)=>(ra(t,e,"read from private field"),r?r.call(t):e.get(t)),ue=(t,e,r)=>e.has(t)?Yr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ce=(t,e,r,n)=>(ra(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Pn=(t,e,r)=>(ra(t,e,"access private method"),r),Qa={role:"button",roleDescription:"draggable"},Ch="dnd-kit-description",Wh="dnd-kit-announcement",Dh={draggable:"To pick up a draggable item, press the space bar. While dragging, use the arrow keys to move the item in a given direction. Press space again to drop the item in its new position, or press escape to cancel."},jh={dragstart({operation:{source:t}}){if(t)return`Picked up draggable item ${t.id}.`},dragover({operation:{source:t,target:e}}){if(!(!t||t.id===e?.id))return e?`Draggable item ${t.id} was moved over droppable target ${e.id}.`:`Draggable item ${t.id} is no longer over a droppable target.`},dragend({operation:{source:t,target:e},canceled:r}){if(t)return r?`Dragging was cancelled. Draggable item ${t.id} was dropped.`:e?`Draggable item ${t.id} was dropped over droppable target ${e.id}`:`Draggable item ${t.id} was dropped.`}};function Fh(t){const e=t.tagName.toLowerCase();return["input","select","textarea","a","button"].includes(e)}function qh(t,e){const r=document.createElement("div");return r.id=t,r.style.setProperty("display","none"),r.textContent=e,r}function Lh(t){const e=document.createElement("div");return e.id=t,e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.style.setProperty("position","fixed"),e.style.setProperty("width","1px"),e.style.setProperty("height","1px"),e.style.setProperty("margin","-1px"),e.style.setProperty("border","0"),e.style.setProperty("padding","0"),e.style.setProperty("overflow","hidden"),e.style.setProperty("clip","rect(0 0 0 0)"),e.style.setProperty("clip-path","inset(100%)"),e.style.setProperty("white-space","nowrap"),e}var zh=["dragover","dragmove"],Vh=class extends Le{constructor(t,e){super(t);const{id:r,idPrefix:{description:n=Ch,announcement:i=Wh}={},announcements:o=jh,screenReaderInstructions:s=Dh,debounce:a=500}=e??{},l=r?`${n}-${r}`:Ho(n),d=r?`${i}-${r}`:Ho(i);let c,u,h,g;const v=(b=g)=>{!h||!b||h?.nodeValue!==b&&(h.nodeValue=b)},m=()=>Ei.schedule(v),O=Uh(m,a),E=Object.entries(o).map(([b,M])=>this.manager.monitor.addEventListener(b,(x,k)=>{const A=h;if(!A)return;const C=M?.(x,k);C&&A.nodeValue!==C&&(g=C,zh.includes(b)?O():(m(),O.cancel()))})),_=()=>{let b=[];c?.isConnected||(c=qh(l,s.draggable),b.push(c)),u?.isConnected||(u=Lh(d),h=document.createTextNode(""),u.appendChild(h),b.push(u)),b.length>0&&document.body.append(...b)},P=new Set;function y(){for(const b of P)b()}this.registerEffect(()=>{var b;P.clear();for(const M of this.manager.registry.draggables.value){const x=(b=M.handle)!=null?b:M.element;if(x){(!c||!u)&&P.add(_),(!Fh(x)||su())&&!x.hasAttribute("tabindex")&&P.add(()=>x.setAttribute("tabindex","0")),!x.hasAttribute("role")&&x.tagName.toLowerCase()!=="button"&&P.add(()=>x.setAttribute("role",Qa.role)),x.hasAttribute("aria-roledescription")||P.add(()=>x.setAttribute("aria-roledescription",Qa.roleDescription)),x.hasAttribute("aria-describedby")||P.add(()=>x.setAttribute("aria-describedby",l));for(const A of["aria-pressed","aria-grabbed"]){const C=String(M.isDragging);x.getAttribute(A)!==C&&P.add(()=>x.setAttribute(A,C))}const k=String(M.disabled);x.getAttribute("aria-disabled")!==k&&P.add(()=>x.setAttribute("aria-disabled",k))}}P.size>0&&Ei.schedule(y)}),this.destroy=()=>{super.destroy(),c?.remove(),u?.remove(),E.forEach(b=>b())}}};function Uh(t,e){let r;const n=()=>{clearTimeout(r),r=setTimeout(t,e)};return n.cancel=()=>clearTimeout(r),n}var Bh=class extends Le{constructor(t,e){super(t,e),this.manager=t;const r=yi(()=>{var n;return ur((n=this.manager.dragOperation.source)==null?void 0:n.element)});this.destroy=st(()=>{var n;const{dragOperation:i}=this.manager,{cursor:o="grabbing",nonce:s}=(n=this.options)!=null?n:{};if(i.status.initialized){const a=r.value,l=a.createElement("style");return s&&l.setAttribute("nonce",s),l.textContent=`* { cursor: ${o} !important; }`,a.head.appendChild(l),()=>l.remove()}})}},yo=new Map,wu,xu,Su,Ou,Go,wn,Mt,na,ki,Eu,Pu,fr=class extends(Go=qn,Ou=[J],Su=[me],xu=[me],wu=[me],Go){constructor(t){super(t),fe(Mt,5,this),ue(this,ki),ue(this,wn,new Set),ue(this,na,fe(Mt,8,this,new Set)),fe(Mt,11,this),this.registerEffect(Pn(this,ki,Eu))}register(t){return ie(this,wn).add(t),()=>{ie(this,wn).delete(t)}}addRoot(t){return ne(()=>{const e=new Set(this.additionalRoots);e.add(t),this.additionalRoots=e}),()=>{ne(()=>{const e=new Set(this.additionalRoots);e.delete(t),this.additionalRoots=e})}}get sourceRoot(){var t;const{source:e}=this.manager.dragOperation;return xi((t=e?.element)!=null?t:null)}get targetRoot(){var t;const{target:e}=this.manager.dragOperation;return xi((t=e?.element)!=null?t:null)}get roots(){const{status:t}=this.manager.dragOperation;if(t.initializing||t.initialized){const e=[this.sourceRoot,this.targetRoot].filter(r=>r!=null);return new Set([...e,...this.additionalRoots])}return new Set}};Mt=Xr(Go);wn=new WeakMap;na=new WeakMap;ki=new WeakSet;Eu=function(){const{roots:t}=this,e=[];for(const r of t)for(const n of ie(this,wn))e.push(Pn(this,ki,Pu).call(this,r,n));return()=>{for(const r of e)r()}};Pu=function(t,e){let r=yo.get(t);r||(r=new Map,yo.set(t,r));let n=r.get(e);if(!n){"adoptedStyleSheets"in t&&Array.isArray(t.adoptedStyleSheets);const o=_i(t)?t.defaultView:t.ownerDocument.defaultView,{CSSStyleSheet:s}=o??{};if(!s)return()=>{};const a=new s;a.replaceSync(e),t.adoptedStyleSheets.push(a),n={sheet:a,refCount:0,cleanup:()=>{var l;if(_i(t)||Xs(t)&&((l=t.host)!=null&&l.isConnected)){const d=t.adoptedStyleSheets.indexOf(a);d!==-1&&t.adoptedStyleSheets.splice(d,1)}r.delete(e),r.size===0&&yo.delete(t)}},r.set(e,n)}n.refCount++;let i=!1;return()=>{i||(i=!0,n.refCount--,n.refCount===0&&n.cleanup())}};Ge(Mt,4,"additionalRoots",Ou,fr,na);Ge(Mt,2,"sourceRoot",Su,fr);Ge(Mt,2,"targetRoot",xu,fr);Ge(Mt,2,"roots",wu,fr);cr(Mt,fr);var zn="data-dnd-",Yo=`${zn}dropping`,Pe="--dnd-",ht=`${zn}dragging`,Mi=`${zn}placeholder`,Hh=[ht,Mi,"popover","aria-pressed","aria-grabbing"],$h=["view-transition-name"],Gh=`
  :is(:root,:host) [${ht}] {
    position: fixed !important;
    pointer-events: none !important;
    touch-action: none;
    z-index: calc(infinity);
    will-change: translate;
    top: var(${Pe}top, 0px) !important;
    left: var(${Pe}left, 0px) !important;
    right: unset !important;
    bottom: unset !important;
    width: var(${Pe}width, auto);
    max-width: var(${Pe}width, auto);
    height: var(${Pe}height, auto);
    max-height: var(${Pe}height, auto);
    transition: var(${Pe}transition) !important;
  }

  :is(:root,:host) [${Mi}] {
    transition: none;
  }

  :is(:root,:host) [${Mi}='hidden'] {
    visibility: hidden;
  }

  [${ht}] * {
    pointer-events: none !important;
  }

  [${ht}]:not([${Yo}]) {
    translate: var(${Pe}translate) !important;
  }

  [${ht}][style*='${Pe}scale'] {
    scale: var(${Pe}scale) !important;
    transform-origin: var(${Pe}transform-origin) !important;
  }

  @layer {
    :where([${ht}][popover]) {
      overflow: visible;
      background: unset;
      border: unset;
      margin: unset;
      padding: unset;
      color: inherit;

      &:is(input, button) {
        border: revert;
        background: revert;
      }
    }
  }
  [${ht}]::backdrop, [${zn}overlay]:not([${ht}]) {
    display: none;
    visibility: hidden;
  }
`.replace(/\n+/g," ").replace(/\s+/g," ").trim();function Yh(t,e="hidden"){return ne(()=>{const{element:r,manager:n}=t;if(!r||!n)return;const i=Xh(r,n.registry.droppables),o=[],s=qp(r),{remove:a}=s;return Jh(i,s,o),Kh(s,e),s.remove=()=>{o.forEach(l=>l()),a.call(s)},s})}function Xh(t,e){const r=new Map;for(const n of e)if(n.element&&(t===n.element||t.contains(n.element))){const i=`${zn}${Ho("dom-id")}`;n.element.setAttribute(i,""),r.set(n,i)}return r}function Jh(t,e,r){for(const[n,i]of t){if(!n.element)continue;const o=`[${i}]`,s=e.matches(o)?e:e.querySelector(o);if(n.element.removeAttribute(i),!s)continue;const a=n.element;n.proxy=s,s.removeAttribute(i),Ga.set(a,s),r.push(()=>{Ga.delete(a),n.proxy=void 0})}}function Kh(t,e="hidden"){t.setAttribute("inert","true"),t.setAttribute("tab-index","-1"),t.setAttribute("aria-hidden","true"),t.setAttribute(Mi,e)}function Nu(t,e){return t===e?!0:qr(t)===qr(e)}function Za(t){const{target:e}=t;"newState"in t&&t.newState==="closed"&&ar(e)&&e.hasAttribute("popover")&&requestAnimationFrame(()=>On(e))}function Xo(t){return t.tagName==="TR"}function Qh(t,e,r){const n=new MutationObserver(i=>{let o=!1;for(const s of i){if(s.target!==t){o=!0;continue}if(s.type!=="attributes")continue;const a=s.attributeName;if(a.startsWith("aria-")||Hh.includes(a))continue;const l=t.getAttribute(a);if(a==="style"){if(_n(t)&&_n(e)){const d=t.style;for(const c of Array.from(e.style))d.getPropertyValue(c)===""&&e.style.removeProperty(c);for(const c of Array.from(d)){if($h.includes(c)||c.startsWith(Pe))continue;const u=d.getPropertyValue(c);e.style.setProperty(c,u)}}}else l!==null?e.setAttribute(a,l):e.removeAttribute(a)}o&&r&&(e.innerHTML=t.innerHTML)});return n.observe(t,{attributes:!0,subtree:!0,childList:!0}),n}function Zh(t,e,r){const n=new MutationObserver(i=>{for(const o of i)if(o.addedNodes.length!==0)for(const s of Array.from(o.addedNodes)){if(s.contains(t)&&t.nextElementSibling!==e){t.insertAdjacentElement("afterend",e),On(r);return}if(s.contains(e)&&e.previousElementSibling!==t){e.insertAdjacentElement("beforebegin",t),On(r);return}}});return n.observe(t.ownerDocument.body,{childList:!0,subtree:!0}),n}function eg(t){return new ResizeObserver(()=>{var e,r;const n=new kt(t.placeholder,{frameTransform:t.frameTransform,ignoreTransforms:!0}),i=(e=t.transformOrigin)!=null?e:{x:1,y:1},o=(t.width-n.width)*i.x+t.delta.x,s=(t.height-n.height)*i.y+t.delta.y;if(t.styles.set({width:n.width-t.widthOffset,height:n.height-t.heightOffset,top:t.top+s,left:t.left+o},Pe),(r=t.getElementMutationObserver())==null||r.takeRecords(),Xo(t.element)&&Xo(t.placeholder)){const a=Array.from(t.element.cells),l=Array.from(t.placeholder.cells);t.getSavedCellWidths()||t.setSavedCellWidths(a.map(d=>d.style.width));for(const[d,c]of a.entries()){const u=l[d];c.style.width=`${u.getBoundingClientRect().width}px`}}t.dragOperation.shape=new kt(t.feedbackElement)})}var tg=250,rg="ease";function ng(t){var e,r,n,i;const{animation:o}=t;if(typeof o=="function"){const _=o({element:t.element,feedbackElement:t.feedbackElement,placeholder:t.placeholder,translate:t.translate,moved:t.moved});Promise.resolve(_).then(()=>{t.cleanup(),requestAnimationFrame(t.restoreFocus)});return}const{duration:s=tg,easing:a=rg}=o??{};On(t.feedbackElement);const[,l]=(e=Wp(t.feedbackElement,_=>"translate"in _))!=null?e:[];l?.pause();const d=(r=t.placeholder)!=null?r:t.element,c={frameTransform:Nu(t.feedbackElement,d)?null:void 0},u=new kt(t.feedbackElement,c),h=(n=Ks(At(t.feedbackElement).translate))!=null?n:t.translate,g=new kt(d,c),v=jn.delta(u,g,t.alignment),m={x:h.x-v.x,y:h.y-v.y},O=Math.round(u.intrinsicHeight)!==Math.round(g.intrinsicHeight)?{minHeight:[`${u.intrinsicHeight}px`,`${g.intrinsicHeight}px`],maxHeight:[`${u.intrinsicHeight}px`,`${g.intrinsicHeight}px`]}:{},E=Math.round(u.intrinsicWidth)!==Math.round(g.intrinsicWidth)?{minWidth:[`${u.intrinsicWidth}px`,`${g.intrinsicWidth}px`],maxWidth:[`${u.intrinsicWidth}px`,`${g.intrinsicWidth}px`]}:{};t.styles.set({transition:t.transition},Pe),t.feedbackElement.setAttribute(Yo,""),(i=t.getElementMutationObserver())==null||i.takeRecords(),gh({element:t.feedbackElement,keyframes:ta(En(En({},O),E),{translate:[`${h.x}px ${h.y}px 0`,`${m.x}px ${m.y}px 0`]}),options:{duration:au(lt(t.feedbackElement))?0:t.moved||t.feedbackElement!==t.element?s:0,easing:a}}).then(()=>{t.feedbackElement.removeAttribute(Yo),l?.finish(),t.cleanup(),requestAnimationFrame(t.restoreFocus)})}var ku,Jo,Nn,ia,hi,Mu,Tu,kn=class extends(Jo=Le,ku=[J],Jo){constructor(e,r){super(e,r),ue(this,hi),ue(this,ia,fe(Nn,8,this)),fe(Nn,11,this),this.state={initial:{},current:{}};const n=e.registry.plugins.get(fr),i=n?.register(Gh);if(i){const o=this.destroy.bind(this);this.destroy=()=>{i(),o()}}this.registerEffect(Pn(this,hi,Mu).bind(this,n)),this.registerEffect(Pn(this,hi,Tu))}};Nn=Xr(Jo);ia=new WeakMap;hi=new WeakSet;Mu=function(t){const{overlay:e}=this;if(!e||!t)return;const r=xi(e);if(r)return t.addRoot(r)};Tu=function(){var t,e,r;const{state:n,manager:i,options:o}=this,{dragOperation:s}=i,{position:a,source:l,status:d}=s;if(d.idle){n.current={},n.initial={};return}if(!l)return;const{element:c,feedback:u}=l;if(!c||u==="none"||!d.initialized||d.initializing)return;const{initial:h}=n,g=(t=this.overlay)!=null?t:c,v=Lr(g),m=Lr(c),O=!Nu(c,g),E=new kt(c,{frameTransform:O?m:null,ignoreTransforms:!O}),_={x:m.scaleX/v.scaleX,y:m.scaleY/v.scaleY};let{width:P,height:y,top:b,left:M}=E;O&&(P=P/_.x,y=y/_.y);const x=new wh(g),{transition:k,translate:A,boxSizing:C,paddingBlockStart:$,paddingBlockEnd:T,paddingInlineStart:z,paddingInlineEnd:oe,borderInlineStartWidth:be,borderInlineEndWidth:je,borderBlockStartWidth:wt,borderBlockEndWidth:ze}=At(c),Ye=u==="clone",nt=C==="content-box",xt=nt?parseInt(z)+parseInt(oe)+parseInt(be)+parseInt(je):0,St=nt?parseInt($)+parseInt(T)+parseInt(wt)+parseInt(ze):0,he=u!=="move"&&!this.overlay?Yh(l,Ye?"clone":"hidden"):null,Ht=ne(()=>Zs(i.dragOperation.activatorEvent));if(A!=="none"){const re=Ks(A);re&&!h.translate&&(h.translate=re)}if(!h.transformOrigin){const re=ne(()=>a.current);h.transformOrigin={x:(re.x-M*v.scaleX-v.x)/(P*v.scaleX),y:(re.y-b*v.scaleY-v.y)/(y*v.scaleY)}}const{transformOrigin:Xe}=h,It=b*v.scaleY+v.y,$t=M*v.scaleX+v.x;if(!h.coordinates&&(h.coordinates={x:$t,y:It},_.x!==1||_.y!==1)){const{scaleX:re,scaleY:Te}=m,{x:Ct,y:br}=Xe;h.coordinates.x+=(P*re-P)*Ct,h.coordinates.y+=(y*Te-y)*br}h.dimensions||(h.dimensions={width:P,height:y}),h.frameTransform||(h.frameTransform=v);const Ot={x:h.coordinates.x-$t,y:h.coordinates.y-It},Rt={width:(h.dimensions.width*h.frameTransform.scaleX-P*v.scaleX)*Xe.x,height:(h.dimensions.height*h.frameTransform.scaleY-y*v.scaleY)*Xe.y},Et={x:Ot.x/v.scaleX+Rt.width,y:Ot.y/v.scaleY+Rt.height},vr={left:M+Et.x,top:b+Et.y};g.setAttribute(ht,"true");const te=ne(()=>s.transform),B=(e=h.translate)!=null?e:{x:0,y:0},Me=te.x*v.scaleX+B.x,mr=te.y*v.scaleY+B.y;x.set({width:P-xt,height:y-St,top:vr.top,left:vr.left,translate:`${Me}px ${mr}px 0`,transition:k?`${k}, translate 0ms linear`:"",scale:O?`${_.x} ${_.y}`:"","transform-origin":`${Xe.x*100}% ${Xe.y*100}%`},Pe),he&&(c.insertAdjacentElement("afterend",he),o?.rootElement&&(typeof o.rootElement=="function"?o.rootElement(l):o.rootElement).appendChild(c)),Uo(g)&&(g.hasAttribute("popover")||g.setAttribute("popover","manual"),On(g),g.addEventListener("beforetoggle",Za));let ct,en,yr;const Hn=eg({placeholder:he,element:c,feedbackElement:g,frameTransform:v,transformOrigin:Xe,width:P,height:y,top:b,left:M,widthOffset:xt,heightOffset:St,delta:Et,styles:x,dragOperation:s,getElementMutationObserver:()=>ct,getSavedCellWidths:()=>yr,setSavedCellWidths:re=>{yr=re}}),$n=new kt(g);ne(()=>s.shape=$n);const Gn=lt(g),tn=re=>{this.manager.actions.stop({event:re})},Yn=au(Gn);Ht&&Gn.addEventListener("resize",tn),ne(()=>l.status)==="idle"&&requestAnimationFrame(()=>l.status="dragging"),he&&(Hn.observe(he),ct=Qh(c,he,Ye),en=Zh(c,he,g));const Xn=(r=i.dragOperation.source)==null?void 0:r.id,no=()=>{var re;if(!Ht||Xn==null)return;const Te=i.registry.draggables.get(Xn),Ct=(re=Te?.handle)!=null?re:Te?.element;sr(Ct)&&Ct.focus()},io=()=>{var re;if(ct?.disconnect(),en?.disconnect(),Hn.disconnect(),Gn.removeEventListener("resize",tn),Uo(g)&&(g.removeEventListener("beforetoggle",Za),g.removeAttribute("popover")),g.removeAttribute(ht),x.reset(),yr&&Xo(c)){const Ct=Array.from(c.cells);for(const[br,_r]of Ct.entries())_r.style.width=(re=yr[br])!=null?re:""}l.status="idle";const Te=n.current.translate!=null;he&&(Te||he.parentElement!==g.parentElement)&&g.isConnected&&he.replaceWith(g),he?.remove()},oo=o?.dropAnimation,wc=Dn(()=>{var re;const{transform:Te,status:Ct}=s;if(!(!Te.x&&!Te.y&&!n.current.translate)&&Ct.dragging){const br=(re=h.translate)!=null?re:{x:0,y:0},_r={x:Te.x/v.scaleX+br.x,y:Te.y/v.scaleY+br.y},Pa=n.current.translate,xc=ne(()=>s.modifiers),so=ne(()=>{var rn;return(rn=s.shape)==null?void 0:rn.current}),Sc=Ht&&!Yn?"250ms cubic-bezier(0.25, 1, 0.5, 1)":"0ms linear";if(x.set({transition:`${k}, translate ${Sc}`,translate:`${_r.x}px ${_r.y}px 0`},Pe),ct?.takeRecords(),so&&so!==$n&&Pa&&!xc.length){const rn=vt.delta(_r,Pa);s.shape=jn.from(so.boundingRectangle).translate(rn.x*v.scaleX,rn.y*v.scaleY)}else s.shape=new kt(g);n.current.translate=_r}},function(){if(s.status.dropped){this.dispose(),l.status="dropping";let re=n.current.translate;const Te=re!=null;if(!re&&c!==g&&(re={x:0,y:0}),!re||oo===null){io();return}i.renderer.rendering.then(()=>{ng({element:c,feedbackElement:g,placeholder:he,translate:re,moved:Te,transition:k,alignment:l.alignment,styles:x,animation:oo??void 0,getElementMutationObserver:()=>ct,cleanup:io,restoreFocus:no})})}});return()=>{io(),wc()}};Ge(Nn,4,"overlay",ku,kn,ia);cr(Nn,kn);kn.configure=Os(kn);var ig=kn,nn=!0,og=!1,Au,Iu,Ru,Cu,qt,oa,sa;Cu=(Ru=[J],et.Forward),Iu=(Au=[J],et.Reverse);var Mn=class{constructor(){ue(this,oa,fe(qt,8,this,nn)),fe(qt,11,this),ue(this,sa,fe(qt,12,this,nn)),fe(qt,15,this)}isLocked(t){return t===et.Idle?!1:t==null?this[et.Forward]===nn&&this[et.Reverse]===nn:this[t]===nn}unlock(t){t!==et.Idle&&(this[t]=og)}};qt=Xr(null);oa=new WeakMap;sa=new WeakMap;Ge(qt,4,Cu,Ru,Mn,oa);Ge(qt,4,Iu,Au,Mn,sa);cr(qt,Mn);var sg=[et.Forward,et.Reverse],el=class{constructor(){this.x=new Mn,this.y=new Mn}isLocked(){return this.x.isLocked()&&this.y.isLocked()}},ag=class extends Le{constructor(t){super(t);const e=Wn(new el);let r=null;this.signal=e,st(()=>{const{status:n}=t.dragOperation;if(!n.initialized){r=null,e.value=new el;return}const{delta:i}=t.dragOperation.position;if(r){const o={x:tl(i.x,r.x),y:tl(i.y,r.y)},s=e.peek();Dr(()=>{for(const a of pd)for(const l of sg)o[a]===l&&s[a].unlock(l);e.value=s})}r=i})}get current(){return this.signal.peek()}};function tl(t,e){return Math.sign(t-e)}var Wu,Ko,Tn,aa,Dt,Qo,Yi=class extends(Ko=qn,Wu=[J],Ko){constructor(t){super(t),ue(this,aa,fe(Tn,8,this,!1)),fe(Tn,11,this),ue(this,Dt),ue(this,Qo,()=>{if(!ie(this,Dt))return;const{element:o,by:s}=ie(this,Dt);s.y&&(o.scrollTop+=s.y),s.x&&(o.scrollLeft+=s.x)}),this.scroll=o=>{var s;if(this.disabled)return!1;const a=this.getScrollableElements();if(!a)return Ce(this,Dt,void 0),!1;const{position:l}=this.manager.dragOperation,d=l?.current;if(d){const{by:c}=o??{},u=c?{x:rl(c.x),y:rl(c.y)}:void 0,h=u?void 0:this.scrollIntentTracker.current;if(h?.isLocked())return!1;for(const g of a){const v=Qp(g,c);if(v.x||v.y){const{speed:m,direction:O}=uh(g,d,u);if(h)for(const E of pd)h[E].isLocked(O[E])&&(m[E]=0,O[E]=0);if(O.x||O.y){const{x:E,y:_}=c??O,P=E*m.x,y=_*m.y;if(P||y){const b=(s=ie(this,Dt))==null?void 0:s.by;if(this.autoScrolling&&b&&(b.x&&!P||b.y&&!y))continue;return Ce(this,Dt,{element:g,by:{x:P,y}}),Ei.schedule(ie(this,Qo)),!0}}}}}return Ce(this,Dt,void 0),!1};let e=null,r=null;const n=yi(()=>{const{position:o,source:s}=t.dragOperation;if(!o)return null;const a=lu(xi(s?.element),o.current);return a&&(e=a),a??e}),i=yi(()=>{const o=n.value,{documentElement:s}=ur(o);if(!o||o===s){const{target:a}=t.dragOperation,l=a?.element;if(l){const d=Bo(l,{excludeElement:!1});return r=d,d}}if(o){const a=Bo(o,{excludeElement:!1});return this.autoScrolling&&r&&a.size<r?.size?r:(r=a,a)}return r=null,null},ko);this.getScrollableElements=()=>i.value,this.scrollIntentTracker=new ag(t),this.destroy=t.monitor.addEventListener("dragmove",o=>{this.disabled||o.defaultPrevented||!Zs(t.dragOperation.activatorEvent)||!o.by||this.scroll({by:o.by})&&o.preventDefault()})}};Tn=Xr(Ko);aa=new WeakMap;Dt=new WeakMap;Qo=new WeakMap;Ge(Tn,4,"autoScrolling",Wu,Yi,aa);cr(Tn,Yi);function rl(t){return t>0?et.Forward:t<0?et.Reverse:et.Idle}var lg=class{constructor(t){this.scheduler=t,this.pending=!1,this.tasks=new Set,this.resolvers=new Set,this.flush=()=>{const{tasks:e,resolvers:r}=this;this.pending=!1,this.tasks=new Set,this.resolvers=new Set;for(const n of e)n();for(const n of r)n()}}schedule(t){return this.tasks.add(t),this.pending||(this.pending=!0,this.scheduler(this.flush)),new Promise(e=>this.resolvers.add(e))}},dg=new lg(t=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(t):t()}),ug=10,Du=class extends Le{constructor(t,e){super(t);const r=t.registry.plugins.get(Yi);if(!r)throw new Error("AutoScroller plugin depends on Scroller plugin");this.destroy=st(()=>{if(this.disabled)return;const{position:n,status:i}=t.dragOperation;if(i.dragging)if(r.scroll()){r.autoScrolling=!0;const s=setInterval(()=>dg.schedule(r.scroll),ug);return()=>{clearInterval(s)}}else r.autoScrolling=!1})}},nl={capture:!0,passive:!0},gn,cg=class extends qn{constructor(t){super(t),ue(this,gn),this.handleScroll=()=>{ie(this,gn)==null&&Ce(this,gn,setTimeout(()=>{this.manager.collisionObserver.forceUpdate(!1),Ce(this,gn,void 0)},50))};const{dragOperation:e}=this.manager;this.destroy=st(()=>{var r,n,i;if(e.status.dragging){const s=(i=(n=(r=e.source)==null?void 0:r.element)==null?void 0:n.ownerDocument)!=null?i:document;return s.addEventListener("scroll",this.handleScroll,nl),()=>{s.removeEventListener("scroll",this.handleScroll,nl)}}})}};gn=new WeakMap;var fg=class extends Le{constructor(t,e){super(t,e),this.manager=t,this.destroy=st(()=>{var r;const{dragOperation:n}=this.manager,{nonce:i}=(r=this.options)!=null?r:{};if(n.status.initialized){const o=document.createElement("style");return i&&o.setAttribute("nonce",i),o.textContent="* { user-select: none !important; -webkit-user-select: none !important; }",document.head.appendChild(o),bo(),document.addEventListener("selectionchange",bo,{capture:!0}),()=>{document.removeEventListener("selectionchange",bo,{capture:!0}),o.remove()}}})}};function bo(){var t;(t=document.getSelection())==null||t.removeAllRanges()}var vn=Object.freeze({offset:10,keyboardCodes:{start:["Space","Enter"],cancel:["Escape"],end:["Space","Enter","Tab"],up:["ArrowUp"],down:["ArrowDown"],left:["ArrowLeft"],right:["ArrowRight"]},preventActivation(t,e){var r;const n=(r=e.handle)!=null?r:e.element;return t.target!==n}}),Nr,Ti=class extends jr{constructor(e,r){super(e),this.manager=e,this.options=r,ue(this,Nr,[]),this.listeners=new du,this.handleSourceKeyDown=(n,i,o)=>{if(this.disabled||n.defaultPrevented||!ar(n.target)||i.disabled)return;const{keyboardCodes:s=vn.keyboardCodes,preventActivation:a=vn.preventActivation}=o??{};s.start.includes(n.code)&&this.manager.dragOperation.status.idle&&(a?.(n,i)||this.handleStart(n,i,o))}}bind(e,r=this.options){return st(()=>{var i;const o=(i=e.handle)!=null?i:e.element,s=a=>{Zs(a)&&this.handleSourceKeyDown(a,e,r)};if(o)return o.addEventListener("keydown",s),()=>{o.removeEventListener("keydown",s)}})}handleStart(e,r,n){const{element:i}=r;if(!i)throw new Error("Source draggable does not have an associated element");e.preventDefault(),e.stopImmediatePropagation(),fh(i);const{center:o}=new kt(i);if(this.manager.actions.start({event:e,coordinates:{x:o.x,y:o.y},source:r}).signal.aborted)return this.cleanup();this.sideEffects();const a=ur(i),l=[this.listeners.bind(a,[{type:"keydown",listener:d=>this.handleKeyDown(d,r,n),options:{capture:!0}}])];ie(this,Nr).push(...l)}handleKeyDown(e,r,n){const{keyboardCodes:i=vn.keyboardCodes}=n??{};if(xr(e,[...i.end,...i.cancel])){e.preventDefault();const o=xr(e,i.cancel);this.handleEnd(e,o);return}xr(e,i.up)?this.handleMove("up",e):xr(e,i.down)&&this.handleMove("down",e),xr(e,i.left)?this.handleMove("left",e):xr(e,i.right)&&this.handleMove("right",e)}handleEnd(e,r){this.manager.actions.stop({event:e,canceled:r}),this.cleanup()}handleMove(e,r){var n,i;const{shape:o}=this.manager.dragOperation,s=r.shiftKey?5:1;let a={x:0,y:0},l=(i=(n=this.options)==null?void 0:n.offset)!=null?i:vn.offset;if(typeof l=="number"&&(l={x:l,y:l}),!!o){switch(e){case"up":a={x:0,y:-l.y*s};break;case"down":a={x:0,y:l.y*s};break;case"left":a={x:-l.x*s,y:0};break;case"right":a={x:l.x*s,y:0};break}(a.x||a.y)&&(r.preventDefault(),this.manager.actions.move({event:r,by:a}))}}sideEffects(){const e=this.manager.registry.plugins.get(Du);e?.disabled===!1&&(e.disable(),ie(this,Nr).push(()=>{e.enable()}))}cleanup(){ie(this,Nr).forEach(e=>e()),Ce(this,Nr,[])}destroy(){this.cleanup(),this.listeners.clear()}};Nr=new WeakMap;Ti.configure=Os(Ti);Ti.defaults=vn;var pg=Ti;function xr(t,e){return e.includes(t.code)}var Zt,hg=class extends $d{constructor(){super(...arguments),ue(this,Zt)}onEvent(t){switch(t.type){case"pointerdown":Ce(this,Zt,Fr(t));break;case"pointermove":if(!ie(this,Zt))return;const{x:e,y:r}=Fr(t),n={x:e-ie(this,Zt).x,y:r-ie(this,Zt).y},{tolerance:i}=this.options;if(i&&jo(n,i)){this.abort();return}jo(n,this.options.value)&&this.activate(t);break;case"pointerup":this.abort();break}}abort(){Ce(this,Zt,void 0)}};Zt=new WeakMap;var kr,er,gg=class extends $d{constructor(){super(...arguments),ue(this,kr),ue(this,er)}onEvent(t){switch(t.type){case"pointerdown":Ce(this,er,Fr(t)),Ce(this,kr,setTimeout(()=>this.activate(t),this.options.value));break;case"pointermove":if(!ie(this,er))return;const{x:e,y:r}=Fr(t),n={x:e-ie(this,er).x,y:r-ie(this,er).y};jo(n,this.options.tolerance)&&this.abort();break;case"pointerup":this.abort();break}}abort(){ie(this,kr)&&(clearTimeout(ie(this,kr)),Ce(this,er,void 0),Ce(this,kr,void 0))}};kr=new WeakMap;er=new WeakMap;var Tr=class{};Tr.Delay=gg;Tr.Distance=hg;var Zo=Object.freeze({activationConstraints(t,e){var r;const{pointerType:n,target:i}=t;if(!(n==="mouse"&&ar(i)&&(e.handle===i||(r=e.handle)!=null&&r.contains(i))))return n==="touch"?[new Tr.Delay({value:250,tolerance:5})]:Sh(i)&&!t.defaultPrevented?[new Tr.Delay({value:200,tolerance:0})]:[new Tr.Delay({value:200,tolerance:10}),new Tr.Distance({value:5})]},preventActivation(t,e){var r;const{target:n}=t;return n===e.element||n===e.handle||!ar(n)||(r=e.handle)!=null&&r.contains(n)?!1:zp(n)}}),Mr,Ai=class extends jr{constructor(e,r){super(e),this.manager=e,this.options=r,ue(this,Mr,new Set),this.listeners=new du,this.latest={event:void 0,coordinates:void 0},this.handleMove=()=>{const{event:n,coordinates:i}=this.latest;!n||!i||this.manager.actions.move({event:n,to:i})},this.handleCancel=this.handleCancel.bind(this),this.handlePointerUp=this.handlePointerUp.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}activationConstraints(e,r,n=this.options){const{activationConstraints:i=Zo.activationConstraints}=n??{};return typeof i=="function"?i(e,r):i}bind(e,r=this.options){return st(()=>{var i;const o=new AbortController,{signal:s}=o,a=d=>{xh(d)&&this.handlePointerDown(d,e,r)};let l=[(i=e.handle)!=null?i:e.element];r?.activatorElements&&(Array.isArray(r.activatorElements)?l=r.activatorElements:l=r.activatorElements(e));for(const d of l)d&&(bg(d.ownerDocument.defaultView),d.addEventListener("pointerdown",a,{signal:s}));return()=>o.abort()})}handlePointerDown(e,r,n){if(this.disabled||!e.isPrimary||e.button!==0||!ar(e.target)||r.disabled||mg(e)||!this.manager.dragOperation.status.idle)return;const{preventActivation:i=Zo.preventActivation}=n??{};if(i?.(e,r))return;const{target:o}=e,s=sr(o)&&o.draggable&&o.getAttribute("draggable")==="true",a=Lr(r.element),{x:l,y:d}=Fr(e);this.initialCoordinates={x:l*a.scaleX+a.x,y:d*a.scaleY+a.y};const c=this.activationConstraints(e,r,n);e.sensor=this;const u=new Ap(c,m=>this.handleStart(r,m));u.signal.onabort=()=>this.handleCancel(e),u.onEvent(e),this.controller=u;const h=zo(),g=this.listeners.bind(h,[{type:"pointermove",listener:m=>this.handlePointerMove(m,r)},{type:"pointerup",listener:this.handlePointerUp,options:{capture:!0}},{type:"dragstart",listener:s?this.handleCancel:ei,options:{capture:!0}}]),v=()=>{g(),this.initialCoordinates=void 0};ie(this,Mr).add(v)}handlePointerMove(e,r){var n,i;if(((n=this.controller)==null?void 0:n.activated)===!1){(i=this.controller)==null||i.onEvent(e);return}if(this.manager.dragOperation.status.dragging){const o=Fr(e),s=Lr(r.element);o.x=o.x*s.scaleX+s.x,o.y=o.y*s.scaleY+s.y,e.preventDefault(),e.stopPropagation(),this.latest.event=e,this.latest.coordinates=o,Ei.schedule(this.handleMove)}}handlePointerUp(e){const{status:r}=this.manager.dragOperation;if(!r.idle){e.preventDefault(),e.stopPropagation();const n=!r.initialized;this.manager.actions.stop({event:e,canceled:n})}this.cleanup()}handleKeyDown(e){e.key==="Escape"&&(e.preventDefault(),this.handleCancel(e))}handleStart(e,r){const{manager:n,initialCoordinates:i}=this;if(!i||!n.dragOperation.status.idle||r.defaultPrevented)return;if(n.actions.start({coordinates:i,event:r,source:e}).signal.aborted)return this.cleanup();r.preventDefault();const a=ur(r.target).body;a.setPointerCapture(r.pointerId);const l=ar(r.target)?[r.target,a]:a,d=this.listeners.bind(l,[{type:"touchmove",listener:ei,options:{passive:!1}},{type:"click",listener:ei},{type:"contextmenu",listener:ei},{type:"keydown",listener:this.handleKeyDown}]);ie(this,Mr).add(d)}handleCancel(e){const{dragOperation:r}=this.manager;r.status.initialized&&this.manager.actions.stop({event:e,canceled:!0}),this.cleanup()}cleanup(){this.latest={event:void 0,coordinates:void 0},ie(this,Mr).forEach(e=>e()),ie(this,Mr).clear()}destroy(){this.cleanup(),this.listeners.clear()}};Mr=new WeakMap;Ai.configure=Os(Ai);Ai.defaults=Zo;var vg=Ai;function mg(t){return"sensor"in t}function ei(t){t.preventDefault()}function yg(){}var il=new WeakSet;function bg(t){!t||il.has(t)||(t.addEventListener("touchmove",yg,{capture:!1,passive:!1}),il.add(t))}var ol={plugins:[Vh,Du,Bh,ig,fg],sensors:[vg,pg]},_g=class extends Cp{constructor(t={}){const{plugins:e=ol.plugins,sensors:r=ol.sensors,modifiers:n=[]}=t;super(ta(En({},t),{plugins:[cg,Yi,fr,...e],sensors:r,modifiers:n}))}},ju,Fu,qu,es,ot,la,da,ua,Vn=class extends(es=bt,qu=[J],Fu=[J],ju=[J],es){constructor(t,e){var r=t,{element:n,effects:i=()=>[],handle:o,feedback:s="default"}=r,a=bu(r,["element","effects","handle","feedback"]);super(En({effects:()=>[...i(),()=>{var l,d;const{manager:c}=this;if(!c)return;const h=((d=(l=this.sensors)==null?void 0:l.map(Es))!=null?d:[...c.sensors]).map(g=>{const v=g instanceof jr?g:c.registry.register(g.plugin),m=g instanceof jr?void 0:g.options;return v.bind(this,m)});return function(){h.forEach(v=>v())}}]},a),e),ue(this,la,fe(ot,8,this)),fe(ot,11,this),ue(this,da,fe(ot,12,this)),fe(ot,15,this),ue(this,ua,fe(ot,16,this)),fe(ot,19,this),this.element=n,this.handle=o,this.feedback=s}};ot=Xr(es);la=new WeakMap;da=new WeakMap;ua=new WeakMap;Ge(ot,4,"handle",qu,Vn,la);Ge(ot,4,"element",Fu,Vn,da);Ge(ot,4,"feedback",ju,Vn,ua);cr(ot,Vn);var Lu,zu,ts,Lt,ca,_o,Vu,Uu,xn,fa,pa=class extends(ts=_t,zu=[J],Lu=[J],ts){constructor(t,e){var r=t,{element:n,effects:i=()=>[]}=r,o=bu(r,["element","effects"]);const{collisionDetector:s=Nh}=o,a=d=>{const{manager:c,element:u}=this;if(!u||d===null){this.shape=void 0;return}if(!c)return;const h=new kt(u),g=ne(()=>this.shape);return h&&g?.equals(h)?g:(this.shape=h,h)},l=Wn(!1);super(ta(En({},o),{collisionDetector:s,effects:()=>[...i(),()=>{const{element:d,manager:c}=this;if(!c)return;const{dragOperation:u}=c,{source:h}=u;l.value=!!(h&&u.status.initialized&&d&&!this.disabled&&this.accepts(h))},()=>{const{element:d}=this;if(l.value&&d){const c=new Kp(d,a);return()=>{c.disconnect(),this.shape=void 0}}},()=>{var d;if((d=this.manager)!=null&&d.dragOperation.status.initialized)return()=>{this.shape=void 0}}]}),e),ue(this,xn),ue(this,ca,fe(Lt,8,this)),fe(Lt,11,this),ue(this,fa,fe(Lt,12,this)),fe(Lt,15,this),this.element=n,this.refreshShape=()=>a()}set element(t){Ce(this,xn,t,Uu)}get element(){var t;return(t=this.proxy)!=null?t:ie(this,xn,Vu)}};Lt=Xr(ts);ca=new WeakMap;xn=new WeakSet;fa=new WeakMap;_o=Ge(Lt,20,"#element",zu,xn,ca),Vu=_o.get,Uu=_o.set;Ge(Lt,4,"proxy",Lu,pa,fa);cr(Lt,pa);var Be=(t=>(t.String="string",t.JSON="json",t))(Be||{});const wg={string:"String",json:"JSON"},xg=Object.values(Be);var N=(t=>(t.And="and",t.Or="or",t.Xor="xor",t.Not="not",t.Eq="eq",t.In="in",t.Format="format",t.Pattern="pattern",t.MinLength="minLength",t.MaxLength="maxLength",t.Less="less",t.LessOrEq="lessOrEq",t.Greater="greater",t.GreaterOrEq="greaterOrEq",t.MultipleOf="multipleOf",t.Contains="contains",t.MinItems="minItems",t.MaxItems="maxItems",t.UniqueItems="uniqueItems",t.HasProperty="has",t.Property="property",t))(N||{});const Sg={and:"And",or:"Or",xor:"Xor",not:"Not",eq:"Equal",in:"In",format:"Format",pattern:"Pattern",minLength:"MinLength",maxLength:"MaxLength",less:"Less",lessOrEq:"LessOrEq",greater:"Greater",greaterOrEq:"GreaterOrEq",multipleOf:"MultipleOf",contains:"Contains",minItems:"MinItems",maxItems:"MaxItems",uniqueItems:"UniqueItems",has:"HasProperty",property:"Property"},ib=Object.values(N),Og=["and","or","xor"],Eg=new Set(Og),Pg=["not","contains"],Ng=new Set(Pg),kg=["format","pattern"],Mg=new Set(kg),Tg=["greater","greaterOrEq","less","lessOrEq","multipleOf","minLength","maxLength","minItems","maxItems"],Ag=new Set(Tg),Ig="aggregatedField";function Rg(t,e){D(e,!0);const r=v=>{var m=X(),O=W(m);He(O,()=>f(u)??Ut,()=>i,()=>e.config,()=>({get current(){return n()},set current(E){n(E)}}),()=>f(c)),w(v,m)};let n=q(e,"value",15);const i=le(),o=S(()=>Ar(i,"fieldTemplate",e.config)),s="aggregatedWidget",a=S(()=>Ar(i,s,e.config)),l=us(i,()=>e.config,()=>cs(i,e.config,n())),d=S(()=>e.uiOption("collectErrors")??!1),c=S(()=>f(d)?Nl(i,kl(i,e.config.path)):fs(i,e.config.path)),u=S(()=>ps(i,e.config,Ig));var h=X(),g=W(h);{let v=S(()=>f(u)&&r);Z(g,()=>f(o),(m,O)=>{O(m,{type:"template",showTitle:!0,useLabel:!0,widgetType:s,get uiOption(){return e.uiOption},get value(){return n()},get config(){return e.config},get errors(){return f(c)},get action(){return f(v)},children:(E,_)=>{var P=X(),y=W(P),b=()=>n()??void 0,M=x=>n(x);Z(y,()=>f(a),(x,k)=>{k(x,{type:"widget",get config(){return e.config},get errors(){return f(c)},get uiOption(){return e.uiOption},get value(){return b()},set value(A){M(A)},get handlers(){return l}})}),w(E,P)},$$slots:{default:!0}})})}w(t,h),j()}qi.aggregatedField=Rg;const Cg="booleanSelectField";function Wg(t,e){D(e,!0);const r=v=>{var m=X(),O=W(m);He(O,()=>f(u)??Ut,()=>n,()=>e.config,()=>({get current(){return i()},set current(E){i(E)}}),()=>f(c)),w(v,m)},n=le();let i=q(e,"value",15);const o=S(()=>Ar(n,"fieldTemplate",e.config)),s="selectWidget",a=S(()=>Ar(n,s,e.config)),l=S(()=>{const v=e.translate("yes",{}),m=e.translate("no",{});if(Array.isArray(e.config.schema.oneOf))return Da(n,e.config,e.uiOption,{oneOf:e.config.schema.oneOf.map(E=>typeof E=="boolean"?E?{const:!0,title:v}:{const:!1,title:m}:{...E,title:E.title??(E.const===!0?v:m)})})??[];const O=e.config.schema.enum??Ll;return O.length===2&&O.every(E=>typeof E=="boolean")&&e.uiOption("enumNames")===void 0?O.map((E,_)=>({id:Cc(n,e.config.path,_),label:E?v:m,value:E,disabled:!1})):Da(n,e.config,e.uiOption,Object.setPrototypeOf({enum:O},e.config.schema))??[]}),d=us(n,()=>e.config,()=>cs(n,e.config,i())),c=S(()=>fs(n,e.config.path)),u=S(()=>ps(n,e.config,Cg));var h=X(),g=W(h);{let v=S(()=>f(u)&&r);Z(g,()=>f(o),(m,O)=>{O(m,{type:"template",showTitle:!0,useLabel:!0,get uiOption(){return e.uiOption},widgetType:s,get value(){return i()},get config(){return e.config},get errors(){return f(c)},get action(){return f(v)},children:(E,_)=>{var P=X(),y=W(P);Z(y,()=>f(a),(b,M)=>{M(b,{type:"widget",get options(){return f(l)},get errors(){return f(c)},get handlers(){return d},get uiOption(){return e.uiOption},get config(){return e.config},get value(){return i()},set value(x){i(x)}})}),w(E,P)},$$slots:{default:!0}})})}w(t,h),j()}qi.booleanSelectField=Wg;function Dg(t,e){D(e,!0);let r=q(e,"value",15),n=Rn(e,["$$slots","$$events","$$legacy","value"]);var i=()=>(Vl(r()),r()),o=s=>{r(s)};xf(t,Fi(()=>n,{get value(){return i()},set value(s){o(s)}})),j()}qi.arrayFilesField=Dg;const jg="tagsField";function Fg(t,e){D(e,!0);const r=v=>{var m=X(),O=W(m);He(O,()=>f(u)??Ut,()=>o,()=>e.config,()=>({get current(){return n()},set current(E){n(E)}}),()=>f(c)),w(v,m)};let n=q(e,"value",15);const i="tagsWidget",o=le(),s=S(()=>Ar(o,"fieldTemplate",e.config)),a=S(()=>Ar(o,i,e.config)),l=us(o,()=>e.config,()=>cs(o,e.config,n())),d=S(()=>e.uiOption("collectErrors")??!1),c=S(()=>f(d)?Nl(o,kl(o,e.config.path)):fs(o,e.config.path)),u=S(()=>ps(o,e.config,jg));var h=X(),g=W(h);{let v=S(()=>f(u)&&r);Z(g,()=>f(s),(m,O)=>{O(m,{type:"template",showTitle:!0,useLabel:!0,widgetType:i,get uiOption(){return e.uiOption},get value(){return n()},get config(){return e.config},get errors(){return f(c)},get action(){return f(v)},children:(E,_)=>{var P=X(),y=W(P),b=()=>n()??void 0,M=x=>n(x);Z(y,()=>f(a),(x,k)=>{k(x,{type:"widget",get config(){return e.config},get errors(){return f(c)},get uiOption(){return e.uiOption},get value(){return b()},set value(A){M(A)},get handlers(){return l}})}),w(E,P)},$$slots:{default:!0}})})}w(t,h),j()}function qg(t,e){D(e,!0);let r=q(e,"value",15),n=Rn(e,["$$slots","$$events","$$legacy","value"]);var i=()=>(Vl(r()),r()),o=s=>{r(s)};Fg(t,Fi(()=>n,{get value(){return i()},set value(s){o(s)}})),j()}qi.arrayTagsField=qg;var Lg=R("<button><!></button>");function zg(t,e){D(e,!0);const r=le();var n=Lg();pe(n,o=>({...o}),[()=>Wc(r,e.config,"submitButton","submit",{class:"sjsf-submit-button"})]);var i=L(n);He(i,()=>e.children),F(n),w(t,n),j()}var Vg=R("<button><!></button>");function Ug(t,e){D(e,!0);const r=le();var n=Vg();pe(n,o=>({...o}),[()=>Dc(r,e.config,{disabled:e.disabled,type:"button","data-type":e.type,class:"sjsf-button",onclick:e.onclick},qc("button"),Fc("buttons",o=>o[e.type]),jc)]);var i=L(n);He(i,()=>e.children),F(n),w(t,n),j()}var Bg=R("<span>*</span>"),Hg=R("<label> <!></label>");function $g(t,e){D(e,!0);const r=le();var n=Hg();pe(n,a=>({...a}),[()=>Lc(r,e.config,"labelAttributes",{class:"sjsf-label"})]);var i=L(n),o=I(i);{var s=a=>{var l=Bg();w(a,l)};ye(o,a=>{e.config.required&&a(s)})}F(n),K(()=>ae(i,`${e.title??""} `)),w(t,n),j()}const Gg=Object.freeze(Object.defineProperty({__proto__:null,button:Ug,description:Cf,errorsList:qf,form:kf,help:Df,label:$g,layout:Tf,submitButton:zg,title:If},Symbol.toStringTag,{value:"Module"}));var Yg=R("<input/> <!>",1);function Xg(t,e){D(e,!0);let r=q(e,"value",15);const n=le(),i=S(()=>Vt(n,e.config,"text",e.handlers,{type:"text",class:"sjsf-text"}));var o=Yg(),s=W(o);pe(s,()=>({...f(i)}),void 0,void 0,void 0,void 0,!0);var a=I(s,2);hs(a,{get id(){return f(i).list},get config(){return e.config}}),In(s,r),w(t,o),j()}var Jg=R("<input/> <!>",1);function Kg(t,e){D(e,!0);let r=q(e,"value",15);const n=le(),i=S(()=>Vt(n,e.config,"number",e.handlers,{type:"number",class:"sjsf-number"}));var o=Jg(),s=W(o);pe(s,()=>({...f(i)}),void 0,void 0,void 0,void 0,!0);var a=I(s,2);hs(a,{get id(){return f(i).list},get config(){return e.config}}),In(s,()=>r()??null,l=>r(l??void 0)),w(t,o),j()}var Qg=R("<option> </option>"),Zg=R("<option> </option>"),ev=R("<select><!><!></select>");function tv(t,e){D(e,!0);let r=q(e,"value",15);const n=le(),i=S(()=>Al(n,e.config,"select",e.handlers,{class:"sjsf-select"})),o=S(()=>f(i).placeholder),s=S(()=>zc(f(i),["placeholder"])),a=Tl({mapper:()=>Li(e.options),value:()=>r(),update:h=>r(h)});var l=ev();pe(l,()=>({...f(s)}));var d=L(l);{var c=h=>{var g=Qg(),v=L(g,!0);F(g);var m={};K(()=>{ae(v,f(o)),m!==(m=Ma)&&(g.value=(g.__value=Ma)??"")}),w(h,g)};ye(d,h=>{e.config.schema.default===void 0&&h(c)})}var u=I(d);$e(u,17,()=>e.options,h=>h.id,(h,g)=>{var v=Zg(),m=L(v,!0);F(v);var O={};K(()=>{v.disabled=f(g).disabled,ae(m,f(g).label),O!==(O=f(g).id)&&(v.value=(v.__value=f(g).id)??"")}),w(h,v)}),F(l),Ml(l,()=>a.current,h=>a.current=h),w(t,l),j()}var rv=R('<label class="sjsf-checkbox"><input/> </label>');function nv(t,e){D(e,!0);let r=q(e,"value",15);const n=le(),i=S(()=>Vt(n,e.config,"checkbox",e.handlers,{type:"checkbox"}));var o=rv(),s=L(o);pe(s,()=>({type:"checkbox",...f(i)}),void 0,void 0,void 0,void 0,!0);var a=I(s);F(o),K(()=>ae(a,` ${e.config.title??""}`)),Vc(s,()=>r()??!1,l=>r(l)),w(t,o),j()}const iv=Object.freeze(Object.defineProperty({__proto__:null,checkboxWidget:nv,numberWidget:Kg,selectWidget:tv,textWidget:Xg},Symbol.toStringTag,{value:"Module"})),pr={...Gg,...iv};var ov=R('<label class="sjsf-checkboxes"><input/> </label>');function sv(t,e){D(e,!0);const r=[];let n=q(e,"value",15);const i=le(),o=S(()=>Vt(i,e.config,"checkboxes",e.handlers,{type:"checkbox"})),s=Rl({mapper:()=>Li(e.options),value:()=>n(),update:d=>n(d)});var a=X(),l=W(a);$e(l,17,()=>e.options,d=>d.id,(d,c)=>{var u=ov(),h=L(u);pe(h,()=>({value:f(c).id,...f(o),id:f(c).id,disabled:f(c).disabled||f(o).disabled}),void 0,void 0,void 0,void 0,!0);var g=I(h);F(u),K(()=>ae(g,` ${f(c).label??""}`)),Il(r,[],h,()=>(f(c).id,s.current),v=>s.current=v),w(d,u)}),w(t,a),j()}pr.checkboxesWidget=sv;var av=R("<input/> <!>",1);function lv(t,e){D(e,!0);let r=q(e,"value",15);const n=le(),i=S(()=>Vt(n,e.config,"datePicker",e.handlers,{type:"date",class:"sjsf-date-picker"}));var o=av(),s=W(o);pe(s,()=>({...f(i)}),void 0,void 0,void 0,void 0,!0);var a=I(s,2);hs(a,{get id(){return f(i).list},get config(){return e.config}}),In(s,r),w(t,o),j()}pr.datePickerWidget=lv;pr.fileWidget=zf;var dv=R("<option> </option>"),uv=R("<select></select>");function cv(t,e){D(e,!0);let r=q(e,"value",15);const n=le(),i=S(()=>Al(n,e.config,"multiSelect",e.handlers,{class:"sjsf-multi-select"})),o=Rl({mapper:()=>Li(e.options),value:()=>r(),update:a=>r(a)});var s=uv();pe(s,()=>({multiple:!0,...f(i)})),$e(s,21,()=>e.options,a=>a.id,(a,l)=>{var d=dv(),c=L(d,!0);F(d);var u={};K(()=>{d.disabled=f(l).disabled,ae(c,f(l).label),u!==(u=f(l).id)&&(d.value=(d.__value=f(l).id)??"")}),w(a,d)}),F(s),Ml(s,()=>o.current,a=>o.current=a),w(t,s),j()}pr.multiSelectWidget=cv;var fv=R('<label class="sjsf-radio"><input/> </label>');function pv(t,e){D(e,!0);const r=[];let n=q(e,"value",15);const i=le(),o=S(()=>Vt(i,e.config,"radio",e.handlers,{type:"radio"})),s=Tl({mapper:()=>Li(e.options),value:()=>n(),update:d=>n(d)});var a=X(),l=W(a);$e(l,17,()=>e.options,d=>d.id,(d,c)=>{var u=fv(),h=L(u);pe(h,()=>({value:f(c).id,...f(o),id:f(c).id,disabled:f(c).disabled||f(o).disabled}),void 0,void 0,void 0,void 0,!0);var g=I(h);F(u),K(()=>ae(g,` ${f(c).label??""}`)),Il(r,[],h,()=>(f(c).id,s.current),v=>s.current=v),w(d,u)}),w(t,a),j()}pr.radioWidget=pv;var hv=R("<input/>");function gv(t,e){D(e,!0);let r=q(e,"value",15);const n=le(),i=S(()=>Vt(n,e.config,"range",e.handlers,{type:"range",class:"sjsf-range"}));var o=hv();pe(o,()=>({...f(i)}),void 0,void 0,void 0,void 0,!0),In(o,()=>r()??0,s=>r(s)),w(t,o),j()}pr.rangeWidget=gv;pr.textareaWidget=Uf;var rt=(t=>(t.Shadcn4="shadcn4",t))(rt||{});const vv=Object.values(rt);[...vv];function Bu(t,e,{merge:r,unique:n}={}){let i;if(r){const[o,s]=t.length<=e.length?[t,e]:[e,t];i=new Array(s.length);for(let a=0;a<o.length;a++)i[a]=r(t[a],e[a]);for(let a=o.length;a<s.length;a++)i[a]=s[a]}else i=t.concat(e);return n?Array.from(new Set(i)):i}function mv(t,e){const r=Array.isArray(e);return Array.isArray(t)!==r?e:r?Bu(t,e,{merge:Ne}):Ne(t,e)}const yv=["layouts","buttons"];function Ne(t,e){const r=Object.assign({},t,e),n=new Set(Object.keys(t)).intersection(new Set(Object.keys(e)));for(const i of n){const o=t[i],s=e[i];if(i==="ui:options"||i==="ui:components"||i==="ui:globalOptions"){r[i]=Object.assign({},o,s);for(const a of yv)o&&s&&a in o&&a in s&&(r[i][a]=Object.assign({},o[a],s[a]))}else i==="items"?r.items=mv(o,s):i==="anyOf"||i==="oneOf"?r[i]=Bu(o,s,{merge:Ne}):r[i]=Ne(o,s)}return r}const{mergeSchemaDefinitions:bv}=hf();function Ee(t,e){return bv(t,e)}const _v=new Set(["date-time","time","date","duration","email","idn-email","hostname","idn-hostname","ipv4","ipv6","uuid","uri","uri-reference","iri","iri-reference","uri-template","json-pointer","relative-json-pointer","regex"]);function wv(t){return _v.has(t)}function G(t){return()=>t}var p=(t=>(t.Object="object",t.ObjectProperty="object-property",t.ObjectPropertyDependency="object-property-dependency",t.Predicate="predicate",t.Operator="operator",t.Array="array",t.Grid="grid",t.Enum="enum",t.MultiEnum="multi-enum",t.EnumItem="enum-item",t.String="string",t.Number="number",t.Boolean="boolean",t.File="file",t.Tags="tags",t.Range="range",t.QrCode="qr-code",t))(p||{});const Ve={type:"object",properties:{title:{title:"Title",type:"string"},description:{title:"Description",type:"string"},required:{title:"Required",type:"boolean"}},required:["title","required"]},ha={type:"object",title:"String options",properties:{widget:{title:"Widget",type:"string",default:"textWidget"},help:{title:"Help",type:"string"},default:{title:"Default value",type:"string"},format:{type:"string",title:"Format",description:"JSON Schema string formats"},maxLength:{title:"Max length",type:"number",minimum:0},minLength:{title:"Min length",type:"number",minimum:0},pattern:{title:"Pattern",description:"Regular expression, preferably using the ECMA-262 flavour",type:"string",format:"regexp"}},required:["widget"],dependencies:{widget:{oneOf:[{type:"object",properties:{widget:{const:"textWidget"},inputType:{title:"Input type",enum:["color","date","datetime-local","email","hidden","month","password","tel","text","time","url","week"]},placeholder:{title:"Placeholder",type:"string"}}},{properties:{widget:{not:{const:"textWidget"}}}}]}}},ga={title:"Number options",type:"object",properties:{integer:{title:"Integer",type:"boolean"},widget:{title:"Widget",type:"string",default:"numberWidget"},help:{title:"Help",type:"string"},default:{title:"Default value",type:"number"},minimum:{title:"Minimum",type:"number"},maximum:{title:"Maximum",type:"number"},multipleOf:{title:"Multiple of",type:"number"}},required:["widget"]},Hu={type:"object",title:"QR code options",properties:{widget:{title:"Widget",type:"string",default:"textWidget"},placeholder:{title:"Placeholder",type:"string"},help:{title:"Help",type:"string"},default:{title:"Default value",type:"string"}},required:["widget"]};function Jr(){return crypto.randomUUID()}const xv={[p.Object]:t=>({id:t,type:p.Object,properties:[],options:{title:"Group title",required:!0}}),[p.Array]:t=>({id:t,type:p.Array,item:void 0,options:{title:"List title",required:!0}}),[p.Grid]:t=>({id:t,type:p.Grid,cells:[],width:3,height:4,options:{title:"Grid title",required:!0,cellSize:"auto",gap:"1rem",additionalStyles:"align-items: center;"}}),[p.Enum]:t=>({id:t,type:p.Enum,valueType:Be.String,items:[],options:{title:"Choice field",required:!0,widget:"radioWidget"}}),[p.MultiEnum]:t=>({id:t,type:p.MultiEnum,valueType:Be.String,items:[],options:{title:"Multi choice field",required:!0,widget:ma.properties.widget.default}}),[p.String]:t=>({id:t,type:p.String,options:{title:"String field",required:!0,widget:ha.properties.widget.default}}),[p.Number]:t=>({id:t,type:p.Number,options:{title:"Number field",required:!0,widget:ga.properties.widget.default}}),[p.Boolean]:t=>({id:t,type:p.Boolean,options:{title:"Boolean field",required:!0,widget:ya.properties.widget.default}}),[p.File]:t=>({id:t,type:p.File,options:{title:"File field",required:!0,widget:Ii.properties.widget.default}}),[p.Tags]:t=>({id:t,type:p.Tags,options:{title:"Tags field",required:!0,widget:Xu.properties.widget.default}}),[p.Range]:t=>va(t,yt.String,{title:"Range field",required:!0,widget:Gu.properties.widget.default}),[p.QrCode]:t=>({id:t,type:p.QrCode,options:{title:"QR code",required:!0,widget:Hu.properties.widget.default}})};function Ae(t){return xv[t](Jr())}function ob(t){const e=Jr(),r=p.Operator;switch(t){case N.And:case N.Or:case N.Xor:return{id:e,type:r,op:t,operands:[]};case N.Contains:case N.Not:return{id:e,type:r,op:t,operand:void 0};case N.Eq:return{id:e,type:r,op:t,value:""};case N.In:return{id:e,type:r,op:t,values:[]};case N.Format:return{id:e,type:r,op:t,value:""};case N.Pattern:return{id:e,type:r,op:t,value:""};case N.UniqueItems:return{id:e,type:r,op:t};case N.HasProperty:return{id:e,type:r,op:t,propertyId:void 0};case N.Property:return{id:e,type:r,op:t,propertyId:void 0,operator:void 0};default:return{id:e,type:r,op:t,value:void 0}}}function rs(t,e){return{id:Jr(),type:p.EnumItem,label:t,value:e}}function Xi(t){return{id:Jr(),type:p.ObjectProperty,property:t,complementary:void 0,dependencies:[]}}function $u(){return{id:Jr(),type:p.Predicate,operator:void 0}}function Sv(){return{id:Jr(),type:p.ObjectPropertyDependency,predicate:$u(),properties:[]}}var yt=(t=>(t.String="string",t.Number="number",t))(yt||{});const ns={string:"String",number:"Number"};p.String,p.Number;const Gu={title:"Range options",type:"object",properties:{widget:{title:"Widget",type:"string",default:"dateRangePickerWidget"},help:{title:"Help",type:"string"}},required:["widget"]},Ov={string:"dateRangePickerWidget",number:"rangeSliderWidget"};function ti(t,e){const r=Ae(t);return r.options.title=e,r}function va(t,e,r){const n={id:t,type:p.Range,options:{...r,widget:Ov[e]}};switch(e){case"string":return{...n,valueType:e,startNode:ti(p.String,"Start"),endNode:ti(p.String,"End")};case"number":return{...n,valueType:e,startNode:ti(p.Number,"Start"),endNode:ti(p.Number,"End")}}}const Ev={title:"Group options",type:"object",properties:{}},Pv={title:"List options",type:"object",properties:{defaultValue:{title:"Default value",type:"array",items:{type:"string",format:"json"}},minItems:{title:"Min items",type:"number"},maxItems:{title:"Max items",type:"number"},uniqueItems:{title:"Unique items",type:"boolean"}}},Nv={title:"Grid options",type:"object",properties:{cellSize:{title:"Cell size",enum:["1fr","auto"]},gap:{title:"Gap",type:"string"},additionalStyles:{title:"Additional styles",type:"string"}},required:["cellSize","gap"]},Yu={title:"Choice options",type:"object",properties:{widget:{title:"Widget",type:"string",default:"selectWidget"},help:{title:"Help",type:"string"},defaultValue:{title:"Default value",type:"string",format:"json"}},required:["widget"],dependencies:{widget:{oneOf:[{type:"object",properties:{widget:{const:"radioWidget"},inline:{title:"Inline",type:"boolean"}}},{properties:{widget:{not:{const:"radioWidget"}}}}]}}},ma={title:"Multi choice options",type:"object",properties:{widget:{title:"Widget",type:"string",default:"checkboxesWidget"},help:{title:"Help",type:"string"},defaultValue:{title:"Default value",type:"array",uniqueItems:!0,items:{type:"string",format:"json"}},minItems:{title:"Min items",type:"number"},maxItems:{title:"Max items",type:"number"}},required:["widget"],dependencies:{widget:{oneOf:[{type:"object",properties:{widget:{const:"checkboxesWidget"},inline:{title:"Inline",type:"boolean"}}},{properties:{widget:{not:{const:"checkboxesWidget"}}}}]}}},ya={title:"Boolean options",type:"object",properties:{widget:{title:"Widget",type:"string",default:"checkboxWidget"},help:{title:"Help",type:"string"},default:{title:"Default value",type:"boolean"}},required:["widget"]},Ii={title:"File options",type:"object",properties:{widget:{title:"Widget",type:"string",default:"fileWidget"},help:{title:"Help",type:"string"},native:{title:"Native",type:"boolean"},multiple:{title:"Multiple",type:"boolean"}},dependencies:{multiple:{oneOf:[{type:"object",properties:{multiple:{const:!0},minItems:{title:"Min items",type:"number"},maxItems:{title:"Max items",type:"number"},uniqueItems:{title:"Unique items",type:"boolean"}}},{type:"object",properties:{multiple:{const:!1}}}]}},required:["widget"]},Xu={title:"Tags options",type:"object",properties:{widget:{title:"Widget",type:"string",default:"tagsWidget"},help:{title:"Help",type:"string"},default:{title:"Default value",type:"array",uniqueItems:!0,items:{type:"string"}},minItems:{title:"Min items",type:"number"},maxItems:{title:"Max items",type:"number"}},required:["widget"]},kv={[p.Object]:"Group",[p.Grid]:"Grid",[p.Array]:"List",[p.Enum]:"Choice",[p.MultiEnum]:"Multi choice",[p.String]:"String",[p.Number]:"Number",[p.Boolean]:"Boolean",[p.File]:"File",[p.Tags]:"Tags",[p.Range]:"Range",[p.QrCode]:"QR code"},Mv={[p.Object]:Ee(Ve,Ev),[p.Array]:Ee(Ve,Pv),[p.Grid]:Ee(Ve,Nv),[p.Enum]:Ee(Ve,Yu),[p.MultiEnum]:Ee(Ve,ma),[p.String]:Ee(Ve,ha),[p.Number]:Ee(Ve,ga),[p.Boolean]:Ee(Ve,ya),[p.File]:Ee(Ve,Ii),[p.Tags]:Ee(Ve,Xu),[p.Range]:Ee(Ve,Gu),[p.QrCode]:Ee(Ve,Hu)},Je={"ui:options":{titleAttributes:{class:"font-medium text-md py-2"}},description:{"ui:components":{textWidget:"textareaWidget"}},defaultValue:{"ui:options":{titleAttributes:{class:"font-medium text-md"}}},widget:{"ui:components":{stringField:"enumField"}}},Tv=Object.keys(Ve.properties);function Yt(...t){return{order:Tv.concat(t)}}const Av={[p.Object]:Je,[p.Array]:Ne(Je,{defaultValue:{items:{"ui:options":{shadcn4Text:{placeholder:"Input JSON value"}}}}}),[p.Grid]:Ne(Je,{cellSize:{"ui:components":{stringField:"enumField"}},gap:{"ui:options":{shadcn4Text:{placeholder:"Input CSS unit"}}}}),[p.Enum]:Ne(Je,{"ui:options":Yt("widget","inline","*"),defaultValue:{"ui:options":{shadcn4Text:{placeholder:"Input JSON value"}}}}),[p.MultiEnum]:Ne(Je,{"ui:options":Yt("widget","inline","*"),defaultValue:{items:{"ui:options":{shadcn4Text:{placeholder:"Input JSON value"}}},"ui:options":{orderable:!1}}}),[p.String]:Ne(Je,{"ui:options":Yt("widget","inputType","placeholder","*"),inputType:{"ui:components":{stringField:"enumField"}}}),[p.Number]:Ne(Je,{"ui:options":Yt("widget","*")}),[p.Boolean]:Ne(Je,{"ui:options":Yt("widget","*"),defaultValue:{"ui:components":{booleanField:"booleanSelectField",selectWidget:"radioWidget"},"ui:options":{useLabel:!1,enumNames:["true","false"],shadcn4RadioGroup:{style:"display: flex;"}}}}),[p.File]:Ne(Je,{"ui:options":Yt("widget","native","multiple","*","help")}),[p.Tags]:Je,[p.Range]:Je,[p.QrCode]:Ne(Je,{"ui:options":Yt("placeholder","help","default","*")})};function Ju(t){return Ng.has(t.op)}function is(t){return Eg.has(t.op)}function Iv(t){return Mg.has(t.op)}function Rv(t){return Ag.has(t.op)}const hr=t=>e=>e.op===t,Cv=hr(N.Eq),Wv=hr(N.In);hr(N.Pattern);const Ku=hr(N.Contains),Dv=hr(N.UniqueItems),Qu=hr(N.Property),jv=hr(N.HasProperty),Kr=t=>t.type in kv,Se=t=>e=>e.type===t,Un=Se(p.Object),Bn=Se(p.Array),ba=Se(p.Grid),Fv=Se(p.Predicate),Zu=Se(p.Operator),Ji=Se(p.ObjectProperty),qv=Se(p.ObjectPropertyDependency),_a=t=>Kr(t)||Ji(t),sl=Se(p.EnumItem),Lv=Se(p.Enum),Ri=Se(p.MultiEnum),Ci=Se(p.String),ec=Se(p.Number),tc=Se(p.Boolean),rc=Se(p.File),nc=Se(p.Tags),ic=Se(p.Range),zv=Se(p.QrCode);function Wi(t){return Kr(t)?t.options.title:void 0}function oc(t){const e=new Map;if(Un(t))for(let r=0;r<t.properties.length;r++){const{id:n,property:i}=t.properties[r];e.set(n,Wi(i)??`Property ${r+1}`)}else if(ba(t))for(let r=0;r<t.cells.length;r++){const{node:n,x:i,y:o}=t.cells[r];e.set(n.id,Wi(n)??`Cell (${i+1}, ${o+1})`)}else ic(t)&&(e.set(t.startNode.id,"Start"),e.set(t.endNode.id,"End"));return e}function zr(t,e){return Un(t)?t.properties.find(r=>r.id===e)?.property:ba(t)?t.cells.find(r=>r.node.id===e)?.node:ic(t)?t.startNode.id===e?t.startNode:t.endNode.id===e?t.endNode:void 0:null}const Vv=Ll.map((t,e)=>({id:`bool::${e}`,label:String(t),value:JSON.stringify(t)}));function wa(t){if(tc(t))return Vv;if(Lv(t)||Ri(t)){const e=t.valueType===Be.JSON;return t.items.map(r=>({id:r.id,label:r.label,value:e?r.value:JSON.stringify(r.value)}))}return[]}function Ki(t){if(Bn(t))return t.item}function Ft(t,e,r){const n=t.peek("affectedNode");if(n===void 0)t.addError(e,"It looks like you deleted the field to which this operator was applied");else return r(n)}const al={"enum-member":"does not correspond to the possible field values","json-object":"should be a JSON object","json-array":"should be a JSON array","json-string":"should be a JSON string","json-number":"should be a JSON number",boolean:"should be a boolean"};function ll(t,e){return Ft(t,e,r=>{const n=wa(r);return i=>{if(n.length>0){if(n.find(o=>o.value===i)===void 0)return"enum-member"}else if(Un(r)||ba(r)){if(!gf(i))return"json-object"}else if(Bn(r)){if(!uo(i))return"json-array"}else if(Ci(r)||zv(r)){if(!Wa(i))return"json-string"}else if(ec(r)){if(!vf(i))return"json-number"}else if(tc(r)){if(!mf(i))return"boolean"}else if(rc(r)){if(r.options.multiple){if(!uo(i))return"json-array"}else if(!Wa(i))return"json-string"}else if(nc(r)&&!uo(i))return"json-array"}})}function wo(t,e){e.operands.length===0?t.addError(e,"Missing operands"):e.operands.length===1&&t.addWarning(e,"An operator with one operand is redundant");for(let r=0;r<e.operands.length;r++)An(t,e.operands[r])}function Uv(t,e){e.operand===void 0?t.addError(e,"Missing operand"):An(t,e.operand)}function xa(t){return(e,r)=>{r.value===void 0?e.addError(r,"Missing value"):Ft(e,r,n=>{t(e,r,n)})}}const dl=xa((t,e,r)=>{Ci(r)||t.addError(e,"The operator can only be applied to string field")}),on=xa((t,e,r)=>{ec(r)||t.addError(e,"The operator can only be applied to number field")}),ul=xa((t,e,r)=>{Bn(r)||t.addError(e,"The operator can only be applied to list field")}),Bv={[N.And]:wo,[N.Or]:wo,[N.Xor]:wo,[N.Not]:Uv,[N.Eq]:(t,e)=>{if(!Eo(e.value))t.addError(e,"The value must be in JSON format");else{const r=ll(t,e)?.(e.value);r!==void 0&&t.addError(e,`The entered value ${al[r]}`)}},[N.In]:(t,e)=>{if(e.values.length===0)t.addError(e,"Add at least one value");else{e.values.length===1&&t.addWarning(e,"The `In` operator with one value is redundant, use the `Equal` operator");const r=e.values.filter(n=>!Eo(n));if(r.length>0)t.addError(e,`The following values must be in JSON format: "${r.join('", "')}"`);else{const n=ll(t,e);if(n!==void 0){const i=new Set,o=[];for(let s=0;s<e.values.length;s++){const a=e.values[s],l=n(a);l!==void 0?t.addError(e,`The value "${a}" ${al[l]}`):i.has(a)?o.push(a):i.add(a)}o.length>0&&t.addError(e,`Duplicated values: '${o.join("', '")}'`)}}}},[N.Format]:(t,e)=>{wv(e.value)||t.addWarning(e,"Unknown JSON Schema format"),Ft(t,e,r=>{Ci(r)||t.addError(e,"The operator can only be applied to string fields")})},[N.Pattern]:(t,e)=>{zl(e.value)?e.value.length===0&&t.addWarning(e,"It looks like you forgot to fill in the value, if not, then ignore this warning message"):t.addError(e,"Invalid regular expression"),Ft(t,e,r=>{Ci(r)||t.addError(e,"The operator can only be applied to string fields")})},[N.MinLength]:dl,[N.MaxLength]:dl,[N.Less]:on,[N.LessOrEq]:on,[N.Greater]:on,[N.GreaterOrEq]:on,[N.MultipleOf]:on,[N.Contains]:(t,e)=>{const r=e.operand;r===void 0?t.addError(e,"Missing operand"):Ft(t,e,n=>{const i=Ki(n);if(i===void 0)t.addError(e,"Child element of the applied field not found");else{var o=[];try{const d=it(o,t.push("affectedNode",i));An(t,r)}catch(s){var a=s,l=!0}finally{ft(o,a,l)}}})},[N.MinItems]:ul,[N.MaxItems]:ul,[N.UniqueItems]:(t,e)=>{Ft(t,e,r=>{Bn(r)||t.addError(e,"The operator can only be applied to list field")})},[N.HasProperty]:(t,e)=>{const r=e.propertyId;r===void 0?t.addError(e,"Missing value"):Ft(t,e,n=>{const i=zr(n,r);i===null?t.addError(e,`The operator cannot be applied to "${n.type}" field`):i===void 0&&t.addError(e,"Specified field not found")})},[N.Property]:(t,e)=>{const r=e.propertyId;r===void 0?t.addError(e,"Missing value"):Ft(t,e,n=>{const i=zr(n,r);if(i===null)t.addError(e,`The operator cannot be applied to "${n.type}" field`);else if(i===void 0)t.addError(e,"Specified field not found");else if(e.operator===void 0)t.addError(e,"Missing operand");else{var o=[];try{const d=it(o,t.push("affectedNode",i));An(t,e.operator)}catch(s){var a=s,l=!0}finally{ft(o,a,l)}}})}};function An(t,e){Bv[e.op](t,e)}function cl(t,e){if(e.items.length===0)t.addError(e,"Add at least one element");else{var r=[];try{e.items.length===1&&t.addWarning(e,"Use the `Boolean` field if you need to select from a single item");const s=new Set;const a=[];const l=new Set;const d=[];const c=it(r,t.push("enumValueType",e.valueType));for(let u=0;u<e.items.length;u++){const h=e.items[u];s.has(h.label)?a.push(h):s.add(h.label),s.add(h.label),l.has(h.value)?d.push(h):l.add(h.value),pt(t,h)}for(const u of d)t.addError(u,"Duplicated value");for(const u of a)t.addWarning(u,"Duplicated label")}catch(n){var i=n,o=!0}finally{ft(r,i,o)}}}const Hv={[p.Object]:(t,e)=>{e.properties.length===0&&t.addError(e,"Properties are missing");for(let r=0;r<e.properties.length;r++)pt(t,e.properties[r])},[p.ObjectProperty]:(t,e)=>{var o=[];try{e.complementary!==void 0&&e.dependencies.find(d=>d.id===e.complementary)===void 0?t.addError(e,"Invalid `Complement` mark, try selecting/unselecting this mark"):e.dependencies.length===1&&(e.complementary===void 0?e.dependencies[0].predicate?.operator===void 0&&t.addError(e.dependencies[0],"The only dependency should be marked as `Complement`"):Kr(e.property)&&e.property.options.required?t.addWarning(e.dependencies[0],"Redundant dependency, because the condition (presence of a value in the parent field) is always true for required field"):Un(e.property)&&t.addWarning(e.dependencies[0],"Dependency on objects without specifying a predicate is meaningless, define a predicate."));const r=[];pt(t,e.property);const n=it(o,t.push("complementary",e.complementary));const i=it(o,t.push("affectedNode",e.property));for(let d=0;d<e.dependencies.length;d++){const c=e.dependencies[d];c.properties.length===0&&r.push(c.id),pt(t,e.dependencies[d])}r.length===1?e.dependencies.length===1&&t.addWarning(e.dependencies[0],"Redundant dependency"):r.length>1&&t.addWarning(e,"You have more than one empty dependency, perhaps you can merge them using the `Or` operator")}catch(s){var a=s,l=!0}finally{ft(o,a,l)}},[p.ObjectPropertyDependency]:(t,e)=>{t.peek("complementary")===e.id||(e.predicate===void 0?t.addError(e,"Specify the predicate or mark the dependency as `Complement`"):pt(t,e.predicate));for(let n=0;n<e.properties.length;n++)pt(t,e.properties[n])},[p.Predicate]:(t,e)=>{e.operator===void 0?t.addError(e,"Specify the operator"):pt(t,e.operator)},[p.Operator]:An,[p.Array]:(t,e)=>{e.item===void 0?t.addError(e,"Missing item definition"):pt(t,e.item)},[p.Grid]:(t,e)=>{if(e.cells.length===0)t.addError(e,"Add at least one element");else for(let r=0;r<e.cells.length;r++)pt(t,e.cells[r].node)},[p.Enum]:cl,[p.MultiEnum]:cl,[p.EnumItem]:(t,e)=>{e.label.length===0&&t.addWarning(e,"Try not to create empty labels");const r=t.peek("enumValueType");r===void 0?t.addError(e,"This node appears to be misplaced, remove it"):r===Be.JSON&&!Eo(e.value)&&t.addError(e,"This value should match JSON format")},[p.String]:wr,[p.Number]:wr,[p.Boolean]:wr,[p.File]:wr,[p.Tags]:wr,[p.Range]:(t,e)=>{const r=t.getAvailableRangeValueTypes();r.length===0?t.addError(e,"This node cannot be used with the current theme."):r.includes(e.valueType)||t.addError(e,`Invalid range value type "${ns[e.valueType]}", one of the following values is expected: ${JSON.stringify(r.map(n=>ns[n]))}`)},[p.QrCode]:wr};function pt(t,e){Kr(e)&&t.validateCustomizableNodeOptions(e),Hv[e.type](t,e)}function ce(t,e){if(t===void 0)throw new Error(`${e} is undefined`)}function $v(t,e,{complementary:r,dependencies:n}){if(n.length===0)return;if(n.length===1){const a=n[0],l=mt(t,a);if(r===void 0){ce(a.predicate,"property dependency predicate");const c=mt(t,a.predicate);return{oneOf:[Ee({properties:{[e]:c}},l),{properties:{[e]:{not:c}}}]}}if(a.id!==r)throw new Error("Invalid node dependencies");const d=t.peek("affectedNode");if(ce(d,"property dependencies affected node"),Un(d))throw new Error("This dependency on the object does not make sense");return Bn(d)||Ri(d)||rc(d)&&d.options.multiple||nc(d)?{oneOf:[Ee({properties:{[e]:{minItems:1}}},l),{properties:{[e]:{maxItems:0}}}]}:l}let i=-1;const o=[],s=n.map((a,l)=>{if(a.id===r)return i=l,mt(t,a);ce(a.predicate,"dependency predicate");const d=mt(t,a.predicate);return o.push(d),Ee({properties:{[e]:d}},mt(t,a))});if(i>=0){const a=s[i],l=a.properties??={};l[e]={not:o.length===1?o[0]:{anyOf:o}}}return{oneOf:s}}function fl(t,e){const r=t.peek("scope");ce(r,"object scope");const n=new Map,i=new Map,o=[];for(let u=0;u<e.properties.length;u++){var a=[];try{const h=e.properties[u];if(!Kr(h.property))throw new Error;const g=r.id(h.property);n.set(g,mt(t,h.property));h.property.options.required&&o.push(g);const v=it(a,t.push("affectedNode",h.property));const m=$v(t,g,h);m!==void 0&&i.set(g,m)}catch(l){var d=l,c=!0}finally{ft(a,d,c)}}const s={type:"object",properties:Object.fromEntries(n)};return o.length>0&&(s.required=o),i.size>0&&(s.dependencies=Object.fromEntries(i)),s}const Gv={[N.And]:(t,e)=>({allOf:e.operands.map(r=>tr(t,r))}),[N.Or]:(t,e)=>({anyOf:e.operands.map(r=>tr(t,r))}),[N.Xor]:(t,e)=>({oneOf:e.operands.map(r=>tr(t,r))}),[N.Not]:(t,e)=>(ce(e.operand,"not operator operand"),{not:tr(t,e.operand)}),[N.Eq]:(t,e)=>{const r=t.peek("affectedNode");ce(r,"eq operator affected node");const n={const:JSON.parse(e.value)};return Ri(r)?{items:n,minItems:1}:n},[N.In]:(t,e)=>{const r=t.peek("affectedNode");ce(r,"in operator affected node");const n={enum:e.values.map(i=>JSON.parse(i))};return Ri(r)?{items:n,minItems:1}:n},[N.Format]:(t,e)=>({format:e.value}),[N.Pattern]:(t,e)=>({pattern:e.value}),[N.MinLength]:(t,e)=>({minLength:e.value}),[N.MaxLength]:(t,e)=>({maxLength:e.value}),[N.Less]:(t,e)=>({exclusiveMaximum:e.value}),[N.LessOrEq]:(t,e)=>({maximum:e.value}),[N.Greater]:(t,e)=>({exclusiveMinimum:e.value}),[N.GreaterOrEq]:(t,e)=>({minimum:e.value}),[N.MultipleOf]:(t,e)=>({multipleOf:e.value}),[N.Contains]:(t,{operand:e})=>{var o=[];try{ce(e,"contains operator operand");const r=t.peek("affectedNode");ce(r,"contains operator affected node");const n=Ki(r);ce(n,"contains operator affected node child");const i=it(o,t.push("affectedNode",n));return{contains:tr(t,e)}}catch(s){var a=s,l=!0}finally{ft(o,a,l)}},[N.MinItems]:(t,e)=>({minItems:e.value}),[N.MaxItems]:(t,e)=>({maxItems:e.value}),[N.UniqueItems]:(t,e)=>({uniqueItems:!0}),[N.HasProperty]:(t,{propertyId:e})=>{ce(e,"has property operator property id");const r=t.propertyNames.get(e);return ce(r,"has property operator property name"),{required:[r]}},[N.Property]:(t,{propertyId:e,operator:r})=>{var a=[];try{ce(e,"property operator property id");ce(r,"property operator operand");const n=t.peek("affectedNode");ce(n,"property operator affected node");const i=zr(n,e);if(!i)throw new Error(`Property "${e}" not found in "${n.type}" node`);const o=t.propertyNames.get(i.id);ce(o,"property operator property name");const s=it(a,t.push("affectedNode",i));return{properties:{[o]:tr(t,r)},required:[o]}}catch(l){var d=l,c=!0}finally{ft(a,d,c)}}};function tr(t,e){return Gv[e.op](t,e)}function os(t,e){return t===Be.JSON?e.map(r=>JSON.parse(r.value)):e.map(r=>r.value)}function pl(t){if(!(t===void 0||t.length===0))return t.map(e=>JSON.parse(e))}const Yv=["title","description","minItems","maxItems","uniqueItems","default","minLength","maxLength","pattern","minimum","exclusiveMinimum","maximum","exclusiveMaximum","multipleOf"];function Ke(t,e){for(const r of Yv){const n=e[r];n!==void 0?t[r]=n:t[r]===void 0&&delete t[r]}return t}const Xv={[p.Object]:(t,e)=>{var n=[];try{const r=it(n,t.createAndPushScope());return Ke(fl(t,e),e.options)}catch(i){var o=i,s=!0}finally{ft(n,o,s)}},[p.ObjectProperty]:()=>{throw new Error("Unexpected object property node")},[p.ObjectPropertyDependency]:fl,[p.Predicate]:(t,e)=>(ce(e.operator,"predicate operator"),mt(t,e.operator)),[p.Operator]:tr,[p.Array]:(t,{item:e,options:r})=>(ce(e,"array item"),Ke({type:"array",items:mt(t,e),default:pl(r.defaultValue)},r)),[p.Grid]:(t,{cells:e,options:r})=>{var a=[];try{const n=it(a,t.createAndPushScope());const i=new Map;const o=[];for(let u=0;u<e.length;u++){const h=e[u].node;if(!Kr(h))throw new Error;const g=n.id(h);i.set(g,mt(t,h)),h.options.required&&o.push(g)}const s={type:"object",properties:Object.fromEntries(i)};o.length>0&&(s.required=o);return Ke(s,r)}catch(l){var d=l,c=!0}finally{ft(a,d,c)}},[p.Enum]:(t,{items:e,valueType:r,options:n})=>Ke({enum:os(r,e),default:n.defaultValue&&JSON.parse(n.defaultValue)},n),[p.MultiEnum]:(t,{items:e,options:r,valueType:n})=>Ke({type:"array",uniqueItems:!0,items:{enum:os(n,e)},default:pl(r.defaultValue)},r),[p.EnumItem]:()=>{throw new Error("Unexpected enum item node")},[p.String]:(t,{options:e})=>Ke({type:"string"},e),[p.Number]:(t,{options:e})=>Ke({type:e.integer?"integer":"number"},e),[p.Boolean]:(t,{options:e})=>Ke({type:"boolean"},e),[p.File]:(t,{options:e})=>{const r=e.native?{}:{type:"string",format:"data-url"};return Ke(e.multiple?{type:"array",items:r}:r,e)},[p.Tags]:(t,{options:e})=>Ke({type:"array",uniqueItems:!0,items:{type:"string"}},e),[p.Range]:(t,{options:e,startNode:r,endNode:n,valueType:i})=>{t.propertyNames.set(r.id,"start"),t.propertyNames.set(n.id,"end");const o={type:i},s={type:"object",properties:{start:o,end:o}};return e.required&&(s.required=["start","end"]),Ke(s,e)},[p.QrCode]:(t,{options:e})=>Ke({type:"string"},e)};function mt(t,e){return Xv[e.type](t,e)}const Jv=["help"];function gi(t,e){for(const r of Jv){if(!(r in e))continue;const n=e[r];n!==void 0&&(t[r]=n)}return t}const xo=()=>{throw new Error("Invalid node")};function Pt(t,e,r={}){return{"ui:components":t.uiComponents(e),"ui:options":gi(Object.assign(t.useLabelOptions(e),r),e.options)}}function hl(t,e){const r=t===Be.JSON?JSON.stringify:Oo;return e.every(n=>r(n.label)===n.value)?{}:{enumNames:e.map(n=>n.label)}}const Kv={[p.Object]:(t,{options:e,properties:r})=>{const n=t.propertiesOrder;t.propertiesOrder=[];const i={};let o=!1;for(const s of r)o||=s.dependencies.length>0,Object.assign(i,rr(t,s));return i["ui:options"]=gi(o?{order:t.propertiesOrder}:{},e),t.propertiesOrder=n,i},[p.ObjectProperty]:(t,{dependencies:e,property:r})=>{const n=t.propertyNames.get(r.id);ce(n,"object property name"),t.propertiesOrder.push(n);const i={[n]:rr(t,r)};for(const o of e)Object.assign(i,rr(t,o));return i},[p.ObjectPropertyDependency]:(t,{properties:e})=>{const r={};for(const n of e)Object.assign(r,rr(t,n));return r},[p.Predicate]:xo,[p.Operator]:xo,[p.Array]:(t,{options:e,item:r})=>(ce(r,"array item"),{"ui:options":gi({},e),items:rr(t,r)}),[p.Grid]:(t,{options:e,height:r,width:n,cells:i})=>Object.assign({"ui:options":gi({layouts:{"object-properties":{style:`display: grid; grid-template-columns: repeat(${n}, ${e.cellSize}); grid-template-rows: repeat(${r}, ${e.cellSize}); gap: ${e.gap};${e.additionalStyles??""}`}}},e)},...i.map(({node:o,x:s,y:a,w:l,h:d})=>{const c=rr(t,o),u=t.propertyNames.get(o.id);ce(u,"grid cell name");const h={"ui:options":{layouts:{"object-property":{style:`grid-column: ${s+1} / span ${l}; grid-row: ${a+1} / span ${d};`}}}};return{[u]:c?Ne(c,h):h}})),[p.Enum]:(t,e)=>Pt(t,e,Object.assign(hl(e.valueType,e.items),e.options.widget=="radioWidget"?t.radioWidgetOptions(e.options.inline??!1):void 0)),[p.MultiEnum]:(t,e)=>{const r=Pt(t,e,e.options.widget==="checkboxesWidget"?t.checkboxesWidgetOptions(e.options.inline??!1):{}),n=hl(e.valueType,e.items);return Object.keys(n).length>0&&(r.items={"ui:options":n}),r},[p.EnumItem]:xo,[p.String]:(t,e)=>Pt(t,e,e.options.widget==="textWidget"?t.textWidgetOptions({type:e.options.inputType,placeholder:e.options.placeholder}):{}),[p.Number]:Pt,[p.Boolean]:Pt,[p.File]:Pt,[p.Tags]:Pt,[p.Range]:(t,e)=>Pt(t,e,{collectErrors:!0}),[p.QrCode]:Pt};function rr(t,e){const r=Kv[e.type](t,e);if(r){const n=Object.entries(r).filter(([i,o])=>o!==void 0&&Object.keys(o).length>0);return n.length>0?Object.fromEntries(n):void 0}return r}const Qv=["title","description","minItems","maxItems","uniqueItems","default","minLength","maxLength","pattern","minimum","exclusiveMinimum","maximum","exclusiveMaximum","multipleOf"];function sc(t){const e={};for(const r of Qv){const n=t[r];n!==void 0&&(e[r]=n)}return e}function Zv(){return crypto.randomUUID()}function Nt(t,e,r){if(!t)return r;const n=t["ui:components"];if(n&&typeof n=="object"){if(n.stringField==="formataQrField")return"textWidget";if(n.objectField==="aggregatedField")return"aggregatedWidget";if(n.arrayField==="multiEnumField")return"checkboxesWidget";if(n.arrayField==="arrayTagsField")return"tagsWidget";if(n.arrayField==="arrayFilesField"||n.arrayField==="arrayNativeFilesField")return"fileWidget"}return r}function em(t){const e=t?.["ui:components"];return typeof e=="object"&&e!==null&&e.stringField==="formataQrField"}function Qe(t,e,r,n){const i=sc(e);i.title!==void 0?t.options.title=String(i.title):t.options.title=n,i.description!==void 0&&(t.options.description=String(i.description));const o=e.required;if(typeof o=="boolean"&&(t.options.required=o),r?.["ui:options"]&&typeof r["ui:options"]=="object"){const s=r["ui:options"];typeof s.help=="string"&&(t.options.help=s.help)}}function tm(t){if(t.type!=="object"||!t.properties)return!1;const e=Object.keys(t.properties);if(e.length!==2||!e.includes("start")||!e.includes("end"))return!1;const r=t.properties.start,n=t.properties.end;if(!r||!n||typeof r!="object"||typeof n!="object")return!1;const i=r.type,o=n.type;return i==="string"&&o==="string"||(i==="number"||i==="integer")&&(o==="number"||o==="integer")}function rm(t){const e=t.properties?.start;if(typeof e!="object"||e===null)return yt.String;const r=e.type;return r==="number"||r==="integer"?yt.Number:yt.String}function gl(t){const e=t.default;if(!(!Array.isArray(e)||e.length===0))return e.map(r=>JSON.stringify(r))}function nm(t,e){if(t.type!=="object")throw new Error('parseSchemaToRootNode: root schema must have type "object"');const n=ac(t,e,{},t.title??"Form title");if(n.type!==p.Object)throw new Error("parseSchemaToRootNode: expected ObjectNode at root");return n}function ac(t,e,r,n){if(tm(t)){const a=rm(t),l=va(Zv(),a,{title:t.title??n,required:Array.isArray(t.required)&&t.required.includes("start"),widget:a===yt.Number?"rangeSliderWidget":"dateRangePickerWidget"});return Qe(l,t,e,n),l}const i=Ae(p.Object);Qe(i,t,e,n);const o=t.properties;if(!o||typeof o!="object")return i;const s=new Set(Array.isArray(t.required)?t.required:[]);for(const[a,l]of Object.entries(o)){if(!l||typeof l!="object")continue;const d=e?.[a],c=lc(l,d,r,a),u=Xi(c);c.options.required=s.has(a),c.options.title=a,i.properties.push(u)}return i}function lc(t,e,r,n){const i=sc(t);if(t.enum!==void 0&&(t.type===void 0||t.type==="string")){const s=Ae(p.Enum);s.valueType=Be.String;const l=t.enumNames;if(s.items=t.enum.map((d,c)=>{const u=l?.[c]??String(d),h=typeof d=="string"?d:JSON.stringify(d);return rs(u,h)}),s.options.title=i.title??n,s.options.required=!0,i.default!==void 0&&(s.options.defaultValue=JSON.stringify(i.default)),s.options.widget=Nt(e,p.Enum,"radioWidget"),e?.["ui:options"]&&typeof e["ui:options"]=="object"){const d=e["ui:options"];typeof d.inline=="boolean"&&(s.options.inline=d.inline)}return s}if(t.type==="array"){const s=t.items;if(s&&typeof s=="object"&&!Array.isArray(s)){const c=s;if(c.type==="string"&&c.format==="data-url"){const u=Ae(p.File);return Qe(u,t,e,n),u.options.multiple=!0,u.options.native=!1,u.options.widget=Nt(e,p.File,"fileWidget"),u}if(c.enum!==void 0&&t.uniqueItems===!0){const u=Ae(p.MultiEnum);u.valueType=Be.String;const g=c.enumNames;if(u.items=c.enum.map((v,m)=>{const O=g?.[m]??String(v),E=typeof v=="string"?v:JSON.stringify(v);return rs(O,E)}),Qe(u,t,e,n),i.minItems!==void 0&&(u.options.minItems=Number(i.minItems)),i.maxItems!==void 0&&(u.options.maxItems=Number(i.maxItems)),i.default!==void 0&&(u.options.defaultValue=gl(t)),u.options.widget=Nt(e,p.MultiEnum,"checkboxesWidget"),e?.["ui:options"]&&typeof e["ui:options"]=="object"){const v=e["ui:options"];typeof v.inline=="boolean"&&(u.options.inline=v.inline)}return u}if(c.type==="string"&&t.uniqueItems===!0){const u=Ae(p.Tags);return Qe(u,t,e,n),u.options.widget=Nt(e,p.Tags,"tagsWidget"),u}}const a=Ae(p.Array);Qe(a,t,e,n),i.default!==void 0&&(a.options.defaultValue=gl(t));const l=s&&typeof s=="object"&&!Array.isArray(s)?s:{type:"string"},d=e?.items;return a.item=lc(l,d,r,"Item"),a}if(t.type==="string"){if(t.format==="data-url"){const a=Ae(p.File);return Qe(a,t,e,n),a.options.multiple=!1,a.options.native=!1,a.options.widget=Nt(e,p.File,"fileWidget"),a}if(em(e)){const a=Ae(p.QrCode);if(Qe(a,t,e,n),i.default!==void 0&&(a.options.default=String(i.default)),a.options.widget=Nt(e,p.QrCode,"textWidget"),e?.["ui:options"]&&typeof e["ui:options"]=="object"){const l=e["ui:options"];typeof l.placeholder=="string"&&(a.options.placeholder=l.placeholder)}return a}const s=Ae(p.String);if(Qe(s,t,e,n),i.default!==void 0&&(s.options.default=String(i.default)),i.minLength!==void 0&&(s.options.minLength=Number(i.minLength)),i.maxLength!==void 0&&(s.options.maxLength=Number(i.maxLength)),i.pattern!==void 0&&(s.options.pattern=String(i.pattern)),s.options.widget=Nt(e,p.String,"textWidget"),e?.["ui:options"]&&typeof e["ui:options"]=="object"){const a=e["ui:options"];typeof a.placeholder=="string"&&(s.options.placeholder=a.placeholder);const l=a.text??a.shadcn4Text;l&&typeof l=="object"&&l.placeholder&&(s.options.placeholder=String(l.placeholder))}return s}if(t.type==="number"||t.type==="integer"){const s=Ae(p.Number);return Qe(s,t,e,n),s.options.integer=t.type==="integer",i.default!==void 0&&(s.options.default=Number(i.default)),i.minimum!==void 0&&(s.options.minimum=Number(i.minimum)),i.maximum!==void 0&&(s.options.maximum=Number(i.maximum)),i.multipleOf!==void 0&&(s.options.multipleOf=Number(i.multipleOf)),s.options.widget=Nt(e,p.Number,"numberWidget"),s}if(t.type==="boolean"){const s=Ae(p.Boolean);return Qe(s,t,e,n),i.default!==void 0&&(s.options.default=!!i.default),s.options.widget=Nt(e,p.Boolean,"checkboxWidget"),s}if(t.type==="object")return ac(t,e,r,n);const o=Ae(p.String);return Qe(o,t,e,n),o.options.title=(i.title??n)||"Field",o}const ir=0,gt=1,dc=gt<<1;function vi(t,e,r){let n=t.operatorStatus(e);switch(e.op){case N.And:case N.Or:case N.Xor:{if(e.operands.length===0)return{status:n|gt,value:`${e.op}(<undefined>)`};const i=[];for(const o of e.operands){const s=vi(t,o,r);n|=s.status,i.push(s.value)}return{status:n,value:`${e.op}(${i.join(", ")})`}}case N.Contains:case N.Not:{if(e.operand===void 0)return{status:n|gt,value:`${e.op}(<undefined>)`};const i=vi(t,e.operand,r&&(Ku(e)?Ki(r):r));return{status:n|i.status,value:`${e.op}(${i.value})`}}case N.Eq:return{status:n,value:`${e.op}(${e.value})`};case N.In:{const i=e.values.length>0;return{status:n|(i?ir:gt),value:`${e.op}([${i?e.values.join(", "):"<undefined>"}])`}}case N.Pattern:{const i=zl(e.value);return{status:n|(i?ir:gt),value:`${e.op}(${i?e.value:"<invalid>"})`}}case N.UniqueItems:return{status:n,value:e.op};case N.HasProperty:{const i=r&&e.propertyId&&(zr(r,e.propertyId)??void 0),o=(i&&Wi(i))??e.propertyId;return{status:n|(i!==void 0?ir:gt),value:`${e.op}(${o?`"${o}"`:"<undefined>"})`}}case N.Property:{const i=r&&e.propertyId&&(zr(r,e.propertyId)??void 0),o=e.operator&&vi(t,e.operator,i),s=(i&&Wi(i))??e.propertyId;return{status:n|(o?.status??gt),value:`${e.op}(${s?`"${s}"`:"<undefined>"}, ${o?.value??"<undefined>"})`}}default:{const i=e.value!==void 0;return{status:n|(i?ir:gt),value:`${e.op}(${i?e.value:"<undefined>"})`}}}}function im(t){return function*e(r,n={parentType:"root",parentNode:void 0}){t.onEnter&&(yield*t.onEnter(r,n));const i={parentType:r.type,parentNode:r};if(r.type===p.Object)for(const o of r.properties)yield*e(o,i);else if(r.type===p.ObjectProperty){yield*e(r.property,i);for(const o of r.dependencies)yield*e(o,i)}else if(r.type===p.ObjectPropertyDependency){r.predicate!==void 0&&(yield*e(r.predicate,i));for(const o of r.properties)yield*e(o,i)}else if(r.type===p.Predicate)r.operator!==void 0&&(yield*e(r.operator,i));else if(r.type===p.Operator)if(Ju(r))r.operand!==void 0&&(yield*e(r.operand,i));else if(is(r))for(const o of r.operands)yield*e(o,i);else Qu(r)&&r.operator!==void 0&&(yield*e(r.operator,i));else if(r.type===p.Array)r.item!==void 0&&(yield*e(r.item,i));else if(r.type===p.Grid)for(const o of r.cells)yield*e(o.node,i);else r.type===p.Range&&(yield*e(r.startNode,i),yield*e(r.endNode,i));t.onLeave&&(yield*t.onLeave(r,n))}}const uc=[],Xt=G(uc),So=G([N.HasProperty,N.Property]),cc=[N.MinItems,N.MaxItems],vl=G(cc),fc=cc.concat(N.UniqueItems),om=fc.concat(N.Contains),ml=G([N.Format,N.Pattern,N.MinLength,N.MaxLength]),sm=G([N.Less,N.LessOrEq,N.Greater,N.GreaterOrEq,N.MultipleOf]),am={[p.Object]:So,[p.ObjectProperty]:Xt,[p.ObjectPropertyDependency]:Xt,[p.Predicate]:Xt,[p.Operator]:Xt,[p.Array]:G(om),[p.Grid]:So,[p.Enum]:Xt,[p.MultiEnum]:vl,[p.EnumItem]:Xt,[p.String]:ml,[p.Number]:sm,[p.Boolean]:Xt,[p.File]:t=>t.options.multiple?fc:uc,[p.Tags]:vl,[p.Range]:So,[p.QrCode]:ml},lm=new Set([N.And,N.Or,N.Xor,N.Not,N.Eq,N.In]),dm=im({*onEnter(t){yield am[t.type](t)}});function um(t,e=!1){const r=new Set(lm);for(const n of dm(t)){for(const i of n)r.add(i);if(e)break}return r}var pc=(t=>(t.Ajv="ajv8",t))(pc||{}),Di=(t=>(t.Basic="basic",t.Compat="compat",t))(Di||{}),hc=(t=>(t.None="none",t.Flowbite="flowbite",t.Moving="moving",t.Lucide="lucide",t.Radix="radix",t))(hc||{}),ss=(t=>(t.Editor="editor",t.Preview="preview",t))(ss||{});const cm={[rt.Shadcn4]:t=>({shadcn4Text:{...t}})},gc={[rt.Shadcn4]:t=>t?{layouts:{"field-content":{style:"display: flex; gap: 1rem;"}}}:{}},fm={...gc,[rt.Shadcn4]:t=>t?{shadcn4RadioGroup:{style:"grid-auto-flow: column; grid-auto-columns: max-content;"}}:{}},pm={[Di.Basic]:{[p.Enum]:t=>{const e=os(t.valueType,t.items);return{[`${Uc(e.map(Bc))}Field`]:"enumField"}},[p.MultiEnum]:G({arrayField:"multiEnumField"}),[p.String]:G(void 0),[p.Number]:G(void 0),[p.Boolean]:G(void 0),[p.File]:t=>t.options.multiple?{arrayField:t.options.native?"arrayNativeFilesField":"arrayFilesField"}:t.options.native?{unknownField:"unknownNativeFileField"}:{stringField:"fileField"},[p.Tags]:G({arrayField:"arrayTagsField"}),[p.Range]:G({objectField:"aggregatedField"}),[p.QrCode]:G({stringField:"formataQrField"})},[Di.Compat]:{[p.Enum]:G(void 0),[p.MultiEnum]:G(void 0),[p.String]:G(void 0),[p.Number]:G(void 0),[p.Boolean]:G(void 0),[p.File]:t=>{if(t.options.native)return t.options.multiple?{arrayField:"arrayNativeFilesField"}:{unknownField:"unknownNativeFileField"}},[p.Tags]:G({arrayField:"arrayTagsField"}),[p.Range]:G({objectField:"aggregatedField"}),[p.QrCode]:G({stringField:"formataQrField"})}},yl={[p.Enum]:Yu.properties.widget.default,[p.MultiEnum]:ma.properties.widget.default,[p.String]:ha.properties.widget.default,[p.Number]:ga.properties.widget.default,[p.Boolean]:ya.properties.widget.default,[p.File]:Ii.properties.widget.default,[p.Tags]:Ii.properties.widget.default,[p.Range]:"aggregatedWidget",[p.QrCode]:"textWidget"},hm=["textWidget","numberWidget","checkboxWidget","selectWidget"];new Set(hm);const as={textWidget:"Text input",numberWidget:"Number input",selectWidget:"Select",checkboxWidget:"Checkbox",fileWidget:"File input",checkboxesWidget:"Checkboxes",tagsWidget:"Tags",datePickerWidget:"Date picker",multiSelectWidget:"Multi Select",radioWidget:"Radio group",rangeWidget:"Range",textareaWidget:"Textarea",radioButtonsWidget:"Radio buttons",switchWidget:"Switch",comboboxWidget:"Combobox",aggregatedWidget:"Invalid widget",shadcn4DateRangePickerWidget:"Date range picker",dateRangePickerWidget:"Date range picker",rangeSliderWidget:"Range slider"},gm={textWidget:!0,numberWidget:!0,selectWidget:!0,checkboxWidget:!0,fileWidget:!0,checkboxesWidget:!1,tagsWidget:!0,datePickerWidget:!0,multiSelectWidget:!0,radioWidget:!1,rangeWidget:!0,textareaWidget:!0,radioButtonsWidget:!1,switchWidget:!0,comboboxWidget:!0,aggregatedWidget:!1,shadcn4DateRangePickerWidget:!1,dateRangePickerWidget:new Set([rt.Shadcn4]),rangeSliderWidget:!1};function bl(t,e){const r=gm[e];return typeof r=="boolean"?r:r.has(t)}p.Enum+"",G({properties:{widget:{enum:["selectWidget","radioWidget"]}}}),p.MultiEnum+"",G({properties:{widget:{enum:["checkboxesWidget","multiSelectWidget"]}}}),p.String+"",G({properties:{widget:{enum:["textWidget","textareaWidget","datePickerWidget"]}}}),p.Number+"",G({properties:{widget:{enum:["numberWidget","rangeWidget"]}}}),p.Boolean+"",G({properties:{widget:{enum:["checkboxWidget"]}}}),p.File+"",G({properties:{widget:{enum:["fileWidget"]}}});const vc={[rt.Shadcn4]:{[p.Enum]:G({properties:{widget:{enum:["selectWidget","radioWidget","comboboxWidget"]}}}),[p.MultiEnum]:G({properties:{widget:{enum:["checkboxesWidget","multiSelectWidget"]}}}),[p.String]:G({properties:{widget:{enum:["textWidget","textareaWidget","datePickerWidget"]}}}),[p.Number]:G({properties:{widget:{enum:["numberWidget","rangeWidget"]}}}),[p.Boolean]:G({properties:{widget:{enum:["checkboxWidget","switchWidget"]}}}),[p.File]:G({properties:{widget:{enum:["fileWidget"]}}}),[p.Range]:t=>({properties:{widget:{enum:{[yt.String]:["dateRangePickerWidget"],[yt.Number]:["rangeSliderWidget"]}[t.valueType]}}})}},vm={[rt.Shadcn4]:mm(vc[rt.Shadcn4])};function mm(t){const e={};for(const[r,n]of Object.entries(t)){const i=ym(n);e[r]=i}return e}function ym(t){return e=>{const n=t(e).properties?.widget;if(!(n===void 0||!Hc(n)||n.enum===void 0||n.enum.some(i=>typeof i!="string"||!(i in as))))return{widget:{"ui:options":{enumNames:n.enum.map(i=>as[i])}}}}}const bm=[p.Object,p.Grid,p.Array,p.Enum,p.MultiEnum,p.String,p.Number,p.Boolean,p.File,p.QrCode],_m={[rt.Shadcn4]:[...bm,p.Range]},wm={[rt.Shadcn4]:[yt.String,yt.Number]};function _l(t){return t.replace(/'/g,"&#39;").replace(/&/g,"&amp;")}function wl(t,e="	"){return t.split(`
`).map(r=>e+r).join(`
`)}function xm({schema:t,uiSchema:e={}}){const r=JSON.stringify(t,null,"	"),n=_l(wl(r)),i=e??{},o=i&&!$c(i)?`
	ui-schema='
${_l(wl(JSON.stringify(i,null,"	")))}'`:"";return`<formata-form
	schema='
${n}'${o}
></formata-form>`}const[De,sb]=Cn(),xl={current(){},update(){}},Sl={current:void 0},Sa=Ae(p.Object);Sa.options.title="Form title";Sa.properties.push(Xi(Ae(p.String)));class ab{constructor(e){this.highlighter=e,ao(()=>{this.#e.destroy()}),this.#e.monitor.addEventListener("beforedragstart",({operation:{source:s}})=>{if(s===null)return;const{id:a,data:l}=s;V(this.#r,a),a!==void 0&&(this.#s.get(a)?.(),V(this.#n,l.node))}),this.#e.monitor.addEventListener("dragover",s=>{V(this.#o,s.operation.target?.id)}),this.#e.monitor.addEventListener("dragend",({operation:{target:s,source:a}})=>{V(this.#r,void 0),V(this.#o,void 0),V(this.#n,void 0);const l=s?.id;if(l===void 0||a===null)return;const{id:d,data:c}=a;this.#a.get(d)?.();const u=this.#l.get(l);Gc(()=>{u?.(c.node)})});let r,n;const i=window.requestIdleCallback??setTimeout,o=window.requestIdleCallback?cancelIdleCallback:clearTimeout;Ir(()=>{if(!this.livePreview)return;const s=lo({ignoreWarnings:this.ignoreWarnings,rootNode:this.rootNode});Yc(n,s)||(n=s,o(r),r=i(()=>{this.validate()&&this.build()}))})}#e=new _g;#N=yf({ajvPlugins:e=>bf(_f(e))});#r=se();#o=se();#s=new Map;#a=new Map;#l=new Map;#n=se();#u=se(Xc(Sa));get rootNode(){return f(this.#u)}set rootNode(e){V(this.#u,e,!0)}#i=se(xl);#c=S(()=>{try{return f(this.#i).current()}catch{return}});get selectedNode(){return f(this.#c)}set selectedNode(e){V(this.#c,e)}#f=se(!0);#d=se(Sl);#p=S(()=>{try{return f(this.#d).current}catch{return}});get affectedNode(){return f(this.#p)}set affectedNode(e){V(this.#p,e)}get theme(){return rt.Shadcn4}get resolver(){return Di.Basic}get icons(){return hc.Lucide}get validator(){return pc.Ajv}#h=S(()=>_m[this.theme]);get availableCustomizableNodeTypes(){return f(this.#h)}set availableCustomizableNodeTypes(e){V(this.#h,e)}#g=S(()=>wm[this.theme]);get availableRangeValueTypes(){return f(this.#g)}set availableRangeValueTypes(e){V(this.#g,e)}get isDragged(){return f(this.#r)!==void 0}selectNode(e,r){V(this.#i,e),V(this.#f,r)}updateSelectedNode(e){f(this.#i).update(e)}selectAffectedNode(e){V(this.#d,e)}clearSelection(){V(this.#i,xl),V(this.#d,Sl)}#v=se(!1);get ignoreWarnings(){return f(this.#v)}set ignoreWarnings(e){V(this.#v,e,!0)}#m=se(!0);get livePreview(){return f(this.#m)}set livePreview(e){V(this.#m,e,!0)}#y=se(!1);get html5Validation(){return f(this.#y)}set html5Validation(e){V(this.#y,e,!0)}#b=se(0);get _errorsCount(){return f(this.#b)}set _errorsCount(e){V(this.#b,e,!0)}get errorsCount(){return this._errorsCount}#_=se({});get _errors(){return f(this.#_)}set _errors(e){V(this.#_,e)}get errors(){return this._errors}#w=se(0);get _warningsCount(){return f(this.#w)}set _warningsCount(e){V(this.#w,e,!0)}get warningsCount(){return this._warningsCount}#x=se({});get _warnings(){return f(this.#x)}set _warnings(e){V(this.#x,e)}get warnings(){return this._warnings}setIssues(e,r){this[`_${e}Count`]=r.length,this[`_${e}`]=Object.groupBy(r,n=>n.nodeId)}#S=se({name:ss.Editor});get route(){return f(this.#S)}set route(e){V(this.#S,e)}#t=se(void 0);#O=S(()=>f(this.#t)?.schema??{type:"object"});get schema(){return f(this.#O)}set schema(e){V(this.#O,e)}#k=S(()=>(f(this.#t),this.theme,this.resolver,Rr(()=>({uiSchema:this.rootNode&&f(this.#t)&&rr({propertyNames:f(this.#t).propertyNames,propertiesOrder:[],uiComponents:r=>{const n=r.options.widget,i=Object.assign({},pm[this.resolver][r.type](r)),o=yl[r.type];return r.options.widget!==o&&(i[o]=n),i},textWidgetOptions:r=>Object.values(r).every(n=>n===void 0)?{}:cm[this.theme](r),checkboxesWidgetOptions:r=>gc[this.theme](r),radioWidgetOptions:r=>fm[this.theme](r),useLabelOptions:({type:r,options:n})=>{const i=n.widget,o=yl[r];if(o!==i){const s=bl(this.theme,i);if(bl(this.theme,o)!==s)return{useLabel:s}}return{}}},this.rootNode)}))));#E=S(()=>f(this.#k).uiSchema);get uiSchema(){return f(this.#E)}set uiSchema(e){V(this.#E,e)}#P=S(()=>this.highlight("html",xm({schema:this.schema,uiSchema:this.uiSchema})));get formataFormHtml(){return f(this.#P)}set formataFormHtml(e){V(this.#P,e)}importState(e){const{rootNode:r,ignoreWarnings:n,html5Validation:i,route:o,livePreview:s}=e;this.rootNode=r,this.ignoreWarnings=n,this.html5Validation=i,this.route=o,"livePreview"in e&&(this.livePreview=e.livePreview),this.route.name===ss.Preview&&this.build()}loadFromSchema(e,r){const n=nm(e,r);this.importState({rootNode:n,ignoreWarnings:this.ignoreWarnings,html5Validation:this.html5Validation,route:this.route,livePreview:this.livePreview})}exportState(){return lo({rootNode:this.rootNode,livePreview:this.livePreview,ignoreWarnings:this.ignoreWarnings,route:this.route,html5Validation:this.html5Validation})}createPlaygroundSample(){return{schema:this.schema,uiSchema:this.uiSchema??{},initialValue:null,html5Validation:!0}}createDroppable(e,r){const n=crypto.randomUUID(),i=new pa({id:n,accept(s){return r.accept(s.data.node)}},this.#e);Ir(()=>{i.disabled=e.isDragged}),this.#l.set(n,s=>{r.accept(s)&&r.onDrop(s)}),ao(()=>{this.#l.delete(n),i.destroy()});const o=this;return{get isReady(){return f(o.#n)===void 0||r.accept(f(o.#n))},get isOver(){return f(o.#o)===n},attach(s){return i.element=s,()=>{i.element=void 0}}}}createDraggable(e){const r=crypto.randomUUID();let n;const i=new Vn({data:{get node(){return n}},feedback:"clone",id:r},this.#e);this.#s.set(r,()=>{n=lo(e.node)}),this.#a.set(r,e.unmount),ao(()=>{this.#s.delete(r),this.#a.delete(r),i.destroy()});const o=this;return{get isDragged(){return f(o.#r)===r},attach(s){return i.element=s,()=>{i.element=void 0}},attachHandle(s){return i.handle=s,()=>{i.handle=void 0}}}}nodeSchema(e){const r=Mv[e.type],n=vc[this.theme][e.type]?.(e);return n?Ee(r,n):r}nodeUiSchema(e){const r=Ne(Av[e.type],{required:{"ui:options":{layouts:{"object-property":{hidden:!f(this.#f)}}}}}),n=vm[this.theme][e.type]?.(e);return n?Ne(r,n):r}summarizeOperator(e,r){return vi({operatorStatus:n=>(this._errors[n.id]===void 0?ir:gt)|(this._warnings[n.id]===void 0?ir:dc)},e,r)}validate(){if(this.rootNode===void 0)return!1;const e={complementary:[],affectedNode:[],enumValueType:[]},r=[],n=[],i=this;return pt({validateCustomizableNodeOptions(o){const s=i.nodeSchema(o),a=i.#N.validateFormValue(s,o.options);a.errors&&(r.push({nodeId:o.id,message:"Invalid field options"}),console.error(a.errors))},getAvailableRangeValueTypes(){return i.availableRangeValueTypes},addError(o,s){r.push({nodeId:o.id,message:s,node:o})},addWarning(o,s){n.push({nodeId:o.id,message:s})},push(o,s){return e[o].push(s),{[Symbol.dispose]:()=>{e[o].pop()}}},peek(o){return e[o].at(-1)}},this.rootNode),this.setIssues("errors",r),this.setIssues("warnings",n),r.length===0&&(this.ignoreWarnings||n.length===0)}build(){if(this.rootNode===void 0)throw new Error("Root node is undefined");const e={scope:[],affectedNode:[]},r=new Map,n={propertyNames:r,createAndPushScope(){const o=new Map,s={id({id:a,options:{title:l}}){let d=o.get(l)??0;const c=d===0?l:`${l}_${d}`;return o.set(l,d+1),r.set(a,c),c}};return Object.assign(s,n.push("scope",s))},push(o,s){return e[o].push(s),{[Symbol.dispose](){e[o].pop()}}},peek(o){return e[o].at(-1)}},i=mt(n,this.rootNode);V(this.#t,{propertyNames:r,schema:i})}highlight(e,r){return Pf(this.highlighter,e,r)}}const[Qr,Sm]=Cn();var Om=R("<div><div><!></div></div>");function Qi(t,e){D(e,!0);var r=Om(),n=L(r),i=L(n);He(i,()=>e.placeholder),F(n),F(r),zi(r,()=>e.droppable.attach),K(()=>{Cr(r,1,Wr(["border-2 border-dashed rounded-md p-6 w-full h-full flex items-center justify-center",e.droppable.isOver&&"border-chart-2 bg-chart-2/5"])),Cr(n,1,Wr(["text-lg text-center font-medium",e.droppable.isReady?"text-foreground":"text-muted-foreground"]))}),w(t,r),j()}var Em=R("<div><!></div>");function Pm(t,e){D(e,!0);const r=Rn(e,["$$slots","$$events","$$legacy","children","class"]);var n=Em();pe(n,o=>({class:o,...r}),[()=>Vi("rounded-md p-2 border bg-background w-full",e.class)]);var i=L(n);He(i,()=>e.children??Ut),F(n),w(t,n),j()}function dt(t,e){D(e,!0);let r=q(e,"node",15),n=q(e,"status",3,ir);const i=De(),o={current(){return r()},update(d){r(d)}},s=d=>{d.stopPropagation(),!e.disableSelection&&(i.selectNode(o,e.showRequired),e.onSelect?.())},a=S(()=>n()&gt||i.errors[r().id]!==void 0),l=S(()=>n()&dc||i.warnings[r().id]!==void 0);{let d=S(()=>Vi(e.draggable.isDragged&&"opacity-70",i.selectedNode?.id===r().id?"border-blue-600":f(a)?"border-destructive":f(l)&&"border-chart-3",e.class));Pm(t,{[Jc()]:c=>(e.draggable.attach||Ut)(c),get class(){return f(d)},role:"button",tabindex:0,onkeydown:c=>{(c.code==="Enter"||c.code==="Space")&&s(c)},onclick:s,get children(){return e.children}})}j()}function Oa(t,e){ke(t,{variant:"destructive",size:"icon",class:"size-8",get onclick(){return e.onClick},children:(r,n)=>{wf(r,{})},$$slots:{default:!0}})}var Nm=R('<div><div class="cursor-grab"><!></div> <div class="text-md truncate flex-1"><!></div> <!> <!></div>');function Zi(t,e){D(e,!0);var r=Nm(),n=L(r),i=L(n);Ul(i,{class:"size-5"}),F(n),zi(n,()=>e.draggable.attachHandle);var o=I(n,2),s=L(o);He(s,()=>e.children),F(o);var a=I(o,2);He(a,()=>e.append??Ut);var l=I(a,2);Oa(l,{onClick:d=>{d.stopPropagation(),e.unmount()}}),F(r),K(()=>Cr(r,1,Wr(["flex gap-2 items-center pt-2",e.disablePadding?"pb-2":"pb-4"]))),w(t,r),j()}var km=R('<span class="text-muted-foreground"> </span>'),Mm=R("<span>*</span>"),Tm=R(" <!>",1);function Zr(t,e){D(e,!0);const n=q(e,"append",3,i=>{var o=X(),s=W(o);{var a=l=>{var d=km(),c=L(d,!0);F(d),K(()=>ae(c,as[e.node.options.widget])),w(l,d)};ye(s,l=>{"widget"in e.node.options&&l(a)})}w(i,o)});Zi(t,{get draggable(){return e.draggable},get unmount(){return e.unmount},get disablePadding(){return e.disablePadding},get append(){return n()},children:(i,o)=>{ge();var s=Tm(),a=W(s),l=I(a);{var d=c=>{var u=Mm();w(c,u)};ye(l,c=>{e.showRequired&&e.node.options.required&&c(d)})}K(()=>ae(a,`${e.node.options.title??""} `)),w(i,s)},$$slots:{default:!0}}),j()}var Am=R("<li> </li>"),Im=R("<ul></ul>"),Rm=R("<div><!> <!></div>");function ut(t,e){D(e,!0);const r=(l,d=Ut)=>{const c=S(()=>f(i)[d()]);var u=X(),h=W(u);{var g=v=>{var m=Im();$e(m,21,()=>f(c),ds,(O,E)=>{var _=Am(),P=L(_,!0);F(_),K(()=>ae(P,f(E).message)),w(O,_)}),F(m),K(()=>Cr(m,1,Wr(["list-inside list-disc",{"text-destructive":d()==="errors","text-chart-3":d()==="warnings"}]))),w(v,m)};ye(h,v=>{f(c)!==void 0&&f(c).length>0&&v(g)})}w(l,u)},n=De(),i=S(()=>({errors:n.errors[e.node.id],warnings:n.warnings[e.node.id]}));var o=X(),s=W(o);{var a=l=>{var d=Rm(),c=L(d);r(c,()=>"errors");var u=I(c,2);r(u,()=>"warnings"),F(d),K(h=>Cr(d,1,h),[()=>Wr(Vi("p-2 flex flex-col gap-2",e.class))]),w(l,d)};ye(s,l=>{(f(i).errors||f(i).warnings)&&l(a)})}w(t,o),j()}var Cm=R("<!> <!>",1),Wm=R('<div class="flex items-center gap-2"><!> <!></div>');function mc(t,e){const r=Cl();D(e,!0);let n=q(e,"value",15);var i=Wm(),o=L(i);Wl(o,{class:"text-base text-muted-foreground",get for(){return r},children:(a,l)=>{ge();var d=xe("Value type");w(a,d)},$$slots:{default:!0}});var s=I(o,2);Z(s,()=>Fl,(a,l)=>{l(a,{type:"single",get value(){return n()},set value(d){n(d)},children:(d,c)=>{var u=Cm(),h=W(u);Z(h,()=>Dl,(v,m)=>{m(v,{get id(){return r},size:"sm",children:(O,E)=>{ge();var _=xe();K(()=>ae(_,e.labels[n()])),w(O,_)},$$slots:{default:!0}})});var g=I(h,2);Z(g,()=>jl,(v,m)=>{m(v,{children:(O,E)=>{var _=X(),P=W(_);$e(P,16,()=>e.items,y=>y,(y,b)=>{var M=X(),x=W(M);Z(x,()=>ql,(k,A)=>{A(k,{get value(){return b},children:(C,$)=>{ge();var T=xe();K(()=>ae(T,e.labels[b])),w(C,T)},$$slots:{default:!0}})}),w(y,M)}),w(O,_)},$$slots:{default:!0}})}),w(d,u)},$$slots:{default:!0}})}),F(i),w(t,i),j()}var Dm=R('<div class="h-2 w-full flex flex-col justify-center"><div></div></div>');function ji(t,e){D(e,!0);const r=Rn(e,["$$slots","$$events","$$legacy"]),n=De(),i=Qr(),o=n.createDroppable(i,r);var s=Dm(),a=L(s);F(s),zi(s,()=>o.attach),K(()=>Cr(a,1,Wr(["w-full h-0.5 bg-chart-2",!o.isOver&&"hidden"]))),w(t,s),j()}var jm=R('<div class="cursor-grab"><!></div> <!> <!> <!> <!>',1);function Fm(t,e){D(e,!0);let r=q(e,"node",15);dt(t,{get draggable(){return e.draggable},class:"grid grid-cols-[auto_1fr_1fr_auto] gap-2 items-center",disableSelection:!0,showRequired:!1,get node(){return r()},set node(n){r(n)},children:(n,i)=>{var o=jm(),s=W(o),a=L(s);Ul(a,{class:"size-5"}),F(s),zi(s,()=>e.draggable.attachHandle);var l=I(s,2),d=()=>r().label,c=v=>{e.toValue(r().label)===r().value&&r(r().value=e.toValue(v),!0),r(r().label=v,!0)};or(l,{placeholder:"Label",get value(){return d()},set value(v){c(v)}});var u=I(l,2);or(u,{placeholder:"Value",get value(){return r().value},set value(v){r(r().value=v,!0)}});var h=I(u,2);Oa(h,{get onClick(){return e.unmount}});var g=I(h,2);ut(g,{class:"col-span-4",get node(){return r()}}),w(n,o)},$$slots:{default:!0}}),j()}const qm=new Set(["true","false","null"]);var Lm=R("<!> <!>",1),zm=R('<div class="grid grid-cols-[1fr_1fr_auto] gap-2 items-center"><!> <!> <!></div> <div class="flex flex-col gap-0.5"><!> <!></div>',1);function Vm(t,e){D(e,!0);let r=q(e,"items",15);const n=S(()=>e.valueType===Be.JSON?{toValue(x){return qm.has(x)||Number(x).toString()===x?x:JSON.stringify(x)}}:{toValue:Oo}),i=S(()=>f(n).toValue),o={[Be.JSON]:x=>{try{const k=JSON.parse(x);return typeof k=="string"?k:x}catch{return x}},[Be.String]:Oo};let s;Ir(()=>{if(s!==void 0){const x=o[s],k=Rr(()=>r().map(C=>x(C.value)));for(let C=0;C<k.length;C++)r(r()[C].value=f(i)(k[C]),!0);const A=Rr(()=>x(f(l)));V(l,f(i)(A),!0)}s=e.valueType});let a=se(""),l=se(""),d=se(null);function c(x){x.stopPropagation(),r().push(rs(f(a),f(l))),V(a,""),V(l,f(i)(""),!0),f(d)?.focus()}function u(x){x.code==="Enter"&&(x.preventDefault(),c(x))}const h=De();var g=zm(),v=W(g),m=L(v),O=()=>f(a),E=x=>{f(i)(f(a))===f(l)&&V(l,f(i)(x),!0),V(a,x,!0)};or(m,{placeholder:"Enter label...",get value(){return O()},set value(x){E(x)},onkeydown:u,get ref(){return f(d)},set ref(x){V(d,x)}});var _=I(m,2);or(_,{placeholder:"Enter value...",onkeydown:u,get value(){return f(l)},set value(x){V(l,x,!0)}});var P=I(_,2);ke(P,{variant:"outline",size:"icon",class:"size-8",onclick:c,children:(x,k)=>{gs(x,{class:"size-4"})},$$slots:{default:!0}}),F(v);var y=I(v,2),b=L(y);$e(b,19,r,x=>x.id,(x,k,A)=>{const C=S(()=>()=>{r().splice(f(A),1)}),$=S(()=>h.createDraggable({unmount:f(C),get node(){return r()[f(A)]}}));var T=Lm(),z=W(T);ji(z,{get accept(){return sl},onDrop:be=>{r().splice(f(A),0,be)}});var oe=I(z,2);Fm(oe,{showRequired:!1,get draggable(){return f($)},get toValue(){return f(i)},unmount:f(C),get node(){return r()[f(A)]},set node(be){r(r()[f(A)]=be,!0)}}),w(x,T)});var M=I(b,2);ji(M,{get accept(){return sl},onDrop:x=>{r().push(x)}}),F(y),w(t,g),j()}var Um=R("<!> <!> <!>",1);function Ol(t,e){D(e,!0);let r=q(e,"node",15);dt(t,{get draggable(){return e.draggable},get showRequired(){return e.showRequired},class:"flex flex-col gap-0.5",get node(){return r()},set node(n){r(n)},children:(n,i)=>{var o=Um(),s=W(o);Zr(s,{get node(){return r()},get draggable(){return e.draggable},get unmount(){return e.unmount},get showRequired(){return e.showRequired},append:c=>{mc(c,{get items(){return xg},get labels(){return wg},get value(){return r().valueType},set value(u){r(r().valueType=u,!0)}})},$$slots:{append:!0}});var a=I(s,2);Vm(a,{get valueType(){return r().valueType},get items(){return r().items},set items(d){r(r().items=d,!0)}});var l=I(a,2);ut(l,{get node(){return r()}}),w(n,o)},$$slots:{default:!0}}),j()}const[Bm,Hm]=Cn();function $m(t,e){D(e,!0),Hm({get current(){return e.index}});var r=X(),n=W(r);He(n,()=>e.children),w(t,r),j()}var Gm=R("<!> <!>",1),Ym=R("<!> <!>",1);function eo(t,e){D(e,!0);const r=q(e,"nodes",15),n=De(),i=Qr();var o=X(),s=W(o);{var a=d=>{const c=S(()=>n.createDroppable(i,{accept:e.accept,onDrop(u){e.onDrop(u,0)}}));Qi(d,{get droppable(){return f(c)},placeholder:h=>{ge();var g=xe("Drop form elements here");w(h,g)},$$slots:{placeholder:!0}})},l=d=>{var c=Ym(),u=W(c);$e(u,18,r,g=>g,(g,v,m)=>{var O=Gm(),E=W(O);ji(E,{get accept(){return e.accept},onDrop:P=>{e.onDrop(P,f(m))}});var _=I(E,2);$m(_,{get index(){return f(m)},children:(P,y)=>{ro(P,{get showRequired(){return e.showRequired},unmount:()=>{r().splice(f(m),1)},get node(){return r()[f(m)]},set node(b){r(r()[f(m)]=b,!0)}})},$$slots:{default:!0}}),w(g,O)});var h=I(u,2);ji(h,{get accept(){return e.accept},onDrop:g=>{e.onDrop(g,r().length)}}),w(d,c)};ye(s,d=>{r().length===0?d(a):d(l,!1)})}w(t,o),j()}var Xm=R("<!> <!> <!>",1);function Jm(t,e){D(e,!0);let r=q(e,"node",15);const n=De(),i=(o,s)=>{const a=Ji(o)?o:Xi(o);r().properties.splice(s,0,a),n.selectNode({current(){return r().properties.find(l=>l.id===a.id)?.property},update(l){const d=r().properties.findIndex(c=>c.id===a.id);r(r().properties[d].property=l,!0)}},!0)};dt(t,{get draggable(){return e.draggable},get showRequired(){return e.showRequired},class:"flex flex-col gap-0.5",get node(){return r()},set node(o){r(o)},children:(o,s)=>{var a=Xm(),l=W(a);{let u=S(()=>r().properties.length>0);Zr(l,{get node(){return r()},get draggable(){return e.draggable},get unmount(){return e.unmount},get disablePadding(){return f(u)},get showRequired(){return e.showRequired}})}var d=I(l,2);eo(d,{showRequired:!0,get accept(){return _a},onDrop:i,get nodes(){return r().properties},set nodes(u){r(r().properties=u,!0)}});var c=I(d,2);{let u=S(()=>[r().properties.length===0&&"pt-4"]);ut(c,{get class(){return f(u)},get node(){return r()}})}w(o,a)},$$slots:{default:!0}}),j()}const[gr,Ea]=Cn(),[Km,Qm]=Cn();var Zm=R('<div class="flex flex-col gap-0.5 px-2"><!></div>'),ey=R("<!> <!> <!> <!>",1);function ty(t,e){D(e,!0);let r=q(e,"node",15);const n=S(()=>bc[r().property.type]),i=De(),o=S(()=>i.selectedNode?.id===r().property.id),s=S(()=>r().dependencies.length>0);function a(c){c.stopPropagation();const u=Sv();r().dependencies.push(u),r(r().complementary=u.id,!0)}Qm({get complementary(){return r().complementary},set complementary(c){r(r().complementary=c,!0)}}),Ea({get node(){return r().property}});const l=S(()=>i.errors[r().id]!==void 0),d=S(()=>i.warnings[r().id]!==void 0);{let c=S(()=>["p-0 border-none relative bg-border flex flex-col gap-1",f(o)?"shadow-[inset_0_0_0_1px_var(--primary)]":f(l)?"shadow-[inset_0_0_0_1px_var(--destructive)]":f(d)&&"shadow-[inset_0_0_0_1px_var(--chart-3)]"]);dt(t,{get draggable(){return e.draggable},get class(){return f(c)},showRequired:!0,get node(){return r().property},set node(u){r(r().property=u,!0)},children:(u,h)=>{var g=ey(),v=W(g);{let P=S(()=>["absolute -bottom-11 left-1/2 -translate-x-1/2 z-50",f(o)&&!i.isDragged?"inline-flex":"hidden"]);ke(v,{get class(){return f(P)},onclick:a,children:(y,b)=>{ge();var M=xe("Add dependency");w(y,M)},$$slots:{default:!0}})}var m=I(v,2);Z(m,()=>f(n),(P,y)=>{y(P,{showRequired:!0,get unmount(){return e.unmount},get draggable(){return e.draggable},get node(){return r().property},set node(b){r(r().property=b,!0)}})});var O=I(m,2);{var E=P=>{var y=Zm(),b=L(y);eo(b,{showRequired:!1,get accept(){return qv},onDrop:(M,x)=>{r().dependencies.splice(x,0,M)},get nodes(){return r().dependencies},set nodes(M){r(r().dependencies=M,!0)}}),F(y),w(P,y)};ye(O,P=>{f(s)&&P(E)})}var _=I(O,2);{let P=S(()=>["p-4",r().dependencies.length>0?"pt-0":"pt-2"]);ut(_,{get class(){return f(P)},get node(){return r()}})}w(u,g)},$$slots:{default:!0}})}j()}var ry=R("Drop predicate here or <!>",1);function ny(t,e){D(e,!0);let r=q(e,"node",15);const n=De(),i=Qr(),o={current(){return r().predicate},update(c){r(r().predicate=c,!0)}};var s=X(),a=W(s);{var l=c=>{ro(c,{showRequired:!1,unmount:()=>{r(r().predicate=void 0,!0)},get node(){return r().predicate},set node(u){r(r().predicate=u,!0)}})},d=c=>{const u=S(()=>n.createDroppable(i,{accept:Fv,onDrop(h){r(r().predicate=h,!0),n.selectNode(o,!1)}}));Qi(c,{get droppable(){return f(u)},placeholder:g=>{ge();var v=ry(),m=I(W(v));ke(m,{onclick:O=>{O.stopPropagation(),r(r().predicate=$u(),!0),n.selectNode(o,!1)},children:(O,E)=>{ge();var _=xe("Create one");w(O,_)},$$slots:{default:!0}}),w(g,v)},$$slots:{placeholder:!0}})};ye(a,c=>{r().predicate?c(l):c(d,!1)})}w(t,s),j()}function to(t,e){D(e,!0);let r=q(e,"node",15);const n=De(),i=Qr(),o=gr(),s=S(()=>um(o.node,!0));var a=X(),l=W(a);{var d=u=>{ro(u,{showRequired:!1,unmount:()=>{r(void 0)},get node(){return r()},set node(h){r(h)}})},c=u=>{const h=S(()=>n.createDroppable(i,{accept:g=>Zu(g)&&f(s).has(g.op),onDrop(g){r(g)}}));Qi(u,{get droppable(){return f(h)},placeholder:v=>{ge();var m=xe("Drop operator here");w(v,m)},$$slots:{placeholder:!0}})};ye(l,u=>{r()?u(d):u(c,!1)})}w(t,a),j()}var iy=R('<span class="text-muted-foreground"> </span>'),oy=R("<!> <!>",1),sy=R("<!> <!>",1);function ay(t,e){D(e,!0);const r=d=>{var c=iy(),u=L(c,!0);F(c),K(()=>ae(u,f(l)?f(l).value:"Select to edit")),w(d,c)};let n=q(e,"node",15);const i=De(),o=gr(),s={get current(){return o.node}},a=S(()=>i.selectedNode?.id===n().id),l=S(()=>n().operator&&i.summarizeOperator(n().operator,o.node));{let d=S(()=>f(l)?.status);dt(t,{get draggable(){return e.draggable},get status(){return f(d)},showRequired:!1,onSelect:()=>{i.selectAffectedNode(s)},get node(){return n()},set node(c){n(c)},children:(c,u)=>{var h=sy(),g=W(h);{let O=S(()=>f(a)?void 0:r);Zi(g,{get draggable(){return e.draggable},get unmount(){return e.unmount},get append(){return f(O)},disablePadding:!0,children:(E,_)=>{ge();var P=xe("Predicate");w(E,P)},$$slots:{default:!0}})}var v=I(g,2);{var m=O=>{var E=oy(),_=W(E);to(_,{get node(){return n().operator},set node(y){n(n().operator=y,!0)}});var P=I(_,2);ut(P,{class:"pt-4",get node(){return n()}}),w(O,E)};ye(v,O=>{i.selectedNode?.id===n().id&&O(m)})}w(c,h)},$$slots:{default:!0}})}j()}function ly(t,e){D(e,!0);let r=q(e,"node",15);or(t,{placeholder:"Value",get value(){return r().value},set value(n){r(r().value=n,!0)}}),j()}function dy(t,e){D(e,!0);let r=q(e,"node",15);var n=()=>r().value,i=o=>r(r().value=o??void 0,!0);or(t,{placeholder:"Value",get value(){return n()},set value(o){i(o)}}),j()}var uy=R(" <!>",1),cy=R("<!> ",1),fy=R("<!> <!>",1),py=R("<!> <!>",1),hy=R("<!> <!>",1);function ls(t,e){D(e,!0);let r=q(e,"value",15),n=se(!1),i=se(""),o=se(null),s=se(null);function a(){V(i,""),f(o)?.click(),f(s)?.focus()}const l=S(()=>e.options.find(v=>v.value===r())?.label);var d={focus:a},c=X(),u=W(c);{var h=v=>{var m=X(),O=W(m);Z(O,()=>sf,(E,_)=>{_(E,{get open(){return f(n)},set open(P){V(n,P,!0)},children:(P,y)=>{var b=hy(),M=W(b);{const k=(A,C)=>{ke(A,Fi(()=>C?.().props,{variant:"outline",class:"flex-1 justify-between",role:"combobox",get"aria-expanded"(){return f(n)},children:(T,z)=>{ge();var oe=uy(),be=W(oe),je=I(be);of(je,{class:"opacity-50"}),K(()=>ae(be,`${f(l)??"Select some option"??""} `)),w(T,oe)},$$slots:{default:!0}}))};Z(M,()=>Kc,(A,C)=>{C(A,{get ref(){return f(o)},set ref($){V(o,$,!0)},child:k,$$slots:{child:!0}})})}var x=I(M,2);Z(x,()=>Qc,(k,A)=>{A(k,{class:"p-0",portalProps:{disabled:!0},children:(C,$)=>{var T=X(),z=W(T);Z(z,()=>Zc,(oe,be)=>{be(oe,{children:(je,wt)=>{var ze=py(),Ye=W(ze);Z(Ye,()=>ef,(xt,St)=>{St(xt,{placeholder:"Select some option",get value(){return f(i)},set value(he){V(i,he,!0)}})});var nt=I(Ye,2);Z(nt,()=>tf,(xt,St)=>{St(xt,{children:(he,Ht)=>{var Xe=fy(),It=W(Xe);Z(It,()=>rf,(Ot,Rt)=>{Rt(Ot,{children:(Et,vr)=>{ge();var te=xe("No option found.");w(Et,te)},$$slots:{default:!0}})});var $t=I(It,2);Z($t,()=>nf,(Ot,Rt)=>{Rt(Ot,{value:"options",children:(Et,vr)=>{var te=X(),B=W(te);$e(B,17,()=>e.options,Me=>Me.id,(Me,mr)=>{var ct=X(),en=W(ct);Z(en,()=>af,(yr,Hn)=>{Hn(yr,{get value(){return f(mr).value},onSelect:()=>{r(f(mr).value),V(n,!1),e.onEnter?.()},children:($n,Gn)=>{var tn=cy(),Yn=W(tn);{let no=S(()=>Vi(r()!==f(mr).value&&"text-transparent"));lf(Yn,{get class(){return f(no)}})}var Xn=I(Yn);K(()=>ae(Xn,` ${f(mr).label??""}`)),w($n,tn)},$$slots:{default:!0}})}),w(Me,ct)}),w(Et,te)},$$slots:{default:!0}})}),w(he,Xe)},$$slots:{default:!0}})}),w(je,ze)},$$slots:{default:!0}})}),w(C,T)},$$slots:{default:!0}})}),w(P,b)},$$slots:{default:!0}})}),w(v,m)},g=v=>{or(v,{placeholder:"Input JSON value",onkeydown:m=>{m.code==="Enter"&&(m.preventDefault(),e.onEnter?.())},get ref(){return f(s)},set ref(m){V(s,m,!0)},get value(){return r()},set value(m){r(m)}})};ye(u,v=>{e.options.length>0?v(h):v(g,!1)})}return w(t,c),j(d)}var gy=R('<div class="flex"><!></div>');function vy(t,e){D(e,!0);let r=q(e,"node",15);const n=gr(),i=S(()=>wa(n.node));var o=gy(),s=L(o);ls(s,{get options(){return f(i)},get value(){return r().value},set value(a){r(r().value=a,!0)}}),F(o),w(t,o),j()}var my=R("<!> <!>",1);function yc(t,e){D(e,!0);let r=q(e,"value",15);var n=X(),i=W(n);{let o=S(()=>e.properties.size===0);Z(i,()=>Fl,(s,a)=>{a(s,{type:"single",get disabled(){return f(o)},get value(){return r()},set value(l){r(l)},children:(l,d)=>{var c=my(),u=W(c);Z(u,()=>Dl,(g,v)=>{v(g,{class:"w-full",children:(m,O)=>{ge();var E=xe();K(_=>ae(E,_),[()=>(r()!==void 0?e.properties.get(r()):void 0)??"Select some property"]),w(m,E)},$$slots:{default:!0}})});var h=I(u,2);Z(h,()=>jl,(g,v)=>{v(g,{children:(m,O)=>{var E=X(),_=W(E);$e(_,17,()=>e.properties,([P,y])=>P,(P,y)=>{var b=S(()=>df(f(y),2));let M=()=>f(b)[0],x=()=>f(b)[1];var k=X(),A=W(k);Z(A,()=>ql,(C,$)=>{$(C,{get value(){return M()},children:(T,z)=>{ge();var oe=xe();K(()=>ae(oe,x())),w(T,oe)},$$slots:{default:!0}})}),w(P,k)}),w(m,E)},$$slots:{default:!0}})}),w(l,c)},$$slots:{default:!0}})})}w(t,n),j()}var yy=R('<div class="flex flex-col gap-2"><!> <!></div>');function by(t,e){D(e,!0);let r=q(e,"node",15);const n=gr(),i=S(()=>oc(n.node)),o=S(()=>r().propertyId!==void 0?zr(n.node,r().propertyId)??void 0:void 0);Ir(()=>{f(i),Rr(()=>{const c=r().propertyId;c===void 0||f(i).has(c)||(r(r().propertyId=void 0,!0),r(r().operator=void 0,!0))})}),Ea({get node(){return f(o)}});var s=yy(),a=L(s);yc(a,{get properties(){return f(i)},get value(){return r().propertyId},set value(c){r(r().propertyId=c,!0)}});var l=I(a,2);{var d=c=>{to(c,{get node(){return r().operator},set node(u){r(r().operator=u,!0)}})};ye(l,c=>{f(o)&&c(d)})}F(s),w(t,s),j()}function _y(t,e){D(e,!0);let r=q(e,"node",15);const n=gr(),i=S(()=>oc(n.node));Ir(()=>{f(i),Rr(()=>{const o=r().propertyId;o===void 0||f(i).has(o)||r(r().propertyId=void 0,!0)})}),yc(t,{get properties(){return f(i)},get value(){return r().propertyId},set value(o){r(r().propertyId=o,!0)}}),j()}var wy=R('<div class="flex items-center gap-2"><!> <!></div>'),xy=R('<div class="flex flex-col gap-2"><div class="flex items-center gap-2"><!> <!></div> <!></div>');function Sy(t,e){D(e,!0);let r=q(e,"node",15);const n=gr(),i=S(()=>wa(n.node));Ir(()=>{f(i).length!==0&&Rr(()=>{const v=new Set(f(i).map(m=>m.value));r(r().values=r().values.filter(m=>v.has(m)),!0)})});let o=se(""),s;function a(){r().values.push(f(o)),V(o,""),s.focus()}var l=xy(),d=L(l),c=L(d);Pl(ls(c,{get options(){return f(i)},onEnter:a,get value(){return f(o)},set value(v){V(o,v,!0)}}),v=>s=v,()=>s);var u=I(c,2);{var h=v=>{ke(v,{variant:"outline",size:"icon",class:"size-8",onclick:a,children:(m,O)=>{gs(m,{class:"size-4"})},$$slots:{default:!0}})};ye(u,v=>{f(i).length===0&&v(h)})}F(d);var g=I(d,2);$e(g,17,()=>r().values,ds,(v,m,O)=>{var E=wy(),_=L(E);ls(_,{get options(){return f(i)},get value(){return r().values[O]},set value(y){r(r().values[O]=y,!0)}});var P=I(_,2);Oa(P,{onClick:()=>{r().values.splice(O,1)}}),F(E),w(v,E)}),F(l),w(t,l),j()}var Oy=R('<div class="text-destructive">First, define the child element of the list</div>');function Ey(t,e){D(e,!0);let r=q(e,"node",15);const n=gr(),i=S(()=>Ki(n.node));Ea({get node(){return f(i)}});var o=X(),s=W(o);{var a=d=>{to(d,{get node(){return r().operand},set node(c){r(r().operand=c,!0)}})},l=d=>{var c=Oy();w(d,c)};ye(s,d=>{f(i)?d(a):d(l,!1)})}w(t,o),j()}var Py=R("<!> <!> <!>",1);function Ny(t,e){D(e,!0);let r=q(e,"node",15);const n=S(()=>is(r())||Dv(r()));dt(t,{get draggable(){return e.draggable},showRequired:!1,disableSelection:!0,get node(){return r()},set node(i){r(i)},children:(i,o)=>{var s=Py(),a=W(s);Zi(a,{get draggable(){return e.draggable},get unmount(){return e.unmount},get disablePadding(){return f(n)},children:(T,z)=>{ge();var oe=xe();K(()=>ae(oe,Sg[r().op])),w(T,oe)},$$slots:{default:!0}});var l=I(a,2);{var d=T=>{eo(T,{showRequired:!1,get accept(){return Zu},onDrop:(z,oe)=>{r().operands.splice(oe,0,z)},get nodes(){return r().operands},set nodes(z){r(r().operands=z,!0)}})},c=S(()=>is(r())),u=T=>{Ey(T,{get node(){return r()},set node(z){r(z)}})},h=S(()=>Ku(r())),g=T=>{to(T,{get node(){return r().operand},set node(z){r(r().operand=z,!0)}})},v=S(()=>Ju(r())),m=T=>{ly(T,{get node(){return r()},set node(z){r(z)}})},O=S(()=>Iv(r())),E=T=>{dy(T,{get node(){return r()},set node(z){r(z)}})},_=S(()=>Rv(r())),P=T=>{vy(T,{get node(){return r()},set node(z){r(z)}})},y=S(()=>Cv(r())),b=T=>{Sy(T,{get node(){return r()},set node(z){r(z)}})},M=S(()=>Wv(r())),x=T=>{by(T,{get node(){return r()},set node(z){r(z)}})},k=S(()=>Qu(r())),A=T=>{_y(T,{get node(){return r()},set node(z){r(z)}})},C=S(()=>jv(r()));ye(l,T=>{f(c)?T(d):f(h)?T(u,1):f(v)?T(g,2):f(O)?T(m,3):f(_)?T(E,4):f(y)?T(P,5):f(M)?T(b,6):f(k)?T(x,7):f(C)&&T(A,8)})}var $=I(l,2);ut($,{class:"pt-4",get node(){return r()}}),w(i,s)},$$slots:{default:!0}}),j()}var ky=R("<p>Field values must be split between branches without gaps.</p> <p>Mark a branch as <code>Complement</code> to include all remaining values.</p>",1),My=R("<!> <!>",1),Ty=R('<div class="flex items-center gap-2"><!> <!> <!></div>'),Ay=R('<div class="pb-2"><!></div>'),Iy=R("<!> <!> <!> <!>",1);function Ry(t,e){const r=Cl();D(e,!0);let n=q(e,"node",15);const i=De(),o=Km(),s=Bm(),a=(d,c)=>{const u=Ji(d)?d:Xi(d);n().properties.splice(c,0,u),i.selectNode({current(){return n().properties.find(h=>h.id===u.id)?.property},update(h){const g=n().properties.findIndex(v=>v.id===u.id);n(n().properties[g].property=h,!0)}},!1)},l=S(()=>o.complementary===n().id);dt(t,{get draggable(){return e.draggable},showRequired:!1,class:"flex flex-col gap-0.5",get node(){return n()},set node(d){n(d)},children:(d,c)=>{var u=Iy(),h=W(u);Zi(h,{get draggable(){return e.draggable},unmount:()=>{o.complementary=void 0,e.unmount()},disablePadding:!0,append:_=>{var P=Ty(),y=L(P),b=()=>f(l),M=A=>{o.complementary=A?n().id:void 0};uf(y,{get id(){return r},onclick:A=>A.stopPropagation(),get checked(){return b()},set checked(A){M(A)}});var x=I(y,2);Wl(x,{get for(){return r},class:"text-muted-foreground text-base",onclick:A=>A.stopPropagation(),children:(A,C)=>{ge();var $=xe("Complement");w(A,$)},$$slots:{default:!0}});var k=I(x,2);Z(k,()=>Ef,(A,C)=>{C(A,{children:($,T)=>{var z=My(),oe=W(z);Z(oe,()=>Sf,(je,wt)=>{wt(je,{children:(ze,Ye)=>{cf(ze,{class:"size-5 text-muted-foreground"})},$$slots:{default:!0}})});var be=I(oe,2);Z(be,()=>Of,(je,wt)=>{wt(je,{children:(ze,Ye)=>{var nt=ky();ge(2),w(ze,nt)},$$slots:{default:!0}})}),w($,z)},$$slots:{default:!0}})}),F(P),w(_,P)},children:(_,P)=>{ge();var y=xe();K(()=>ae(y,`Branch ${s.current+1}`)),w(_,y)},$$slots:{append:!0,default:!0}});var g=I(h,2);{var v=E=>{var _=Ay(),P=L(_);ny(P,{get node(){return n()},set node(y){n(y)}}),F(_),w(E,_)};ye(g,E=>{f(l)||E(v)})}var m=I(g,2);eo(m,{showRequired:!1,get accept(){return _a},onDrop:a,get nodes(){return n().properties},set nodes(E){n(n().properties=E,!0)}});var O=I(m,2);{let E=S(()=>[n().properties.length===0&&"pt-4"]);ut(O,{get class(){return f(E)},get node(){return n()}})}w(d,u)},$$slots:{default:!0}}),j()}var Cy=R("<!> <!>",1);function Wy(t,e){D(e,!0);let r=q(e,"node",15);const n=De();dt(t,{get draggable(){return e.draggable},get showRequired(){return e.showRequired},class:"flex flex-col gap-0.5",get node(){return r()},set node(i){r(i)},children:(i,o)=>{var s=Cy(),a=W(s);Zr(a,{get node(){return r()},get draggable(){return e.draggable},get unmount(){return e.unmount},get showRequired(){return e.showRequired},disablePadding:!0,append:c=>{var u=()=>r().valueType,h=g=>{r(va(r().id,g,r().options))};mc(c,{get value(){return u()},set value(g){h(g)},get items(){return n.availableRangeValueTypes},get labels(){return ns}})},$$slots:{append:!0}});var l=I(a,2);ut(l,{get node(){return r()}}),w(i,s)},$$slots:{default:!0}}),j()}var Dy=R('<div class="flex items-center bg-background rounded-sm"><!> <div class="px-2 flex items-center justify-center tabular-nums"> </div> <!></div>');function El(t,e){D(e,!0);var r=Dy(),n=L(r);{let a=S(()=>e.value<=e.minimum);ke(n,{variant:"outline",class:"size-8 hover:bg-accent hover:text-accent-foreground",size:"icon",get onclick(){return e.onDown},get disabled(){return f(a)},children:(l,d)=>{ff(l,{})},$$slots:{default:!0}})}var i=I(n,2),o=L(i,!0);F(i);var s=I(i,2);ke(s,{variant:"outline",class:"size-8 hover:bg-accent hover:text-accent-foreground",size:"icon",get onclick(){return e.onUp},children:(a,l)=>{gs(a,{})},$$slots:{default:!0}}),F(r),K(()=>ae(o,e.value)),w(t,r),j()}const ri={Left:t=>[t.x-1,t.x,t.y,t.y+t.h],Top:t=>[t.x,t.x+t.w,t.y-1,t.y],Right:t=>[t.x+t.w,t.x+t.w+1,t.y,t.y+t.h],Bottom:t=>[t.x,t.x+t.w,t.y+t.h,t.y+t.h+1]};function ni(){return{toMove:new Set,toShrink:new Set}}function ii(t){return t.toMove.size===0&&t.toShrink.size===0}function oi(t,e){return{toShrink:t.toShrink.union(e.toShrink),toMove:t.toMove.union(e.toMove)}}var jy=R('<div class="flex items-center gap-2 pr-2"><span class="text-muted-foreground">Cols</span> <!></div> <div class="flex items-center gap-2 pr-2"><span class="text-muted-foreground">Rows</span> <!></div>',1),Fy=R('<div class="relative flex justify-center items-center"><!> <!> <!> <!> <!> <!> <!> <!> <!></div>'),qy=R('<!> <div class="grid gap-2"></div> <!>',1);function Ly(t,e){D(e,!0);let r=q(e,"node",15);const n=(y,b)=>`${y}-${b}`,i=S(()=>{const y=new Map,b=new Map,M=pf(r().height,()=>new Array(r().width).fill(null));for(let x=0;x<r().cells.length;x++){const k=r().cells[x],A=k.node;y.set(A.id,k),b.set(A.id,x);for(let C=k.y;C<k.y+k.h;C++){const $=M[C];for(let T=k.x;T<k.x+k.w;T++)$[T]=A.id}}return{grid:M,cells:y,indexes:b}}),o=S(()=>f(i).cells),s=S(()=>f(i).grid),a=S(()=>f(i).indexes),l=new Map,d=new Map;function c(y){let b=0,M=y;for(;d.get(M)!==void 0;)M=`${y}-${b++}`;return M}function u(y,b){const M=l.get(y);if(M!==void 0)return M;let x=c(b);return l.set(y,x),d.set(x,y),x}function h(y){const b=d.get(y);l.delete(b),d.delete(y)}function*g(){const y=new Set;for(let b=0;b<r().height;b++){const M=f(s)[b];for(let x=0;x<r().width;x++){const k=M[x];k===null?yield{id:c(n(x,b)),index:-1,cell:{x,y:b,w:1,h:1,node:void 0}}:y.has(k)||(y.add(k),yield{id:u(k,n(x,b)),index:f(a).get(k),cell:f(o).get(k)})}}}function v([y,b,M,x]){if(y<0||b>r().width||M<0||x>r().height)return!1;for(let k=M;k<x;k++){const A=f(s)[k];for(let C=y;C<b;C++)if(A[C]!==null)return!1}return!0}function m(y){let b=ni();const M=f(o).get(y);if(M.w>1)return b.toShrink.add(y),b;if(M.x<=0)return b;let x;const k=M.x-1;for(let A=M.y;A<M.y+M.h;A++){const C=f(s)[A][k];if(C===null||x===C)continue;x=C;const $=m(C);if(ii($))return $;b=oi(b,$)}return b.toMove.add(y),b}function O(){let y=ni();const b=new Set;let M;const x=r().width-1;for(let k=0;k<r().height;k++){const A=f(s)[k][x];if(A===null||M===A)continue;M=A;const C=m(A);ii(C)?b.add(A):y=oi(y,C)}for(const k of y.toShrink)f(o).get(k).w--;for(const k of y.toMove)f(o).get(k).x--;b.size>0&&r(r().cells=r().cells.filter(k=>!b.has(k.node.id)),!0),r(r().width--,!0)}function E(y){let b=ni();const M=f(o).get(y);if(M.h>1)return b.toShrink.add(y),b;if(M.y<=0)return b;let x;const k=f(s)[M.y-1];for(let A=M.x;A<M.x+M.w;A++){const C=k[A];if(C===null||x===C)continue;x=C;const $=E(C);if(ii($))return $;b=oi(b,$)}return b.toMove.add(y),b}function _(){let y=ni();const b=new Set;let M;const x=f(s)[r().height-1];for(let k=0;k<r().width;k++){const A=x[k];if(A===null||M===A)continue;M=A;const C=E(A);ii(C)?b.add(A):y=oi(y,C)}for(const k of y.toShrink)f(o).get(k).h--;for(const k of y.toMove)f(o).get(k).y--;b.size>0&&r(r().cells=r().cells.filter(k=>!b.has(k.node.id)),!0),r(r().height--,!0)}const P=De();dt(t,{get draggable(){return e.draggable},get showRequired(){return e.showRequired},class:"flex flex-col gap-0.5",get node(){return r()},set node(y){r(y)},children:(y,b)=>{var M=qy(),x=W(M);Zr(x,{get node(){return r()},get draggable(){return e.draggable},get unmount(){return e.unmount},get showRequired(){return e.showRequired},append:$=>{var T=jy(),z=W(T),oe=I(L(z),2);El(oe,{minimum:1,get value(){return r().width},onUp:()=>{r(r().width++,!0)},onDown:O}),F(z);var be=I(z,2),je=I(L(be),2);El(je,{minimum:1,get value(){return r().height},onUp:()=>{r(r().height++,!0)},onDown:_}),F(be),w($,T)},$$slots:{append:!0}});var k=I(x,2);$e(k,21,g,C=>C.id,(C,$)=>{const T=S(()=>f($).cell),z=S(()=>f(T).node!==void 0&&!P.isDragged&&P.selectedNode?.id===f(T).node.id),oe=S(()=>f(z)&&v(ri.Left(f(T)))),be=S(()=>f(z)&&v(ri.Right(f(T)))),je=S(()=>f(z)&&v(ri.Top(f(T)))),wt=S(()=>f(z)&&v(ri.Bottom(f(T)))),ze=S(()=>f(z)&&f(T).w>1),Ye=S(()=>f(z)&&f(T).h>1);var nt=Fy(),xt=L(nt);{let te=S(()=>["absolute size-8 z-10 -left-10",f(oe)?"inline-flex":"hidden",f(ze)&&"top-[calc(50%-2.2rem)]"]);ke(xt,{get class(){return f(te)},variant:"secondary",size:"icon",onclick:B=>{B.stopPropagation(),f(T).x-=1,f(T).w+=1},children:(B,Me)=>{Aa(B,{})},$$slots:{default:!0}})}var St=I(xt,2);{let te=S(()=>["absolute size-8 z-10 -left-10",f(ze)?"inline-flex":"hidden",f(oe)&&"top-[calc(50%+0.2rem)]"]);ke(St,{get class(){return f(te)},variant:"secondary",size:"icon",onclick:B=>{B.stopPropagation(),f(T).x+=1,f(T).w-=1},children:(B,Me)=>{Ia(B,{})},$$slots:{default:!0}})}var he=I(St,2);{let te=S(()=>["absolute size-8 z-10 -right-10",f(be)?"inline-flex":"hidden",f(ze)&&"top-[calc(50%-2.2rem)]"]);ke(he,{get class(){return f(te)},variant:"secondary",size:"icon",onclick:B=>{B.stopPropagation(),f(T).w+=1},children:(B,Me)=>{Ia(B,{})},$$slots:{default:!0}})}var Ht=I(he,2);{let te=S(()=>["absolute size-8 z-10 -right-10",f(ze)?"inline-flex":"hidden",f(be)&&"top-[calc(50%+0.2rem)]"]);ke(Ht,{get class(){return f(te)},variant:"secondary",size:"icon",onclick:B=>{B.stopPropagation(),f(T).w-=1},children:(B,Me)=>{Aa(B,{})},$$slots:{default:!0}})}var Xe=I(Ht,2);{let te=S(()=>["absolute size-8 z-10 -top-10",f(je)?"inline-flex":"hidden",f(Ye)&&"left-[calc(50%-2.2rem)]"]);ke(Xe,{get class(){return f(te)},variant:"secondary",size:"icon",onclick:B=>{B.stopPropagation(),f(T).y-=1,f(T).h+=1},children:(B,Me)=>{Ra(B,{})},$$slots:{default:!0}})}var It=I(Xe,2);{let te=S(()=>["absolute size-8 z-10 -top-10",f(Ye)?"inline-flex":"hidden",f(je)&&"left-[calc(50%+0.2rem)]"]);ke(It,{get class(){return f(te)},variant:"secondary",size:"icon",onclick:B=>{B.stopPropagation(),f(T).y+=1,f(T).h-=1},children:(B,Me)=>{Ca(B,{})},$$slots:{default:!0}})}var $t=I(It,2);{let te=S(()=>["absolute size-8 z-10 -bottom-10",f(wt)?"inline-flex":"hidden",f(Ye)&&"left-[calc(50%-2.2rem)]"]);ke($t,{get class(){return f(te)},variant:"secondary",size:"icon",onclick:B=>{B.stopPropagation(),f(T).h+=1},children:(B,Me)=>{Ca(B,{})},$$slots:{default:!0}})}var Ot=I($t,2);{let te=S(()=>["absolute size-8 z-10 -bottom-10",f(Ye)?"inline-flex":"hidden",f(wt)&&"left-[calc(50%+0.2rem)]"]);ke(Ot,{get class(){return f(te)},variant:"secondary",size:"icon",onclick:B=>{B.stopPropagation(),f(T).h-=1},children:(B,Me)=>{Ra(B,{})},$$slots:{default:!0}})}var Rt=I(Ot,2),Et=()=>r().cells[f($).index]?.node,vr=te=>{te!==void 0?r().cells.push({...f(T),node:te}):(h(f($).id),r().cells.splice(f($).index,1))};_c(Rt,{showRequired:!0,get node(){return Et()},set node(B){vr(B)},placeholder:B=>{ge();var Me=xe("Empty cell");w(B,Me)},$$slots:{placeholder:!0}}),F(nt),K(()=>Ta(nt,`grid-column: span ${f(T).w??""} / span ${f(T).w??""}; grid-row: span ${f(T).h??""} / span ${f(T).h??""};`)),w(C,nt)}),F(k);var A=I(k,2);ut(A,{class:"pt-3",get node(){return r()}}),K(()=>Ta(k,`grid-template-columns: repeat(${r().width??""}, auto); grid-template-rows: repeat(${r().height??""}, auto);`)),w(y,M)},$$slots:{default:!0}}),j()}var zy=R("<!> <!> <!>",1);function Vy(t,e){D(e,!0);let r=q(e,"node",15);dt(t,{get draggable(){return e.draggable},get showRequired(){return e.showRequired},class:"flex flex-col gap-0.5",get node(){return r()},set node(n){r(n)},children:(n,i)=>{var o=zy(),s=W(o);Zr(s,{get node(){return r()},get draggable(){return e.draggable},get unmount(){return e.unmount},get showRequired(){return e.showRequired}});var a=I(s,2);_c(a,{showRequired:!1,get node(){return r().item},set node(d){r(r().item=d,!0)}});var l=I(a,2);ut(l,{class:"pt-3",get node(){return r()}}),w(n,o)},$$slots:{default:!0}}),j()}var Uy=R("<!> <!>",1);function Sr(t,e){D(e,!0);let r=q(e,"node",15);dt(t,{get draggable(){return e.draggable},get showRequired(){return e.showRequired},get node(){return r()},set node(n){r(n)},children:(n,i)=>{var o=Uy(),s=W(o);Zr(s,{get node(){return r()},get unmount(){return e.unmount},get draggable(){return e.draggable},get showRequired(){return e.showRequired},disablePadding:!0});var a=I(s,2);ut(a,{get node(){return r()}}),w(n,o)},$$slots:{default:!0}}),j()}const bc={[p.Object]:Jm,[p.ObjectProperty]:ty,[p.ObjectPropertyDependency]:Ry,[p.Predicate]:ay,[p.Operator]:Ny,[p.Array]:Vy,[p.Grid]:Ly,[p.Enum]:Ol,[p.MultiEnum]:Ol,[p.String]:Sr,[p.Number]:Sr,[p.Boolean]:Sr,[p.File]:Sr,[p.Tags]:Sr,[p.Range]:Wy,[p.QrCode]:Sr};function ro(t,e){D(e,!0);let r=q(e,"node",15);const i=De().createDraggable({unmount:e.unmount,get node(){return r()}}),o=Qr();Sm({get isDragged(){return o.isDragged||i.isDragged}});const s=S(()=>bc[r().type]);var a=X(),l=W(a);Z(l,()=>f(s),(d,c)=>{c(d,{get draggable(){return i},get unmount(){return e.unmount},get showRequired(){return e.showRequired},get node(){return r()},set node(u){r(u)}})}),w(t,a),j()}const By=t=>{ge();var e=xe("Drop form element here");w(t,e)};function _c(t,e){D(e,!0);let r=q(e,"node",15),n=q(e,"placeholder",3,By);const i=De(),o=Qr(),s={current(){return r()},update(u){r(u)}};var a=X(),l=W(a);{var d=u=>{ro(u,{unmount:()=>r(void 0),get showRequired(){return e.showRequired},get node(){return r()},set node(h){r(h)}})},c=u=>{const h=S(()=>i.createDroppable(o,{accept:_a,onDrop(g){r(Ji(g)?g.property:g),i.selectNode(s,e.showRequired)}}));Qi(u,{get placeholder(){return n()},get droppable(){return f(h)}})};ye(l,u=>{r()?u(d):u(c,!1)})}w(t,a),j()}export{ab as B,kv as C,p as N,N as O,_c as S,ib as a,Sg as b,ob as c,um as d,Ae as e,Pm as f,De as g,sb as h,Kr as i,Sm as s};
